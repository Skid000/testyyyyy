<!DOCTYPE html>
<html>
    <head>
        <title>Predark</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta property="og:title" content="Dredark">
        <meta property="og:type" content="website">
        <meta property="og:image" content="https://test.drednot.io/drednot.png">
        <meta property="og:url" content="https://drednot.io/">
        <meta property="og:description" content="A free multiplayer ship construction and combat game. Build a flying battleship with your friends and conquer the skies!">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="https://test.drednot.io/drednot.png">
        <meta name="description" content="Dredark is a free multiplayer ship construction and combat game. Build a flying battleship with your friends and conquer the skies!">
        <base href="/">
        <script>
            var googletag = googletag || {};
            googletag.cmd = googletag.cmd || [];
        </script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
        </script>
        <link rel="preload" href="/x/metallark.jtTqS33A2NRINMaxpdTG.js" as="script">
        <link rel="preload" href="/x/assets.jtTqS33A2NRINMaxpdTG.js" as="script">
        <link rel="preload" href="/x/asset.61500qM9vsBobsvPJt1.wasm" as="fetch" type="application/wasm" crossorigin="true">
        <style>
            .center-vert {
                vertical-align: middle
            }

            .fab {
                font-weight: 400;
                vertical-align: middle
            }

            .fas {
                vertical-align: middle
            }

            .fa-reddit-alien {
                color: #ff4500
            }

            .fa-twitter {
                color: #1da1f2
            }

            .fa-discord {
                color: #7289da
            }

            .fa-poll {
                color: #0f0
            }

            .fa-bug {
                color: red
            }

            .big-icon {
                vertical-align: middle;
                margin: 2px;
                font-size: 1.4em
            }

            .white {
                color: #fff
            }

            .tooltip {
                display: none
            }

            :hover>.tooltip {
                display: inline-block;
                position: absolute;
                font-size: 12pt;
                padding: 4px;
                transform: translate(-50%,-100%)
            }

            input[type=checkbox] {
                width: 24px;
                height: 24px;
                vertical-align: middle
            }

            .craft-queue {
                height: 38px;
                overflow: hidden
            }

            .craft-queue>div {
                margin-right: 4px;
                border: 1px solid #000;
                background: #222;
                display: inline-block;
                border-radius: 2px;
                padding: 0 4px;
                user-select: none;
                cursor: pointer
            }

            .craft-queue>div:hover {
                border: 1px solid #ff0
            }

            .craft-queue>div>div {
                width: 32px;
                height: 32px;
                pointer-events: none;
                display: inline-block
            }

            .craft-option {
                width: 50px;
                height: 50px;
                cursor: pointer;
                user-select: none;
                background-repeat: no-repeat;
                background-origin: border-box;
                border: 1px solid #000;
                display: inline-block;
                box-sizing: border-box;
                background-color: #222;
                background-position: center;
                margin: 4px;
                position: relative
            }

            .craft-option.disable {
                background-color: #411
            }

            .craft-option.highlight {
                border: 2px solid #0f0
            }

            .craft-option.patron-recipe {
                background-color: #742
            }

            .craft-option:hover {
                border: 2px solid #ff0
            }

            .craft-resource td {
                margin: 0;
                padding: 0
            }

            .craft-resource td * {
                vertical-align: middle
            }

            .craft-resource .bar {
                display: inline-block;
                border: 1px solid #000;
                background: #000;
                text-align: center;
                width: 100%;
                padding: 4px;
                margin: 1px;
                border-radius: 2px;
                position: relative
            }

            .craft-resource .bar .count {
                color: #000;
                background: #ddd;
                padding: 0 2px;
                border-radius: 4px;
                position: relative;
                z-index: 30;
                font-size: 10pt
            }

            .craft-resource .bar .bar-inner {
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0
            }

            .craft-tip {
                position: absolute;
                left: 50%;
                padding: 10px;
                z-index: 30;
                transform: translate(-50%,-100%);
                width: 600px;
                pointer-events: none;
                border: 1px solid #fff
            }

            span.craft-big {
                font-size: 1.5em;
                font-weight: 700
            }

            .log-count {
                display: inline-block;
                min-width: 20px;
                text-align: right
            }

            .window section {
                border: 1px solid #fff;
                padding: 10px;
                margin-bottom: 10px
            }

            .window section h3 {
                margin-top: 0
            }

            .window section p {
                margin: 10px 0
            }

            .modal-container {
                position: absolute;
                background: rgba(1,1,1,.8);
                width: 100%;
                height: 100%;
                z-index: 99999;
                overflow-y: auto;
                display: flex;
                justify-content: center
            }

            .modal-window {
                width: 600px;
                align-self: self-start;
                justify-self: center;
                margin-top: 100px;
                margin-bottom: 100px
            }

            button:disabled {
                filter: brightness(.5) grayscale(.5);
                cursor: not-allowed
            }

            .btn-google {
                background: url("/branding/btn_google_signin_dark_normal_web.png");
                border: none;
                width: 191px;
                height: 46px
            }

            .color-slider {
                border: none!important;
                -webkit-appearance: none;
                height: 20px;
                width: 150px;
                box-sizing: border-box
            }

            .color-slider::-webkit-slider-runnable-track {
                background: 0 0;
                border: none;
                padding: 0
            }

            .color-slider::-moz-range-track {
                background: 0 0;
                border: none;
                padding: 0
            }

            .color-slider::-webkit-slider-thumb {
                -webkit-appearance: none;
                background: url("img/picker_arrow.png");
                width: 5px;
                height: 20px
            }

            .color-slider::-moz-range-thumb {
                border: none;
                background: url("img/picker_arrow.png");
                width: 5px;
                height: 20px
            }

            .color-picker-point {
                width: 7px;
                height: 7px;
                background: url("img/picker_point.png");
                position: relative;
                pointer-events: none
            }

            .file-pane {
                border: 1px solid #fff
            }

            .file-pane>* {
                margin: 10px
            }

            .file-pane>p {
                font-style: italic
            }

            .file-pane-file {
                border: 1px solid #fff
            }

            .file-pane-img {
                width: 26px;
                height: 26px;
                background-size: contain;
                background-repeat: no-repeat;
                background-position: center
            }

            .file-pane-name {
                padding: 0 5px
            }

            .center-note {
                margin: 5px!important;
                text-align: center;
                font-style: italic
            }

            #map_button {
                position: absolute;
                right: 100px;
                bottom: 68px;
                transform: translateX(50%)
            }

            .h {
                font-size: 12pt;
                margin-top: 0
            }

            button {
                pointer-events: auto
            }

            .cc-column {
                display: inline-block;
                max-width: 600px;
                vertical-align: top;
                margin-right: 10px
            }

            p.wip {
                font-style: italic;
                color: orange
            }

            .ui-hidden {
                display: none!important
            }

            .tip {
                position: absolute;
                bottom: 42px;
                left: 50%;
                transform: translateX(-50%);
                font-size: 10pt;
                margin-bottom: 4px;
                pointer-events: none;
                visibility: hidden;
                width: 300px;
                z-index: 2
            }

            .tip.left {
                transform: translateX(0)
            }

            .tip.right {
                transform: translateX(-100%)
            }

            .tip.fixed {
                position: fixed;
                transform: translateY(-110%) translateX(-50%);
                left: unset;
                bottom: unset
            }

            .tip h3 {
                margin: 5px;
                text-align: left
            }

            .tip p {
                margin: 0 5px 5px
            }

            :hover>.tip {
                visibility: visible
            }

            #big-ui-container {
                position: absolute;
                z-index: 5;
                top: 0;
                bottom: 80px;
                left: 0;
                right: 0;
                pointer-events: none
            }

            #shipyard {
                height: 100%
            }

            #shipyard-left {
                width: 400px;
                height: 100%
            }

            #shipyard-right {
                position: absolute;
                top: 0;
                bottom: 0;
                left: 400px;
                right: 0;
                overflow-y: auto;
                overflow-x: hidden;
                pointer-events: auto
            }

            #shipyard-right h3 {
                padding: 5px
            }

            .shipyard-bin {
                display: flex;
                flex-wrap: wrap;
                justify-content: center
            }

            .shipyard-item {
                display: inline-block;
                border: 1px solid #000;
                margin: 5px;
                vertical-align: top;
                position: relative;
                background-size: cover;
                cursor: pointer
            }

            .shipyard-item>* {
                position: absolute;
                color: #fff;
                margin: 0
            }

            .shipyard-item>.sy-title {
                left: 0;
                right: 0
            }

            .shipyard-item>.sy-title h3 {
                background: rgba(1,1,1,.7);
                font-size: 12pt;
                margin: 0;
                padding: 2px;
                overflow: hidden;
                white-space: nowrap
            }

            .shipyard-item>.sy-id {
                bottom: 0;
                right: 0
            }

            .shipyard-item>.sy-crew {
                bottom: 0;
                left: 0
            }

            .shipyard-item span {
                background: rgba(1,1,1,.7);
                padding: 2px;
                font-size: 10pt
            }

            .shipyard-ad {
                display: flex;
                justify-content: center;
                margin: 10px
            }

            .shipyard-ad h4 {
                text-align: center;
                margin: 4px
            }

            ul.shipyard-partners {
                font-size: 10pt;
                padding: 0 10px 5px 20px;
                margin: 0
            }

            #new-ad-slot-1 p,#new-ad-slot-2 p,#new-ad-slot-3 p {
                margin: 10px;
                text-align: center
            }

            body,html {
                height: 100%;
                background: #ddd;
                margin: 0;
                padding: 0;
                overflow: hidden;
                font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,"Helvetica Neue",Arial,sans-serif;
                user-select: none
            }

            #bottom-bar,#scoreboard,.window,.window-dark {
                pointer-events: auto;
                user-select: text
            }

            .window {
                position: relative;
                padding: 10px;
                overflow-y: auto;
                box-sizing: border-box
            }

            #window-container {
                position: absolute;
                z-index: 10;
                top: 20px;
                bottom: 100px;
                left: 0;
                right: 0;
                display: grid;
                grid-template-columns: 1fr auto auto 1fr;
                grid-template-rows: 100%;
                align-items: center;
                transform-origin: left;
                pointer-events: none
            }

            #window-container>* {
                box-sizing: border-box;
                display: inline-block;
                max-height: 100%
            }

            #window-container>.center {
                justify-self: center;
                grid-column: 2
            }

            #window-container>.left {
                grid-column: 1;
                justify-self: center
            }

            #window-container>.right {
                grid-column: 4;
                justify-self: center
            }

            .center-container-h {
                display: flex;
                justify-content: center
            }

            h1 {
                text-align: center;
                font-size: 50pt;
                margin: 0;
                text-shadow: #f80 2px 2px 4px
            }

            h2 {
                text-align: center;
                margin: 10px
            }

            h3 {
                margin: 10px 0
            }

            hr {
                border: none;
                border-top: 1px solid #000
            }

            #partner-info,#social-info {
                min-width: 350px
            }

            #partner-info li,#social-info li {
                font-weight: 700;
                line-height: 1.5em
            }

            #social-info ul.community a {
                text-decoration: none
            }

            #social-info ul.community {
                list-style-type: none;
                padding-left: 15px
            }

            #social-info img {
                vertical-align: middle;
                border-radius: 4px;
                width: 32px;
                height: 32px;
                margin: 1px
            }

            #social-info img.discord {
                background: #2c2f33
            }

            div#notice button {
                margin: 10px;
                font-size: 1.2em
            }

            #start-menu {
                display: flex;
                flex-direction: column;
                margin: 0
            }

            #game-container {
                position: absolute;
                background: radial-gradient(#2aaaca,#104a5e);
                top: 0;
                bottom: 0;
                left: 0;
                right: 0
            }

            .button-container {
                display: flex;
                margin: 0 50px
            }

            .button-container>* {
                pointer-events: auto
            }

            .btn,button {
                border: 1px solid #000;
                border-radius: 5px;
                background: linear-gradient(#666,#000 200%);
                font-size: 12pt;
                padding: 5px;
                margin: 5px;
                color: #fff;
                text-decoration: none;
                cursor: pointer;
                white-space: nowrap;
                vertical-align: middle;
                user-select: none
            }

            .btn-small {
                font-size: 10pt;
                padding: 3px;
                margin: 3px
            }

            .btn-large {
                font-size: 20pt;
                padding: 10px;
                margin: 10px
            }

            .btn-meme {
                font-size: 30pt;
                background: linear-gradient(#a4a,#000 200%)!important
            }

            .btn-red {
                background: linear-gradient(#a44,#000 200%)!important
            }

            .btn-orange {
                background: linear-gradient(#b84,#000 200%)!important
            }

            .btn-yellow {
                background: linear-gradient(#994,#000 200%)!important
            }

            .btn-green {
                background: linear-gradient(#4a4,#000 200%)!important
            }

            .btn-blue {
                background: linear-gradient(#488,#000 200%)!important
            }

            .no-margin {
                margin: 0
            }

            .button-container .last-left {
                margin-right: auto
            }

            .vertical-center-img {
                display: inline-block;
                height: 100%;
                vertical-align: middle
            }

            .vertical-center-img img {
                vertical-align: middle
            }

            #content-bottom {
                pointer-events: none;
                z-index: 20;
                position: absolute;
                bottom: 0;
                width: 100%
            }

            #bottom-bar {
                font-size: 10pt;
                padding: 8px;
                padding-bottom: 2px;
                border-bottom: none
            }

            .darker {
                color: #fff!important;
                background: #19232d!important;
                border-radius: 0!important;
                border: 1px solid #000
            }

            .dark {
                color: #fff!important;
                background: rgba(25,35,45,.9)!important;
                border-radius: 0!important;
                border: 1px solid #000
            }

            .dark a,.darker a {
                color: #ff0
            }

            .dark input,.dark textarea,.darker input,.darker textarea {
                background: rgba(0,0,0,.2);
                color: #fff;
                border: 1px solid #fff
            }

            .dark input,.darker input {
                padding: 4px;
                font-size: 14pt
            }

            .dark hr,.darker hr {
                border-top: 1px solid #ccc
            }

            #team-list>p {
                text-align: center
            }

            .scoreboard {
                color: #000;
                border: 2px solid #000;
                overflow-y: auto;
                overflow-x: hidden;
                max-width: 600px
            }

            .scoreboard>p {
                margin: 10px;
                text-align: center
            }

            .scoreboard>div {
                padding: 10px;
                padding-bottom: 12px;
                border-bottom: 1px solid #000
            }

            .scoreboard>div:last-child {
                border-bottom: none
            }

            .scoreboard>div>h3 {
                text-align: left;
                margin: 0
            }

            .scoreboard>div>h3>span {
                float: right;
                margin-left: 30px
            }

            .scoreboard>div>p {
                margin: 0
            }

            .scoreboard span.hex {
                font-size: 8pt;
                float: right
            }

            .scoreboard input {
                vertical-align: top
            }

            #chat {
                color: #fff;
                background: rgba(25,35,45,.9);
                width: 500px;
                align-self: flex-end;
                border: 1px solid #000;
                pointer-events: auto;
                padding: 10px;
                position: absolute;
                bottom: 0;
                margin-left: 50px
            }

            #chat.closed {
                background: 0 0;
                border: none;
                pointer-events: none
            }

            #chat.closed h2 {
                display: none
            }

            #chat.closed button,#chat.closed input,#chat.closed label {
                visibility: hidden
            }

            #chat.closed #chat-content p {
                display: none
            }

            #chat.closed #chat-content p.recent {
                display: block;
                background: rgba(25,35,45,.9)
            }

            #chat.closed #chat-content {
                user-select: none;
                overflow: hidden
            }

            #chat-content {
                user-select: text;
                overflow-y: auto;
                overflow-x: hidden;
                word-wrap: break-word;
                padding: 6px;
                max-height: 300px
            }

            #chat-content p {
                padding: 2px 8px;
                margin: 0
            }

            #chat-input {
                width: 100%;
                background: 0 0;
                color: #fff;
                border: 2px solid #fff;
                box-sizing: border-box;
                padding: 2px;
                font-size: 16pt
            }

            #chat button,#chat-input {
                margin: 4px 0
            }

            .close {
                position: absolute;
                right: 20px
            }

            #canvas-2d,#canvas-game {
                position: absolute;
                top: 0;
                left: 0
            }

            .browser-warning {
                text-align: center;
                position: relative;
                width: auto;
                z-index: 100;
                font-size: 20pt;
                padding: 10px
            }

            #team_menu {
                z-index: 100;
                position: absolute;
                top: 50px;
                bottom: 100px;
                left: 50px;
                right: 50px
            }

            #team_menu h3 {
                margin: 5px;
                text-align: center
            }

            #team_menu>div {
                padding: 10px;
                overflow-x: hidden;
                overflow-y: auto
            }

            #team_settings {
                position: absolute;
                top: 60px;
                bottom: 40%;
                left: 0;
                right: 60%;
                border-top: 1px solid #000
            }

            #team_log {
                position: absolute;
                top: 60px;
                bottom: 0;
                left: 0;
                right: 60%
            }

            #team_log_actual {
                border: 1px solid #fff;
                position: absolute;
                top: 40px;
                bottom: 10px;
                left: 10px;
                right: 10px;
                overflow-x: hidden;
                overflow-y: auto
            }

            #team_log_actual p {
                margin: 6px 10px;
                cursor: pointer
            }

            #team_log_actual p img.icon {
                height: 20px;
                vertical-align: middle
            }

            #team_players {
                position: absolute;
                top: 60px;
                bottom: 0;
                left: 40%;
                right: 0
            }

            #team_players_inner {
                position: absolute;
                top: 80px;
                bottom: 0;
                left: 0;
                right: 0;
                overflow-x: auto!important
            }

            #team_players .highlight-row {
                border: 2px solid red
            }

            #team_players table {
                width: 100%;
                border: 1px solid #fff;
                border-collapse: collapse
            }

            #team_players th {
                text-align: left
            }

            #team_players td {
                border-top: 1px solid #fff;
                border-bottom: 1px solid #fff;
                padding: 4px
            }

            #team_players table img {
                margin: 2px
            }

            #team_players td code,#team_players td u,.perk-list code,.scoreboard div u {
                background: #000;
                border-radius: 4px;
                font-size: 10pt;
                padding: 2px;
                margin: 2px;
                line-height: 150%;
                text-decoration: none
            }

            .break-any {
                line-break: anywhere
            }

            .perk-list {
                list-style: none
            }

            #item-ui-container {
                pointer-events: none;
                width: 100%;
                position: absolute;
                z-index: 1;
                bottom: 65px;
                display: flex;
                justify-content: center
            }

            #item-ui {
                padding: 8px;
                padding-top: 4px;
                margin: auto
            }

            #item-ui-tip {
                position: relative;
                bottom: -28px;
                z-index: 3;
                padding: 8px;
                max-width: 400px
            }

            #item-ui-inv {
                height: 48px;
                margin-top: 12px
            }

            #item-ui-equip span {
                display: inline-block;
                width: 36px;
                font-size: 8pt;
                text-align: center
            }

            #item-ui-equip .item-ui-item {
                margin-top: 0
            }

            .item-ui-item {
                position: relative;
                width: 32px;
                height: 32px;
                border: 2px inset #aaa;
                display: inline-block;
                background-size: cover;
                vertical-align: middle;
                pointer-events: auto;
                background-color: #aaa;
                transition: width .1s,height .1s,border .1s,background .1s,margin .1s;
                cursor: pointer;
                margin: 6px 0
            }

            .item-ui-item.active {
                width: 40px;
                height: 40px;
                border: 4px inset #8f8;
                background-color: #8f8;
                border-radius: 4px;
                margin: 0
            }

            .item-ui-item.hover {
                border: 2px inset #ff8;
                background-color: #ff8
            }

            .item-ui-item.disable {
                border: 2px inset #666;
                background-color: #666
            }

            .item-ui-item.special {
                border: 2px inset #8ff;
                background-color: #8ff
            }

            .item-ui-item span.count {
                text-align: center;
                position: absolute;
                bottom: 100%;
                font-size: 10pt;
                width: 100%;
                margin-bottom: 4px
            }

            .tip-warning {
                position: absolute;
                z-index: 5;
                color: #ff0;
                font-weight: 700;
                padding: 4px;
                background: rgba(0,0,0,.5);
                border-radius: 4px;
                pointer-events: none
            }

            .tip-list {
                position: absolute;
                z-index: 5;
                color: #fff;
                padding: 4px;
                background: rgba(0,0,0,.5);
                border-radius: 4px;
                pointer-events: none
            }

            .tip-list>div {
                cursor: pointer;
                pointer-events: auto
            }

            .tip-list>div:hover {
                background: #08c
            }

            h2.tiny {
                margin: 0;
                font-size: 12pt
            }

            #drednot-io_300x250,#drednot-io_300x250_2 {
                max-width: 336px;
                max-height: 280px
            }

            #start-menu p {
                margin: 0
            }

            .test-notify {
                background: #ff0;
                color: #000;
                border: 5px dashed red;
                padding-bottom: 5px
            }

            .test-notify h3 {
                text-align: center;
                margin: 5px
            }

            .test-notify p {
                text-align: center;
                margin: 5px;
                font-size: 10pt
            }

            .test-notify ul {
                margin: 0;
                font-size: 10pt
            }

            .test-notify a {
                color: #000
            }

            #motd {
                color: #fff;
                background: rgba(0,0,0,.5);
                min-width: 220px;
                border-radius: 0 0 0 8px;
                pointer-events: auto;
                user-select: text;
                padding: 10px;
                position: absolute;
                top: 0;
                right: 0;
                z-index: 5
            }

            #motd h2 {
                margin: 0;
                text-align: left;
                font-size: 13pt
            }

            #motd-text {
                white-space: pre;
                max-width: 400px;
                max-height: 300px;
                overflow-x: hidden;
                overflow-y: auto;
                white-space: pre-wrap;
                word-wrap: break-word
            }

            #motd-content,#motd-edit {
                margin-top: 10px
            }

            #motd-edit-text {
                width: 400px;
                height: 300px;
                resize: none
            }

            #motd-edit-text,#motd-text {
                font-family: sans-serif;
                font-size: 12pt
            }

            #station-ui .bar {
                border: 1px solid #fff;
                text-align: center;
                padding: 4px;
                border-radius: 2px;
                position: relative
            }

            #station-ui .bar .count {
                background: #000;
                padding: 0 2px;
                border-radius: 4px;
                position: relative;
                z-index: 30;
                font-size: 10pt
            }

            #station-ui .bar .bar-inner {
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0
            }

            #comms-text {
                width: 400px;
                height: 200px;
                border: 1px solid #fff;
                margin: 10px 0;
                overflow-x: hidden;
                overflow-y: auto;
                word-wrap: break-word;
                padding: 4px
            }

            #comms-text p {
                margin: 2px
            }

            #comms-text span {
                border-radius: 2px;
                font-weight: 700
            }

            #comms-text sub {
                font-size: 8pt;
                vertical-align: middle
            }

            #comms-input {
                width: 100%;
                box-sizing: border-box
            }

            .new-ui-container-super {
                position: relative;
                width: 100%;
                height: 100%;
                margin: 0;
                min-width: 380px
            }

            .new-ui-container {
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                display: flex;
                justify-content: center;
                align-items: center
            }

            #new-ui-left {
                justify-content: flex-start
            }

            #new-ui-left .window {
                height: 100%;
                width: 500px;
                margin-left: 50px
            }

            #new-ui-right .window {
                width: 500px
            }

            #new-ui-left iframe {
                border: none;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: #fff
            }

            code.copy-box {
                background: #000;
                padding: 3px;
                user-select: all;
                white-space: nowrap
            }

            code.copy-box.disable {
                color: grey;
                user-select: none
            }

            .warning-text {
                font-weight: 700;
                color: #f44
            }

            .warning-text-2 {
                font-weight: 700;
                color: #000;
                background: #ff0;
                border: 5px dashed red;
                padding: 5px
            }

            .new-ui-container .bar {
                border: 1px solid #fff;
                text-align: center;
                padding: 4px;
                border-radius: 2px;
                position: relative
            }

            .new-ui-container .bar .bar-text {
                background: #000;
                padding: 0 2px;
                border-radius: 4px;
                position: relative;
                z-index: 30;
                font-size: 10pt
            }

            .new-ui-container .bar .bar-inner {
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0
            }

            .control-slider>* {
                vertical-align: middle
            }

            .control-slider>input {
                width: 50%;
                margin-right: 10px
            }

            #notify-top {
                position: absolute;
                top: 0;
                right: 0;
                left: 0
            }

            #notify-top-content {
                position: relative;
                width: 50%;
                margin: 30px auto;
                padding: 0 10px
            }

            #minimap-label {
                padding: 5px
            }

            .item-picker {
                overflow-y: auto;
                display: inline-block;
                position: fixed;
                top: 100px;
                bottom: 100px;
                font-size: 14pt
            }

            .item-picker img,.item-picker span {
                vertical-align: middle
            }

            .item-picker img {
                margin-right: 5px
            }

            .item-picker>div.active {
                background: #008!important
            }

            .item-picker>div:hover {
                background: #222
            }

            .item-picker>* {
                padding: 5px
            }

            .item-picker>div {
                cursor: pointer
            }

            .item-picker .fail {
                font-size: 2em;
                font-weight: 700;
                color: #f44
            }

            #cheat-menu {
                align-self: flex-end
            }

            .color-palette {
                border-collapse: collapse
            }

            .color-palette td {
                width: 20px;
                height: 20px;
                cursor: pointer;
                border: 1px solid #000
            }

            .fmt-txt-img {
                height: 1em;
                vertical-align: middle
            }
        </style>
    </head>
    <body>
        <noscript>
            <div class="browser-warning dark">Warning: Dredark requires javascript to run. It appears to be unsupported or unavailable.
        </div>
        </noscript>
        <div class="browser-warning dark" id="bad-browser" style="display: none;">
            <div id="bad-browser-text" style="display: inline-block;"></div>
            <button onclick="closeBrowserWarning();">Close</button>
        </div>
        <div id="window-container" class="ui-should-hide">
            <div id="ui-container-left" class="new-ui-container-super">
                <div id="chat" class="closed">
                    <div class="close">
                        <button class="btn-red" id="chat-close">Close</button>
                    </div>
                    <h2>Local Ship Chat</h2>
                    <div id="chat-content"></div>
                    <input id="chat-input">
                    <button class="btn-green" id="chat-send">Send</button>
                    <div style="float:right;">
                        <label>
                            <input id="opt_chat_messages" type="checkbox">Hide Messages
                        </label>
                        <label>
                            <input id="opt_chat_bubbles" type="checkbox">Hide Bubbles
                        </label>
                    </div>
                </div>
                <div class="new-ui-container"></div>
                <div id="new-ui-left" class="new-ui-container"></div>
            </div>
            <div id="station-ui" class="window dark center" style="display: none;">
                <div class="close">
                    <button class="btn-red" onclick="closeStationUI();">Close</button>
                </div>
                <h2>Communications</h2>
                <div id="comms-xmits" class="bar">
                    <div class="bar-inner" style="background: rgba(255,255,0,.5);"></div>
                    <span class="count">5 / 5 Transmissions</span>
                </div>
                <div id="comms-text"></div>
                <input id="comms-input">
                <button onclick="sendComms();">Send</button>
            </div>
            <div id="pui" class="window dark center" style="display: none; width: 640px; padding: 0;"></div>
            <div id="scoreboard" class="center" style="display: none; margin-top: 30px; overflow-y: auto;"></div>
            <div id="disconnect-popup" class="window center dark" style="display: none;"></div>
            <div class="new-ui-container-super right">
                <div class="new-ui-container">
                    <div id="partner-info" class="window right dark">
                        <div id="partner-content">
                            <h2>More Games</h2>
                            <ul>
                                <li>
                                    <a target="_blank" rel="noopener noreferrer" href="http://iogames.space/">More IO Games</a>
                                    <sub>(iogames.space)</sub>
                                </li>
                                <li>
                                    <a target="_blank" rel="noopener noreferrer" href="https://www.crazygames.com/c/io">Crazy Games</a>
                                </li>
                                <li>
                                    <a target="_blank" rel="noopener noreferrer" href="http://io-games.zone/">More IO Games</a>
                                    <sub>(io-games.zone)</sub>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="new-ui-right" class="new-ui-container">
                    <div id="cheat-menu" class="dark window" style="display: none;"></div>
                </div>
            </div>
        </div>
        <div id="big-ui-container"></div>
        <div id="team_menu" class="window darker ui-should-hide" style="display: none;"></div>
        <div id="motd" class="dark ui-should-hide" style="display: none;">
            <div class="close">
                <button id="motd-toggle" class="btn-small" onclick="toggleMotd();">Hide</button>
            </div>
            <h2>Team MOTD</h2>
            <div id="motd-content">
                <div id="motd-text"></div>
                <button id="motd-edit-button" style="display: none; margin-top: 10px;" class="btn-blue" onclick="editMotd();">Edit</button>
            </div>
            <div id="motd-edit" style="display: none;">
                <textarea id="motd-edit-text"></textarea>
                <br>
                <button class="btn-green" onclick="saveMotd(true);">Save</button>
                <button class="btn-red" onclick="saveMotd(false);">Discard</button>
            </div>
        </div>
        <div id="game-container">
            <canvas id="canvas-game"></canvas>
        </div>
        <div id="item-ui-container" class="ui-should-hide"></div>
        <div id="notify-top" style="display: none;" class="ui-should-hide">
            <div id="notify-top-content" class="dark">
                <div class="close">
                    <button class="btn-red" onclick="closeNotifyTop();">Close</button>
                </div>
                <p style="margin-top: 40px;"></p>
            </div>
        </div>
        <div id="content-bottom" class="ui-should-hide">
            <div class="button-container">
                <button id="map_button" onclick="toggleUI('map');" class="btn-small" style="display: none;">
                    <i class="fas fa-map"></i>
                    Map
                </button>
                <button onclick="toggleUI('help');" class="btn-green btn-small">
                    <i class="far fa-question-circle"></i>
                    Help
                </button>
                <button onclick="toggleUI('quickstart');" class="btn-green btn-small">
                    <i class="fas fa-forward"></i>
                    Quick Start
                </button>
                <button onclick="toggleUI('settings');" class="btn-yellow btn-small last-left">
                    <i class="fas fa-tools"></i>
                    Settings
                </button>
                <button id="cheat_menu_button" onclick="teamAct('toggle_cheat_ui');" class="btn-small" style="display: none;">
                    <i class="fas fa-magic"></i>
                    Cheat Menu
                </button>
                <button id="team_manager_button" onclick="teamAct('toggle_ui');" class="btn-blue btn-small" style="display: none;">
                    <i class="fa fa-cogs"></i>
                    Manage Ship
                </button>
                <button id="exit_button" onclick="returnToMenu();" class="btn-red btn-small" style="display: none;">
                    <i class="fas fa-door-open"></i>
                    Exit Ship
                </button>
            </div>
            <div class="center-container-h">
                <div id="bottom-bar" class="dark">
                    <a target="_blank" href="/changelog.html">
                        Version <span id="version">ℵ59+</span>
                    </a>
                    &nbsp;•&nbsp;
                    <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/DredarkOnline">
                        <i class="fab big-icon fa-twitter"></i>
                        <div class="tooltip dark">@DredarkOnline</div>
                    </a>
                    <a target="_blank" rel="noopener noreferrer" href="https://discord.gg/bZF4myU">
                        <i class="fab big-icon fa-discord"></i>
                        <div class="tooltip dark">Official Discord Chat</div>
                    </a>
                    <a target="_blank" rel="noopener noreferrer" href="https://github.com/birdbrainswagtrain/dredark/issues">
                        <i class="fas big-icon fa-bug"></i>
                        <div class="tooltip dark">Issue Tracker</div>
                    </a>
                    <a target="_blank" rel="noopener noreferrer" href="https://www.reddit.com/r/dredark/">
                        <i class="fab big-icon fa-reddit-alien"></i>
                        <div class="tooltip dark">/r/dredark</div>
                    </a>
                    <a target="_blank" rel="noopener noreferrer" href="https://drednotio.fandom.com/wiki/Drednot.io_Wiki">
                        <i class="fas big-icon white fa-atlas"></i>
                        <div class="tooltip dark">Unofficial Wiki</div>
                    </a>
                    &nbsp;•&nbsp;<a href="mailto:adam@cogg.rocks">Contact (Email)</a>
                    &nbsp;•&nbsp;<a target="_blank" href="/terms.html">Terms</a>
                    &nbsp;•&nbsp;<a target="_blank" href="/privacy.html">Privacy</a>
                    [
                
                    <span id="nitro-consent" style="display:none">
                        <a href="javascript:window.__cmp('showModal');">Update Cookie Preferences
                    </a>
                    </span>
                    <span data-ccpa-link="1"></span>
                    ]
                &nbsp;•&nbsp;<a target="_blank" href="/advertising.html">Advertising</a>
                    &nbsp;•&nbsp;© 2021 Adam Coggeshall (<a target="_blank" href="/credits.txt">Credits</a>
                    )
            
                </div>
            </div>
        </div>
        <script>
            /*
        RequireJS 2.3.6 Copyright jQuery Foundation and other contributors.
        Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE */
            var requirejs, require, define;
            !function(global, setTimeout) {
                var req, s, head, baseElement, dataMain, src, interactiveScript, currentlyAddingScript, mainScript, subPath, version = "2.3.6", commentRegExp = /\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm, cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g, jsSuffixRegExp = /\.js$/, currDirRegExp = /^\.\//, op = Object.prototype, ostring = op.toString, hasOwn = op.hasOwnProperty, isBrowser = !("undefined" == typeof window || "undefined" == typeof navigator || !window.document), isWebWorker = !isBrowser && "undefined" != typeof importScripts, readyRegExp = isBrowser && "PLAYSTATION 3" === navigator.platform ? /^complete$/ : /^(complete|loaded)$/, defContextName = "_", isOpera = "undefined" != typeof opera && "[object Opera]" === opera.toString(), contexts = {}, cfg = {}, globalDefQueue = [], useInteractive = !1;
                function commentReplace(e, t) {
                    return t || ""
                }
                function isFunction(e) {
                    return "[object Function]" === ostring.call(e)
                }
                function isArray(e) {
                    return "[object Array]" === ostring.call(e)
                }
                function each(e, t) {
                    var i;
                    if (e)
                        for (i = 0; i < e.length && (!e[i] || !t(e[i], i, e)); i += 1)
                            ;
                }
                function eachReverse(e, t) {
                    var i;
                    if (e)
                        for (i = e.length - 1; -1 < i && (!e[i] || !t(e[i], i, e)); i -= 1)
                            ;
                }
                function hasProp(e, t) {
                    return hasOwn.call(e, t)
                }
                function getOwn(e, t) {
                    return hasProp(e, t) && e[t]
                }
                function eachProp(e, t) {
                    var i;
                    for (i in e)
                        if (hasProp(e, i) && t(e[i], i))
                            break
                }
                function mixin(i, e, r, n) {
                    return e && eachProp(e, function(e, t) {
                        !r && hasProp(i, t) || (!n || "object" != typeof e || !e || isArray(e) || isFunction(e) || e instanceof RegExp ? i[t] = e : (i[t] || (i[t] = {}),
                        mixin(i[t], e, r, n)))
                    }),
                    i
                }
                function bind(e, t) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                }
                function scripts() {
                    return document.getElementsByTagName("script")
                }
                function defaultOnError(e) {
                    throw e
                }
                function getGlobal(e) {
                    if (!e)
                        return e;
                    var t = global;
                    return each(e.split("."), function(e) {
                        t = t[e]
                    }),
                    t
                }
                function makeError(e, t, i, r) {
                    var n = new Error(t + "\nhttps://requirejs.org/docs/errors.html#" + e);
                    return n.requireType = e,
                    n.requireModules = r,
                    i && (n.originalError = i),
                    n
                }
                if (void 0 === define) {
                    if (void 0 !== requirejs) {
                        if (isFunction(requirejs))
                            return;
                        cfg = requirejs,
                        requirejs = void 0
                    }
                    void 0 === require || isFunction(require) || (cfg = require,
                    require = void 0),
                    req = requirejs = function(e, t, i, r) {
                        var n, o, a = defContextName;
                        return isArray(e) || "string" == typeof e || (o = e,
                        isArray(t) ? (e = t,
                        t = i,
                        i = r) : e = []),
                        o && o.context && (a = o.context),
                        (n = getOwn(contexts, a)) || (n = contexts[a] = req.s.newContext(a)),
                        o && n.configure(o),
                        n.require(e, t, i)
                    }
                    ,
                    req.config = function(e) {
                        return req(e)
                    }
                    ,
                    req.nextTick = void 0 !== setTimeout ? function(e) {
                        setTimeout(e, 4)
                    }
                    : function(e) {
                        e()
                    }
                    ,
                    require || (require = req),
                    req.version = version,
                    req.jsExtRegExp = /^\/|:|\?|\.js$/,
                    req.isBrowser = isBrowser,
                    s = req.s = {
                        contexts: contexts,
                        newContext: newContext
                    },
                    req({}),
                    each(["toUrl", "undef", "defined", "specified"], function(t) {
                        req[t] = function() {
                            var e = contexts[defContextName];
                            return e.require[t].apply(e, arguments)
                        }
                    }),
                    isBrowser && (head = s.head = document.getElementsByTagName("head")[0],
                    baseElement = document.getElementsByTagName("base")[0],
                    baseElement && (head = s.head = baseElement.parentNode)),
                    req.onError = defaultOnError,
                    req.createNode = function(e, t, i) {
                        var r = e.xhtml ? document.createElementNS("http://www.w3.org/1999/xhtml", "html:script") : document.createElement("script");
                        return r.type = e.scriptType || "text/javascript",
                        r.charset = "utf-8",
                        r.async = !0,
                        r
                    }
                    ,
                    req.load = function(t, i, r) {
                        var e, n = t && t.config || {};
                        if (isBrowser)
                            return (e = req.createNode(n, i, r)).setAttribute("data-requirecontext", t.contextName),
                            e.setAttribute("data-requiremodule", i),
                            !e.attachEvent || e.attachEvent.toString && e.attachEvent.toString().indexOf("[native code") < 0 || isOpera ? (e.addEventListener("load", t.onScriptLoad, !1),
                            e.addEventListener("error", t.onScriptError, !1)) : (useInteractive = !0,
                            e.attachEvent("onreadystatechange", t.onScriptLoad)),
                            e.src = r,
                            n.onNodeCreated && n.onNodeCreated(e, n, i, r),
                            currentlyAddingScript = e,
                            baseElement ? head.insertBefore(e, baseElement) : head.appendChild(e),
                            currentlyAddingScript = null,
                            e;
                        if (isWebWorker)
                            try {
                                setTimeout(function() {}, 0),
                                importScripts(r),
                                t.completeLoad(i)
                            } catch (e) {
                                t.onError(makeError("importscripts", "importScripts failed for " + i + " at " + r, e, [i]))
                            }
                    }
                    ,
                    isBrowser && !cfg.skipDataMain && eachReverse(scripts(), function(e) {
                        if (head || (head = e.parentNode),
                        dataMain = e.getAttribute("data-main"))
                            return mainScript = dataMain,
                            cfg.baseUrl || -1 !== mainScript.indexOf("!") || (mainScript = (src = mainScript.split("/")).pop(),
                            subPath = src.length ? src.join("/") + "/" : "./",
                            cfg.baseUrl = subPath),
                            mainScript = mainScript.replace(jsSuffixRegExp, ""),
                            req.jsExtRegExp.test(mainScript) && (mainScript = dataMain),
                            cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript],
                            !0
                    }),
                    define = function(e, i, t) {
                        var r, n;
                        "string" != typeof e && (t = i,
                        i = e,
                        e = null),
                        isArray(i) || (t = i,
                        i = null),
                        !i && isFunction(t) && (i = [],
                        t.length && (t.toString().replace(commentRegExp, commentReplace).replace(cjsRequireRegExp, function(e, t) {
                            i.push(t)
                        }),
                        i = (1 === t.length ? ["require"] : ["require", "exports", "module"]).concat(i))),
                        useInteractive && (r = currentlyAddingScript || getInteractiveScript()) && (e || (e = r.getAttribute("data-requiremodule")),
                        n = contexts[r.getAttribute("data-requirecontext")]),
                        n ? (n.defQueue.push([e, i, t]),
                        n.defQueueMap[e] = !0) : globalDefQueue.push([e, i, t])
                    }
                    ,
                    define.amd = {
                        jQuery: !0
                    },
                    req.exec = function(text) {
                        return eval(text)
                    }
                    ,
                    req(cfg)
                }
                function newContext(u) {
                    var i, e, l, c, d, g = {
                        waitSeconds: 7,
                        baseUrl: "./",
                        paths: {},
                        bundles: {},
                        pkgs: {},
                        shim: {},
                        config: {}
                    }, p = {}, f = {}, r = {}, h = [], m = {}, n = {}, v = {}, x = 1, b = 1;
                    function q(e, t, i) {
                        var r, n, o, a, s, u, c, d, p, f, l = t && t.split("/"), h = g.map, m = h && h["*"];
                        if (e && (u = (e = e.split("/")).length - 1,
                        g.nodeIdCompat && jsSuffixRegExp.test(e[u]) && (e[u] = e[u].replace(jsSuffixRegExp, "")),
                        "." === e[0].charAt(0) && l && (e = l.slice(0, l.length - 1).concat(e)),
                        function(e) {
                            var t, i;
                            for (t = 0; t < e.length; t++)
                                if ("." === (i = e[t]))
                                    e.splice(t, 1),
                                    t -= 1;
                                else if (".." === i) {
                                    if (0 === t || 1 === t && ".." === e[2] || ".." === e[t - 1])
                                        continue;
                                    0 < t && (e.splice(t - 1, 2),
                                    t -= 2)
                                }
                        }(e),
                        e = e.join("/")),
                        i && h && (l || m)) {
                            e: for (o = (n = e.split("/")).length; 0 < o; o -= 1) {
                                if (s = n.slice(0, o).join("/"),
                                l)
                                    for (a = l.length; 0 < a; a -= 1)
                                        if ((r = getOwn(h, l.slice(0, a).join("/"))) && (r = getOwn(r, s))) {
                                            c = r,
                                            d = o;
                                            break e
                                        }
                                !p && m && getOwn(m, s) && (p = getOwn(m, s),
                                f = o)
                            }
                            !c && p && (c = p,
                            d = f),
                            c && (n.splice(0, d, c),
                            e = n.join("/"))
                        }
                        return getOwn(g.pkgs, e) || e
                    }
                    function E(t) {
                        isBrowser && each(scripts(), function(e) {
                            if (e.getAttribute("data-requiremodule") === t && e.getAttribute("data-requirecontext") === l.contextName)
                                return e.parentNode.removeChild(e),
                                !0
                        })
                    }
                    function w(e) {
                        var t = getOwn(g.paths, e);
                        if (t && isArray(t) && 1 < t.length)
                            return t.shift(),
                            l.require.undef(e),
                            l.makeRequire(null, {
                                skipMap: !0
                            })([e]),
                            !0
                    }
                    function y(e) {
                        var t, i = e ? e.indexOf("!") : -1;
                        return -1 < i && (t = e.substring(0, i),
                        e = e.substring(i + 1, e.length)),
                        [t, e]
                    }
                    function S(e, t, i, r) {
                        var n, o, a, s, u = null, c = t ? t.name : null, d = e, p = !0, f = "";
                        return e || (p = !1,
                        e = "_@r" + (x += 1)),
                        u = (s = y(e))[0],
                        e = s[1],
                        u && (u = q(u, c, r),
                        o = getOwn(m, u)),
                        e && (u ? f = i ? e : o && o.normalize ? o.normalize(e, function(e) {
                            return q(e, c, r)
                        }) : -1 === e.indexOf("!") ? q(e, c, r) : e : (u = (s = y(f = q(e, c, r)))[0],
                        f = s[1],
                        i = !0,
                        n = l.nameToUrl(f))),
                        {
                            prefix: u,
                            name: f,
                            parentMap: t,
                            unnormalized: !!(a = !u || o || i ? "" : "_unnormalized" + (b += 1)),
                            url: n,
                            originalName: d,
                            isDefine: p,
                            id: (u ? u + "!" + f : f) + a
                        }
                    }
                    function k(e) {
                        var t = e.id
                          , i = getOwn(p, t);
                        return i || (i = p[t] = new l.Module(e)),
                        i
                    }
                    function M(e, t, i) {
                        var r = e.id
                          , n = getOwn(p, r);
                        !hasProp(m, r) || n && !n.defineEmitComplete ? (n = k(e)).error && "error" === t ? i(n.error) : n.on(t, i) : "defined" === t && i(m[r])
                    }
                    function O(i, e) {
                        var t = i.requireModules
                          , r = !1;
                        e ? e(i) : (each(t, function(e) {
                            var t = getOwn(p, e);
                            t && (t.error = i,
                            t.events.error && (r = !0,
                            t.emit("error", i)))
                        }),
                        r || req.onError(i))
                    }
                    function j() {
                        globalDefQueue.length && (each(globalDefQueue, function(e) {
                            var t = e[0];
                            "string" == typeof t && (l.defQueueMap[t] = !0),
                            h.push(e)
                        }),
                        globalDefQueue = [])
                    }
                    function P(e) {
                        delete p[e],
                        delete f[e]
                    }
                    function R() {
                        var e, r, t = 1e3 * g.waitSeconds, n = t && l.startTime + t < (new Date).getTime(), o = [], a = [], s = !1, u = !0;
                        if (!i) {
                            if (i = !0,
                            eachProp(f, function(e) {
                                var t = e.map
                                  , i = t.id;
                                if (e.enabled && (t.isDefine || a.push(e),
                                !e.error))
                                    if (!e.inited && n)
                                        w(i) ? s = r = !0 : (o.push(i),
                                        E(i));
                                    else if (!e.inited && e.fetched && t.isDefine && (s = !0,
                                    !t.prefix))
                                        return u = !1
                            }),
                            n && o.length)
                                return (e = makeError("timeout", "Load timeout for modules: " + o, null, o)).contextName = l.contextName,
                                O(e);
                            u && each(a, function(e) {
                                !function n(o, a, s) {
                                    var e = o.map.id;
                                    o.error ? o.emit("error", o.error) : (a[e] = !0,
                                    each(o.depMaps, function(e, t) {
                                        var i = e.id
                                          , r = getOwn(p, i);
                                        !r || o.depMatched[t] || s[i] || (getOwn(a, i) ? (o.defineDep(t, m[i]),
                                        o.check()) : n(r, a, s))
                                    }),
                                    s[e] = !0)
                                }(e, {}, {})
                            }),
                            n && !r || !s || !isBrowser && !isWebWorker || d || (d = setTimeout(function() {
                                d = 0,
                                R()
                            }, 50)),
                            i = !1
                        }
                    }
                    function a(e) {
                        hasProp(m, e[0]) || k(S(e[0], null, !0)).init(e[1], e[2])
                    }
                    function o(e, t, i, r) {
                        e.detachEvent && !isOpera ? r && e.detachEvent(r, t) : e.removeEventListener(i, t, !1)
                    }
                    function s(e) {
                        var t = e.currentTarget || e.srcElement;
                        return o(t, l.onScriptLoad, "load", "onreadystatechange"),
                        o(t, l.onScriptError, "error"),
                        {
                            node: t,
                            id: t && t.getAttribute("data-requiremodule")
                        }
                    }
                    function T() {
                        var e;
                        for (j(); h.length; ) {
                            if (null === (e = h.shift())[0])
                                return O(makeError("mismatch", "Mismatched anonymous define() module: " + e[e.length - 1]));
                            a(e)
                        }
                        l.defQueueMap = {}
                    }
                    return c = {
                        require: function(e) {
                            return e.require ? e.require : e.require = l.makeRequire(e.map)
                        },
                        exports: function(e) {
                            if (e.usingExports = !0,
                            e.map.isDefine)
                                return e.exports ? m[e.map.id] = e.exports : e.exports = m[e.map.id] = {}
                        },
                        module: function(e) {
                            return e.module ? e.module : e.module = {
                                id: e.map.id,
                                uri: e.map.url,
                                config: function() {
                                    return getOwn(g.config, e.map.id) || {}
                                },
                                exports: e.exports || (e.exports = {})
                            }
                        }
                    },
                    (e = function(e) {
                        this.events = getOwn(r, e.id) || {},
                        this.map = e,
                        this.shim = getOwn(g.shim, e.id),
                        this.depExports = [],
                        this.depMaps = [],
                        this.depMatched = [],
                        this.pluginMaps = {},
                        this.depCount = 0
                    }
                    ).prototype = {
                        init: function(e, t, i, r) {
                            r = r || {},
                            this.inited || (this.factory = t,
                            i ? this.on("error", i) : this.events.error && (i = bind(this, function(e) {
                                this.emit("error", e)
                            })),
                            this.depMaps = e && e.slice(0),
                            this.errback = i,
                            this.inited = !0,
                            this.ignore = r.ignore,
                            r.enabled || this.enabled ? this.enable() : this.check())
                        },
                        defineDep: function(e, t) {
                            this.depMatched[e] || (this.depMatched[e] = !0,
                            this.depCount -= 1,
                            this.depExports[e] = t)
                        },
                        fetch: function() {
                            if (!this.fetched) {
                                this.fetched = !0,
                                l.startTime = (new Date).getTime();
                                var e = this.map;
                                if (!this.shim)
                                    return e.prefix ? this.callPlugin() : this.load();
                                l.makeRequire(this.map, {
                                    enableBuildCallback: !0
                                })(this.shim.deps || [], bind(this, function() {
                                    return e.prefix ? this.callPlugin() : this.load()
                                }))
                            }
                        },
                        load: function() {
                            var e = this.map.url;
                            n[e] || (n[e] = !0,
                            l.load(this.map.id, e))
                        },
                        check: function() {
                            if (this.enabled && !this.enabling) {
                                var t, e, i = this.map.id, r = this.depExports, n = this.exports, o = this.factory;
                                if (this.inited) {
                                    if (this.error)
                                        this.emit("error", this.error);
                                    else if (!this.defining) {
                                        if (this.defining = !0,
                                        this.depCount < 1 && !this.defined) {
                                            if (isFunction(o)) {
                                                if (this.events.error && this.map.isDefine || req.onError !== defaultOnError)
                                                    try {
                                                        n = l.execCb(i, o, r, n)
                                                    } catch (e) {
                                                        t = e
                                                    }
                                                else
                                                    n = l.execCb(i, o, r, n);
                                                if (this.map.isDefine && void 0 === n && ((e = this.module) ? n = e.exports : this.usingExports && (n = this.exports)),
                                                t)
                                                    return t.requireMap = this.map,
                                                    t.requireModules = this.map.isDefine ? [this.map.id] : null,
                                                    t.requireType = this.map.isDefine ? "define" : "require",
                                                    O(this.error = t)
                                            } else
                                                n = o;
                                            if (this.exports = n,
                                            this.map.isDefine && !this.ignore && (m[i] = n,
                                            req.onResourceLoad)) {
                                                var a = [];
                                                each(this.depMaps, function(e) {
                                                    a.push(e.normalizedMap || e)
                                                }),
                                                req.onResourceLoad(l, this.map, a)
                                            }
                                            P(i),
                                            this.defined = !0
                                        }
                                        this.defining = !1,
                                        this.defined && !this.defineEmitted && (this.defineEmitted = !0,
                                        this.emit("defined", this.exports),
                                        this.defineEmitComplete = !0)
                                    }
                                } else
                                    hasProp(l.defQueueMap, i) || this.fetch()
                            }
                        },
                        callPlugin: function() {
                            var u = this.map
                              , c = u.id
                              , e = S(u.prefix);
                            this.depMaps.push(e),
                            M(e, "defined", bind(this, function(e) {
                                var o, t, i, r = getOwn(v, this.map.id), n = this.map.name, a = this.map.parentMap ? this.map.parentMap.name : null, s = l.makeRequire(u.parentMap, {
                                    enableBuildCallback: !0
                                });
                                return this.map.unnormalized ? (e.normalize && (n = e.normalize(n, function(e) {
                                    return q(e, a, !0)
                                }) || ""),
                                M(t = S(u.prefix + "!" + n, this.map.parentMap, !0), "defined", bind(this, function(e) {
                                    this.map.normalizedMap = t,
                                    this.init([], function() {
                                        return e
                                    }, null, {
                                        enabled: !0,
                                        ignore: !0
                                    })
                                })),
                                void ((i = getOwn(p, t.id)) && (this.depMaps.push(t),
                                this.events.error && i.on("error", bind(this, function(e) {
                                    this.emit("error", e)
                                })),
                                i.enable()))) : r ? (this.map.url = l.nameToUrl(r),
                                void this.load()) : ((o = bind(this, function(e) {
                                    this.init([], function() {
                                        return e
                                    }, null, {
                                        enabled: !0
                                    })
                                })).error = bind(this, function(e) {
                                    this.inited = !0,
                                    (this.error = e).requireModules = [c],
                                    eachProp(p, function(e) {
                                        0 === e.map.id.indexOf(c + "_unnormalized") && P(e.map.id)
                                    }),
                                    O(e)
                                }),
                                o.fromText = bind(this, function(e, t) {
                                    var i = u.name
                                      , r = S(i)
                                      , n = useInteractive;
                                    t && (e = t),
                                    n && (useInteractive = !1),
                                    k(r),
                                    hasProp(g.config, c) && (g.config[i] = g.config[c]);
                                    try {
                                        req.exec(e)
                                    } catch (e) {
                                        return O(makeError("fromtexteval", "fromText eval for " + c + " failed: " + e, e, [c]))
                                    }
                                    n && (useInteractive = !0),
                                    this.depMaps.push(r),
                                    l.completeLoad(i),
                                    s([i], o)
                                }),
                                void e.load(u.name, s, o, g))
                            })),
                            l.enable(e, this),
                            this.pluginMaps[e.id] = e
                        },
                        enable: function() {
                            (f[this.map.id] = this).enabled = !0,
                            this.enabling = !0,
                            each(this.depMaps, bind(this, function(e, t) {
                                var i, r, n;
                                if ("string" == typeof e) {
                                    if (e = S(e, this.map.isDefine ? this.map : this.map.parentMap, !1, !this.skipMap),
                                    this.depMaps[t] = e,
                                    n = getOwn(c, e.id))
                                        return void (this.depExports[t] = n(this));
                                    this.depCount += 1,
                                    M(e, "defined", bind(this, function(e) {
                                        this.undefed || (this.defineDep(t, e),
                                        this.check())
                                    })),
                                    this.errback ? M(e, "error", bind(this, this.errback)) : this.events.error && M(e, "error", bind(this, function(e) {
                                        this.emit("error", e)
                                    }))
                                }
                                i = e.id,
                                r = p[i],
                                hasProp(c, i) || !r || r.enabled || l.enable(e, this)
                            })),
                            eachProp(this.pluginMaps, bind(this, function(e) {
                                var t = getOwn(p, e.id);
                                t && !t.enabled && l.enable(e, this)
                            })),
                            this.enabling = !1,
                            this.check()
                        },
                        on: function(e, t) {
                            var i = this.events[e];
                            i || (i = this.events[e] = []),
                            i.push(t)
                        },
                        emit: function(e, t) {
                            each(this.events[e], function(e) {
                                e(t)
                            }),
                            "error" === e && delete this.events[e]
                        }
                    },
                    (l = {
                        config: g,
                        contextName: u,
                        registry: p,
                        defined: m,
                        urlFetched: n,
                        defQueue: h,
                        defQueueMap: {},
                        Module: e,
                        makeModuleMap: S,
                        nextTick: req.nextTick,
                        onError: O,
                        configure: function(e) {
                            if (e.baseUrl && "/" !== e.baseUrl.charAt(e.baseUrl.length - 1) && (e.baseUrl += "/"),
                            "string" == typeof e.urlArgs) {
                                var i = e.urlArgs;
                                e.urlArgs = function(e, t) {
                                    return (-1 === t.indexOf("?") ? "?" : "&") + i
                                }
                            }
                            var r = g.shim
                              , n = {
                                paths: !0,
                                bundles: !0,
                                config: !0,
                                map: !0
                            };
                            eachProp(e, function(e, t) {
                                n[t] ? (g[t] || (g[t] = {}),
                                mixin(g[t], e, !0, !0)) : g[t] = e
                            }),
                            e.bundles && eachProp(e.bundles, function(e, t) {
                                each(e, function(e) {
                                    e !== t && (v[e] = t)
                                })
                            }),
                            e.shim && (eachProp(e.shim, function(e, t) {
                                isArray(e) && (e = {
                                    deps: e
                                }),
                                !e.exports && !e.init || e.exportsFn || (e.exportsFn = l.makeShimExports(e)),
                                r[t] = e
                            }),
                            g.shim = r),
                            e.packages && each(e.packages, function(e) {
                                var t;
                                t = (e = "string" == typeof e ? {
                                    name: e
                                } : e).name,
                                e.location && (g.paths[t] = e.location),
                                g.pkgs[t] = e.name + "/" + (e.main || "main").replace(currDirRegExp, "").replace(jsSuffixRegExp, "")
                            }),
                            eachProp(p, function(e, t) {
                                e.inited || e.map.unnormalized || (e.map = S(t, null, !0))
                            }),
                            (e.deps || e.callback) && l.require(e.deps || [], e.callback)
                        },
                        makeShimExports: function(t) {
                            return function() {
                                var e;
                                return t.init && (e = t.init.apply(global, arguments)),
                                e || t.exports && getGlobal(t.exports)
                            }
                        },
                        makeRequire: function(o, a) {
                            function s(e, t, i) {
                                var r, n;
                                return a.enableBuildCallback && t && isFunction(t) && (t.__requireJsBuild = !0),
                                "string" == typeof e ? isFunction(t) ? O(makeError("requireargs", "Invalid require call"), i) : o && hasProp(c, e) ? c[e](p[o.id]) : req.get ? req.get(l, e, o, s) : (r = S(e, o, !1, !0).id,
                                hasProp(m, r) ? m[r] : O(makeError("notloaded", 'Module name "' + r + '" has not been loaded yet for context: ' + u + (o ? "" : ". Use require([])")))) : (T(),
                                l.nextTick(function() {
                                    T(),
                                    (n = k(S(null, o))).skipMap = a.skipMap,
                                    n.init(e, t, i, {
                                        enabled: !0
                                    }),
                                    R()
                                }),
                                s)
                            }
                            return a = a || {},
                            mixin(s, {
                                isBrowser: isBrowser,
                                toUrl: function(e) {
                                    var t, i = e.lastIndexOf("."), r = e.split("/")[0];
                                    return -1 !== i && (!("." === r || ".." === r) || 1 < i) && (t = e.substring(i, e.length),
                                    e = e.substring(0, i)),
                                    l.nameToUrl(q(e, o && o.id, !0), t, !0)
                                },
                                defined: function(e) {
                                    return hasProp(m, S(e, o, !1, !0).id)
                                },
                                specified: function(e) {
                                    return e = S(e, o, !1, !0).id,
                                    hasProp(m, e) || hasProp(p, e)
                                }
                            }),
                            o || (s.undef = function(i) {
                                j();
                                var e = S(i, o, !0)
                                  , t = getOwn(p, i);
                                t.undefed = !0,
                                E(i),
                                delete m[i],
                                delete n[e.url],
                                delete r[i],
                                eachReverse(h, function(e, t) {
                                    e[0] === i && h.splice(t, 1)
                                }),
                                delete l.defQueueMap[i],
                                t && (t.events.defined && (r[i] = t.events),
                                P(i))
                            }
                            ),
                            s
                        },
                        enable: function(e) {
                            getOwn(p, e.id) && k(e).enable()
                        },
                        completeLoad: function(e) {
                            var t, i, r, n = getOwn(g.shim, e) || {}, o = n.exports;
                            for (j(); h.length; ) {
                                if (null === (i = h.shift())[0]) {
                                    if (i[0] = e,
                                    t)
                                        break;
                                    t = !0
                                } else
                                    i[0] === e && (t = !0);
                                a(i)
                            }
                            if (l.defQueueMap = {},
                            r = getOwn(p, e),
                            !t && !hasProp(m, e) && r && !r.inited) {
                                if (!(!g.enforceDefine || o && getGlobal(o)))
                                    return w(e) ? void 0 : O(makeError("nodefine", "No define call for " + e, null, [e]));
                                a([e, n.deps || [], n.exportsFn])
                            }
                            R()
                        },
                        nameToUrl: function(e, t, i) {
                            var r, n, o, a, s, u, c = getOwn(g.pkgs, e);
                            if (c && (e = c),
                            u = getOwn(v, e))
                                return l.nameToUrl(u, t, i);
                            if (req.jsExtRegExp.test(e))
                                a = e + (t || "");
                            else {
                                for (r = g.paths,
                                o = (n = e.split("/")).length; 0 < o; o -= 1)
                                    if (s = getOwn(r, n.slice(0, o).join("/"))) {
                                        isArray(s) && (s = s[0]),
                                        n.splice(0, o, s);
                                        break
                                    }
                                a = n.join("/"),
                                a = ("/" === (a += t || (/^data\:|^blob\:|\?/.test(a) || i ? "" : ".js")).charAt(0) || a.match(/^[\w\+\.\-]+:/) ? "" : g.baseUrl) + a
                            }
                            return g.urlArgs && !/^blob\:/.test(a) ? a + g.urlArgs(e, a) : a
                        },
                        load: function(e, t) {
                            req.load(l, e, t)
                        },
                        execCb: function(e, t, i, r) {
                            return t.apply(r, i)
                        },
                        onScriptLoad: function(e) {
                            if ("load" === e.type || readyRegExp.test((e.currentTarget || e.srcElement).readyState)) {
                                interactiveScript = null;
                                var t = s(e);
                                l.completeLoad(t.id)
                            }
                        },
                        onScriptError: function(e) {
                            var i = s(e);
                            if (!w(i.id)) {
                                var r = [];
                                return eachProp(p, function(e, t) {
                                    0 !== t.indexOf("_@r") && each(e.depMaps, function(e) {
                                        if (e.id === i.id)
                                            return r.push(t),
                                            !0
                                    })
                                }),
                                O(makeError("scripterror", 'Script error for "' + i.id + (r.length ? '", needed by: ' + r.join(", ") : '"'), e, [i.id]))
                            }
                        }
                    }).require = l.makeRequire(),
                    l
                }
                function getInteractiveScript() {
                    return interactiveScript && "interactive" === interactiveScript.readyState || eachReverse(scripts(), function(e) {
                        if ("interactive" === e.readyState)
                            return interactiveScript = e
                    }),
                    interactiveScript
                }
            }(this, "undefined" == typeof setTimeout ? void 0 : setTimeout);
        </script>
        <script>
            define("x/cl_main.jtTqS33A2NRINMaxpdTG", ["require", "exports"], (function(e, t) {
                "use strict";
                var n = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
                function o(e) {
                    return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e
                }
                function i(e) {
                    if (e.__esModule)
                        return e;
                    var t = Object.defineProperty({}, "__esModule", {
                        value: !0
                    });
                    return Object.keys(e).forEach((function(n) {
                        var o = Object.getOwnPropertyDescriptor(e, n);
                        Object.defineProperty(t, n, o.get ? o : {
                            enumerable: !0,
                            get: function() {
                                return e[n]
                            }
                        })
                    }
                    )),
                    t
                }
                function r(e) {
                    var t = {
                        exports: {}
                    };
                    return e(t, t.exports),
                    t.exports
                }
                var l = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.setupErrorLogging = void 0;
                    let n = []
                      , o = 0
                      , i = null;
                    t.setupErrorLogging = function() {
                        let e = t=>{
                            if (o++,
                            o > 32)
                                return void window.removeEventListener("error", e);
                            let r, l = t.error;
                            l instanceof Error ? r = {
                                msg: l.message,
                                stack: l.stack
                            } : null != l && (r = {
                                unknown: l
                            }),
                            null != r && (n.push(r),
                            null == i && (i = setTimeout((()=>{
                                fetch("/error_report", {
                                    body: JSON.stringify(n),
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    method: "POST"
                                }),
                                n.length = 0,
                                i = null
                            }
                            ), 100)))
                        }
                        ;
                        window.addEventListener("error", e)
                    }
                }
                ))
                  , a = i(Object.freeze({
                    __proto__: null,
                    default: "/x/asset.61500qM9vsBobsvPJt1.wasm"
                }))
                  , s = async function(t) {
                    let n = new Promise((function(t, n) {
                        e(["./metallark.jtTqS33A2NRINMaxpdTG"], t, n)
                    }
                    ))
                      , o = a.default
                      , i = fetch(o)
                      , r = await n;
                    return await r.default(i),
                    t(r),
                    r.launch_background_workers(),
                    await new Promise((function(t, n) {
                        e(["./cl_game.jtTqS33A2NRINMaxpdTG"], t, n)
                    }
                    )).then((function(e) {
                        return e.cl_game
                    }
                    ))
                }
                  , c = i(Object.freeze({
                    __proto__: null
                }))
                  , u = r((function(e, t) {
                    function n(e) {
                        t.cl_module = e,
                        t.sv_module = e
                    }
                    t.setup_cl = async function() {
                        let e = s;
                        return await e(n)
                    }
                    ,
                    t.setup_sv = function() {
                        n(c)
                    }
                }
                ))
                  , h = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.RUN_ON_CLIENT = void 0,
                    t.RUN_ON_CLIENT = function(e, t) {
                        return "undefined" != typeof window ? e() : null != t ? t() : null
                    }
                }
                ));
                r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.rescale_windows = void 0;
                    let n = h.RUN_ON_CLIENT((()=>document.getElementById("window-container")));
                    function o() {
                        n.style.transform = "";
                        let e = n.scrollWidth
                          , t = window.innerWidth;
                        e > t && (n.style.transform = "scale(" + t / e + ")")
                    }
                    t.rescale_windows = o,
                    h.RUN_ON_CLIENT((()=>{
                        o(),
                        window.addEventListener("resize", o)
                    }
                    ))
                }
                ));
                var d = r((function(e, t) {
                    var n, o, i, r, l, a, s, c, u;
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.EquipmentSlot = t.BlockShapes = t.OverworldBlockTypes = t.SubworldBlockTypes = t.DropReason = t.ZoneDanger = t.TeamPrivacy = t.TeamRank = t.GameRank = t.COMMS_BUBBLE_TIME = t.DEBUG_BLOCK_SAVES = t.DEFAULT_BG_COLOR = t.MAX_LAUNCHER_POWER = t.THRUSTER_BOOST_TIME = t.MISSION_TREASURE_MUL = t.SPAWN_ZONE = t.MISSION_RETURN_ZONE = t.MISSION_TIME = t.MISSION_INTERVAL = t.MISSION_FLUX_CHANCE = t.REACH_THROUGH_SOLID_DIST = t.REACH_THROUGH_WALKWAY_DIST = t.COMMS_MSG_BUFFER_LEN = t.COMMS_MSG_REGEN = t.COMMS_MSG_LIMIT = t.TEAM_CONNECT_LIMIT_DECAY_MINS = t.TEAM_CONNECT_LIMIT = t.ADDR_CONNECT_LIMIT = t.PLAYER_BASE_INVENTORY_SIZE = t.PLAYER_INVENTORY_SIZE = t.AFK_WARN_SECS = t.AFK_KICK_SECS = t.SHIP_EXPIRE_SECS = t.TASK_DESTRUCT_COLOR = t.TASK_CONSTRUCT_COLOR = t.SHIP_BLOCK_CONSTRUCT_DESTRUCT_TIME = t.SHIP_OBJECT_CONSTRUCT_DESTRUCT_TIME = t.OVERWORLD_ROOM_SIZE = t.OVERWORLD_BOT_DENSITY = t.OVERWORLD_ROOM_DENSITY = t.SHIP_HP_SPAWN = t.SHIP_HP_EXPAND = t.SHIP_HP_BASE = t.MIN_SHIP_SIZE = t.MIN_DAMAGE_SHIP_SIZE = t.MAX_SHIP_SIZE = t.BASE_SHIP_HEIGHT = t.BASE_SHIP_WIDTH = t.MAX_LOW_DANGER_COMBAT_RATING_HARD = t.MAX_LOW_DANGER_COMBAT_RATING = t.MAX_SIGN_COUNT = t.MAX_SIGN_LENGTH = t.MAX_MOTD_LENGTH = t.MAX_CHAT_LENGTH = t.MAX_TEAM_LENGTH = t.MAX_VIEW_DIST = t.MAX_BUILD_DISTANCE = t.MAX_USE_DISTANCE = t.BAD_CHAT_WARNING = t.TEST_MASTER_DOMAIN = t.MASTER_DOMAIN = t.GAME_SERVER_NAMES = t.GAME_DOMAINS = t.TEST_GAME_DOMAIN = t.TEST_DOMAIN = t.BASE_DOMAIN = t.LOCAL_DOMAIN = t.USE_COMBAT_DESTRUCTION = void 0,
                    t.USE_COMBAT_DESTRUCTION = !0,
                    t.LOCAL_DOMAIN = "local.drednot.io",
                    t.BASE_DOMAIN = "drednot.io",
                    t.TEST_DOMAIN = "test.drednot.io",
                    t.TEST_GAME_DOMAIN = "t0.drednot.io",
                    t.GAME_DOMAINS = ["d0.drednot.io", "d1.drednot.io", "s2.drednot.io"],
                    t.GAME_SERVER_NAMES = ["US East", "Europe (Poland)", "Asia (Singapore)"],
                    t.MASTER_DOMAIN = "master.drednot.io",
                    t.TEST_MASTER_DOMAIN = "test-master.drednot.io",
                    t.BAD_CHAT_WARNING = "<b class='warning-text'>WARNING: Extremely explicit or bigoted speech is not allowed. Continued use or attempts to evade the filter may result in a ban.</b>",
                    t.MAX_USE_DISTANCE = 2.5,
                    t.MAX_BUILD_DISTANCE = 5,
                    t.MAX_VIEW_DIST = 180,
                    t.MAX_TEAM_LENGTH = 32,
                    t.MAX_CHAT_LENGTH = 300,
                    t.MAX_MOTD_LENGTH = 4096,
                    t.MAX_SIGN_LENGTH = 32,
                    t.MAX_SIGN_COUNT = 50,
                    t.MAX_LOW_DANGER_COMBAT_RATING = 2500,
                    t.MAX_LOW_DANGER_COMBAT_RATING_HARD = 3e3,
                    t.BASE_SHIP_WIDTH = 12,
                    t.BASE_SHIP_HEIGHT = 7,
                    t.MAX_SHIP_SIZE = 80,
                    t.MIN_DAMAGE_SHIP_SIZE = 8,
                    t.MIN_SHIP_SIZE = 4,
                    t.SHIP_HP_BASE = 100,
                    t.SHIP_HP_EXPAND = 100,
                    t.SHIP_HP_SPAWN = t.SHIP_HP_BASE + (t.BASE_SHIP_WIDTH + t.BASE_SHIP_HEIGHT) * t.SHIP_HP_EXPAND,
                    t.OVERWORLD_ROOM_DENSITY = .005,
                    t.OVERWORLD_BOT_DENSITY = .002,
                    t.OVERWORLD_ROOM_SIZE = 15,
                    t.SHIP_OBJECT_CONSTRUCT_DESTRUCT_TIME = 1,
                    t.SHIP_BLOCK_CONSTRUCT_DESTRUCT_TIME = 0,
                    t.TASK_CONSTRUCT_COLOR = 65280,
                    t.TASK_DESTRUCT_COLOR = 16711680,
                    t.SHIP_EXPIRE_SECS = 180,
                    t.AFK_KICK_SECS = 300,
                    t.AFK_WARN_SECS = 240,
                    t.PLAYER_INVENTORY_SIZE = 22,
                    t.PLAYER_BASE_INVENTORY_SIZE = 5,
                    t.ADDR_CONNECT_LIMIT = 10,
                    t.TEAM_CONNECT_LIMIT = 3,
                    t.TEAM_CONNECT_LIMIT_DECAY_MINS = 10,
                    t.COMMS_MSG_LIMIT = 5,
                    t.COMMS_MSG_REGEN = 10,
                    t.COMMS_MSG_BUFFER_LEN = 64,
                    t.REACH_THROUGH_WALKWAY_DIST = .8,
                    t.REACH_THROUGH_SOLID_DIST = .1,
                    t.MISSION_FLUX_CHANCE = .1,
                    t.MISSION_INTERVAL = 45,
                    t.MISSION_TIME = 15,
                    t.MISSION_RETURN_ZONE = "Sparrow",
                    t.SPAWN_ZONE = "Finch I",
                    t.MISSION_TREASURE_MUL = .5,
                    t.THRUSTER_BOOST_TIME = 20,
                    t.MAX_LAUNCHER_POWER = 30,
                    t.DEFAULT_BG_COLOR = 250,
                    t.DEBUG_BLOCK_SAVES = !1,
                    t.COMMS_BUBBLE_TIME = 30,
                    (n = t.GameRank || (t.GameRank = {}))[n.Guest = 0] = "Guest",
                    n[n.GameMaster = 1] = "GameMaster",
                    n[n.PatronBronze = 2] = "PatronBronze",
                    n[n.PatronSilver = 3] = "PatronSilver",
                    n[n.PatronGold = 4] = "PatronGold",
                    n[n.PatronPlat = 5] = "PatronPlat",
                    n[n.PatronFlux = 6] = "PatronFlux",
                    (o = t.TeamRank || (t.TeamRank = {}))[o.Guest = 0] = "Guest",
                    o[o.Crew = 1] = "Crew",
                    o[o.CrewInvitePending = 2] = "CrewInvitePending",
                    o[o.Captain = 3] = "Captain",
                    o[o.Banned = 4] = "Banned",
                    (i = t.TeamPrivacy || (t.TeamPrivacy = {}))[i.Public = 0] = "Public",
                    i[i.InviteOnly = 1] = "InviteOnly",
                    i[i.MAX_VALUE = 2] = "MAX_VALUE",
                    (r = t.ZoneDanger || (t.ZoneDanger = {}))[r.Safe = 0] = "Safe",
                    r[r.LowDanger = 1] = "LowDanger",
                    r[r.HighDanger = 2] = "HighDanger",
                    (l = t.DropReason || (t.DropReason = {}))[l.ProtocolError = 4e3] = "ProtocolError",
                    l[l.BadVersion = 4001] = "BadVersion",
                    l[l.ConnectLimit = 4002] = "ConnectLimit",
                    l[l.ConnectRate = 4003] = "ConnectRate",
                    l[l.TeamLimit = 4004] = "TeamLimit",
                    l[l.FullPlayers = 4005] = "FullPlayers",
                    l[l.FullTeams = 4006] = "FullTeams",
                    l[l.TeamNotAvailable = 4007] = "TeamNotAvailable",
                    l[l.Kicked = 4008] = "Kicked",
                    l[l.Banned = 4009] = "Banned",
                    l[l.Idle = 4010] = "Idle",
                    l[l.TeamDeleted = 4011] = "TeamDeleted",
                    l[l.JoinBlocked = 4012] = "JoinBlocked",
                    l[l.HardBanned = 4013] = "HardBanned",
                    l[l.NoLoad = 4014] = "NoLoad",
                    l[l.Saved = 4015] = "Saved",
                    l[l.Shutdown = 4016] = "Shutdown",
                    l[l.ServerError = 4017] = "ServerError",
                    l[l.GTFO = 4018] = "GTFO",
                    (a = t.SubworldBlockTypes || (t.SubworldBlockTypes = {}))[a._BUILD_SURFACE = -1] = "_BUILD_SURFACE",
                    a[a.AIR = 0] = "AIR",
                    a[a.HULL_CORNER = 1] = "HULL_CORNER",
                    a[a.HULL_H = 2] = "HULL_H",
                    a[a.HULL_V = 3] = "HULL_V",
                    a[a.INTERIOR_BLOCK = 4] = "INTERIOR_BLOCK",
                    a[a.LADDER = 5] = "LADDER",
                    a[a.WALKWAY = 6] = "WALKWAY",
                    a[a.ITEM_NET = 7] = "ITEM_NET",
                    a[a.RAMP_1 = 8] = "RAMP_1",
                    a[a.RAMP_2 = 9] = "RAMP_2",
                    a[a.RAMP_3 = 10] = "RAMP_3",
                    a[a.RAMP_4 = 11] = "RAMP_4",
                    a[a.COLOR_PANEL = 12] = "COLOR_PANEL",
                    a[a.HYPER_RUBBER = 13] = "HYPER_RUBBER",
                    a[a.ICE_GLASS = 14] = "ICE_GLASS",
                    (s = t.OverworldBlockTypes || (t.OverworldBlockTypes = {}))[s.AIR = 0] = "AIR",
                    s[s.WALL = 1] = "WALL",
                    s[s.UNBREAKABLE = 2] = "UNBREAKABLE",
                    s[s.TREASURE = 3] = "TREASURE",
                    s[s.BLANK = 4] = "BLANK",
                    s[s.FLUX = 5] = "FLUX",
                    s[s.SLEEPING_BOT = 6] = "SLEEPING_BOT",
                    s[s.BOT_RED = 7] = "BOT_RED",
                    s[s.STRONG_WALL = 8] = "STRONG_WALL",
                    s[s.ROCK = 9] = "ROCK",
                    s[s.ROCK_METAL = 10] = "ROCK_METAL",
                    (c = t.BlockShapes || (t.BlockShapes = {}))[c.BLOCK = 0] = "BLOCK",
                    c[c.RAMP_UR = 1] = "RAMP_UR",
                    c[c.RAMP_DR = 2] = "RAMP_DR",
                    c[c.RAMP_DL = 3] = "RAMP_DL",
                    c[c.RAMP_UL = 4] = "RAMP_UL",
                    c[c.SLAB_U = 5] = "SLAB_U",
                    c[c.SLAB_R = 6] = "SLAB_R",
                    c[c.SLAB_D = 7] = "SLAB_D",
                    c[c.SLAB_L = 8] = "SLAB_L",
                    c[c.HALF_RAMP_1_U = 9] = "HALF_RAMP_1_U",
                    c[c.HALF_RAMP_1_R = 10] = "HALF_RAMP_1_R",
                    c[c.HALF_RAMP_1_D = 11] = "HALF_RAMP_1_D",
                    c[c.HALF_RAMP_1_L = 12] = "HALF_RAMP_1_L",
                    c[c.HALF_RAMP_2_U = 13] = "HALF_RAMP_2_U",
                    c[c.HALF_RAMP_2_R = 14] = "HALF_RAMP_2_R",
                    c[c.HALF_RAMP_2_D = 15] = "HALF_RAMP_2_D",
                    c[c.HALF_RAMP_2_L = 16] = "HALF_RAMP_2_L",
                    c[c.HALF_RAMP_1_UI = 17] = "HALF_RAMP_1_UI",
                    c[c.HALF_RAMP_1_RI = 18] = "HALF_RAMP_1_RI",
                    c[c.HALF_RAMP_1_DI = 19] = "HALF_RAMP_1_DI",
                    c[c.HALF_RAMP_1_LI = 20] = "HALF_RAMP_1_LI",
                    c[c.HALF_RAMP_2_UI = 21] = "HALF_RAMP_2_UI",
                    c[c.HALF_RAMP_2_RI = 22] = "HALF_RAMP_2_RI",
                    c[c.HALF_RAMP_2_DI = 23] = "HALF_RAMP_2_DI",
                    c[c.HALF_RAMP_2_LI = 24] = "HALF_RAMP_2_LI",
                    c[c._END = 25] = "_END",
                    (u = t.EquipmentSlot || (t.EquipmentSlot = {}))[u.LastGeneralSlot = 15] = "LastGeneralSlot",
                    u[u.Head = 16] = "Head",
                    u[u.Face = 17] = "Face",
                    u[u.Body = 18] = "Body",
                    u[u.Back = 19] = "Back",
                    u[u.Hands = 20] = "Hands",
                    u[u.Feet = 21] = "Feet"
                }
                ))
                  , _ = r((function(e, t) {
                    var n, o, i, r, l, a, s, c = {}, u = [], h = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;
                    function d(e, t) {
                        for (var n in t)
                            e[n] = t[n];
                        return e
                    }
                    function _(e) {
                        var t = e.parentNode;
                        t && t.removeChild(e)
                    }
                    function p(e, t, n) {
                        var o, i, r, l = arguments, a = {};
                        for (r in t)
                            "key" == r ? o = t[r] : "ref" == r ? i = t[r] : a[r] = t[r];
                        if (arguments.length > 3)
                            for (n = [n],
                            r = 3; r < arguments.length; r++)
                                n.push(l[r]);
                        if (null != n && (a.children = n),
                        "function" == typeof e && null != e.defaultProps)
                            for (r in e.defaultProps)
                                void 0 === a[r] && (a[r] = e.defaultProps[r]);
                        return m(e, a, o, i, null)
                    }
                    function m(e, t, o, i, r) {
                        var l = {
                            type: e,
                            props: t,
                            key: o,
                            ref: i,
                            __k: null,
                            __: null,
                            __b: 0,
                            __e: null,
                            __d: void 0,
                            __c: null,
                            __h: null,
                            constructor: void 0,
                            __v: r
                        };
                        return null == r && (l.__v = l),
                        null != n.vnode && n.vnode(l),
                        l
                    }
                    function f(e) {
                        return e.children
                    }
                    function g(e, t) {
                        this.props = e,
                        this.context = t
                    }
                    function y(e, t) {
                        if (null == t)
                            return e.__ ? y(e.__, e.__.__k.indexOf(e) + 1) : null;
                        for (var n; t < e.__k.length; t++)
                            if (null != (n = e.__k[t]) && null != n.__e)
                                return n.__e;
                        return "function" == typeof e.type ? y(e) : null
                    }
                    function v(e) {
                        var t, n;
                        if (null != (e = e.__) && null != e.__c) {
                            for (e.__e = e.__c.base = null,
                            t = 0; t < e.__k.length; t++)
                                if (null != (n = e.__k[t]) && null != n.__e) {
                                    e.__e = e.__c.base = n.__e;
                                    break
                                }
                            return v(e)
                        }
                    }
                    function S(e) {
                        (!e.__d && (e.__d = !0) && i.push(e) && !b.__r++ || l !== n.debounceRendering) && ((l = n.debounceRendering) || r)(b)
                    }
                    function b() {
                        for (var e; b.__r = i.length; )
                            e = i.sort((function(e, t) {
                                return e.__v.__b - t.__v.__b
                            }
                            )),
                            i = [],
                            e.some((function(e) {
                                var t, n, o, i, r, l, a;
                                e.__d && (l = (r = (t = e).__v).__e,
                                (a = t.__P) && (n = [],
                                (o = d({}, r)).__v = o,
                                i = M(a, r, o, t.__n, void 0 !== a.ownerSVGElement, null != r.__h ? [l] : null, n, null == l ? y(r) : l, r.__h),
                                C(n, r),
                                i != l && v(r)))
                            }
                            ))
                    }
                    function E(e, t, n, o, i, r, l, a, s, h) {
                        var d, p, g, v, S, b, E, w = o && o.__k || u, T = w.length;
                        for (s == c && (s = null != l ? l[0] : T ? y(o, 0) : null),
                        n.__k = [],
                        d = 0; d < t.length; d++)
                            if (null != (v = n.__k[d] = null == (v = t[d]) || "boolean" == typeof v ? null : "string" == typeof v || "number" == typeof v ? m(null, v, null, null, v) : Array.isArray(v) ? m(f, {
                                children: v
                            }, null, null, null) : null != v.__e || null != v.__c ? m(v.type, v.props, v.key, null, v.__v) : v)) {
                                if (v.__ = n,
                                v.__b = n.__b + 1,
                                null === (g = w[d]) || g && v.key == g.key && v.type === g.type)
                                    w[d] = void 0;
                                else
                                    for (p = 0; p < T; p++) {
                                        if ((g = w[p]) && v.key == g.key && v.type === g.type) {
                                            w[p] = void 0;
                                            break
                                        }
                                        g = null
                                    }
                                S = M(e, v, g = g || c, i, r, l, a, s, h),
                                (p = v.ref) && g.ref != p && (E || (E = []),
                                g.ref && E.push(g.ref, null, v),
                                E.push(p, v.__c || S, v)),
                                null != S ? (null == b && (b = S),
                                s = A(e, v, g, w, l, S, s),
                                h || "option" != n.type ? "function" == typeof n.type && (n.__d = s) : e.value = "") : s && g.__e == s && s.parentNode != e && (s = y(g))
                            }
                        if (n.__e = b,
                        null != l && "function" != typeof n.type)
                            for (d = l.length; d--; )
                                null != l[d] && _(l[d]);
                        for (d = T; d--; )
                            null != w[d] && L(w[d], w[d]);
                        if (E)
                            for (d = 0; d < E.length; d++)
                                N(E[d], E[++d], E[++d])
                    }
                    function A(e, t, n, o, i, r, l) {
                        var a, s, c;
                        if (void 0 !== t.__d)
                            a = t.__d,
                            t.__d = void 0;
                        else if (i == n || r != l || null == r.parentNode)
                            e: if (null == l || l.parentNode !== e)
                                e.appendChild(r),
                                a = null;
                            else {
                                for (s = l,
                                c = 0; (s = s.nextSibling) && c < o.length; c += 2)
                                    if (s == r)
                                        break e;
                                e.insertBefore(r, l),
                                a = l
                            }
                        return void 0 !== a ? a : r.nextSibling
                    }
                    function w(e, t, n) {
                        "-" === t[0] ? e.setProperty(t, n) : e[t] = null == n ? "" : "number" != typeof n || h.test(t) ? n : n + "px"
                    }
                    function T(e, t, n, o, i) {
                        var r, l, a;
                        if (i && "className" == t && (t = "class"),
                        "style" === t)
                            if ("string" == typeof n)
                                e.style.cssText = n;
                            else {
                                if ("string" == typeof o && (e.style.cssText = o = ""),
                                o)
                                    for (t in o)
                                        n && t in n || w(e.style, t, "");
                                if (n)
                                    for (t in n)
                                        o && n[t] === o[t] || w(e.style, t, n[t])
                            }
                        else
                            "o" === t[0] && "n" === t[1] ? (r = t !== (t = t.replace(/Capture$/, "")),
                            (l = t.toLowerCase())in e && (t = l),
                            t = t.slice(2),
                            e.l || (e.l = {}),
                            e.l[t + r] = n,
                            a = r ? I : R,
                            n ? o || e.addEventListener(t, a, r) : e.removeEventListener(t, a, r)) : "list" !== t && "tagName" !== t && "form" !== t && "type" !== t && "size" !== t && "download" !== t && "href" !== t && !i && t in e ? e[t] = null == n ? "" : n : "function" != typeof n && "dangerouslySetInnerHTML" !== t && (t !== (t = t.replace(/xlink:?/, "")) ? null == n || !1 === n ? e.removeAttributeNS("http://www.w3.org/1999/xlink", t.toLowerCase()) : e.setAttributeNS("http://www.w3.org/1999/xlink", t.toLowerCase(), n) : null == n || !1 === n && !/^ar/.test(t) ? e.removeAttribute(t) : e.setAttribute(t, n))
                    }
                    function R(e) {
                        this.l[e.type + !1](n.event ? n.event(e) : e)
                    }
                    function I(e) {
                        this.l[e.type + !0](n.event ? n.event(e) : e)
                    }
                    function k(e, t, n) {
                        var o, i;
                        for (o = 0; o < e.__k.length; o++)
                            (i = e.__k[o]) && (i.__ = e,
                            i.__e && ("function" == typeof i.type && i.__k.length > 1 && k(i, t, n),
                            t = A(n, i, i, e.__k, null, i.__e, t),
                            "function" == typeof e.type && (e.__d = t)))
                    }
                    function M(e, t, o, i, r, l, a, s, c) {
                        var u, h, _, p, m, y, v, S, b, A, w, T = t.type;
                        if (void 0 !== t.constructor)
                            return null;
                        null != o.__h && (c = o.__h,
                        s = t.__e = o.__e,
                        t.__h = null,
                        l = [s]),
                        (u = n.__b) && u(t);
                        try {
                            e: if ("function" == typeof T) {
                                if (S = t.props,
                                b = (u = T.contextType) && i[u.__c],
                                A = u ? b ? b.props.value : u.__ : i,
                                o.__c ? v = (h = t.__c = o.__c).__ = h.__E : ("prototype"in T && T.prototype.render ? t.__c = h = new T(S,A) : (t.__c = h = new g(S,A),
                                h.constructor = T,
                                h.render = P),
                                b && b.sub(h),
                                h.props = S,
                                h.state || (h.state = {}),
                                h.context = A,
                                h.__n = i,
                                _ = h.__d = !0,
                                h.__h = []),
                                null == h.__s && (h.__s = h.state),
                                null != T.getDerivedStateFromProps && (h.__s == h.state && (h.__s = d({}, h.__s)),
                                d(h.__s, T.getDerivedStateFromProps(S, h.__s))),
                                p = h.props,
                                m = h.state,
                                _)
                                    null == T.getDerivedStateFromProps && null != h.componentWillMount && h.componentWillMount(),
                                    null != h.componentDidMount && h.__h.push(h.componentDidMount);
                                else {
                                    if (null == T.getDerivedStateFromProps && S !== p && null != h.componentWillReceiveProps && h.componentWillReceiveProps(S, A),
                                    !h.__e && null != h.shouldComponentUpdate && !1 === h.shouldComponentUpdate(S, h.__s, A) || t.__v === o.__v) {
                                        h.props = S,
                                        h.state = h.__s,
                                        t.__v !== o.__v && (h.__d = !1),
                                        h.__v = t,
                                        t.__e = o.__e,
                                        t.__k = o.__k,
                                        h.__h.length && a.push(h),
                                        k(t, s, e);
                                        break e
                                    }
                                    null != h.componentWillUpdate && h.componentWillUpdate(S, h.__s, A),
                                    null != h.componentDidUpdate && h.__h.push((function() {
                                        h.componentDidUpdate(p, m, y)
                                    }
                                    ))
                                }
                                h.context = A,
                                h.props = S,
                                h.state = h.__s,
                                (u = n.__r) && u(t),
                                h.__d = !1,
                                h.__v = t,
                                h.__P = e,
                                u = h.render(h.props, h.state, h.context),
                                h.state = h.__s,
                                null != h.getChildContext && (i = d(d({}, i), h.getChildContext())),
                                _ || null == h.getSnapshotBeforeUpdate || (y = h.getSnapshotBeforeUpdate(p, m)),
                                w = null != u && u.type == f && null == u.key ? u.props.children : u,
                                E(e, Array.isArray(w) ? w : [w], t, o, i, r, l, a, s, c),
                                h.base = t.__e,
                                t.__h = null,
                                h.__h.length && a.push(h),
                                v && (h.__E = h.__ = null),
                                h.__e = !1
                            } else
                                null == l && t.__v === o.__v ? (t.__k = o.__k,
                                t.__e = o.__e) : t.__e = O(o.__e, t, o, i, r, l, a, c);
                            (u = n.diffed) && u(t)
                        } catch (e) {
                            t.__v = null,
                            (c || null != l) && (t.__e = s,
                            t.__h = !!c,
                            l[l.indexOf(s)] = null),
                            n.__e(e, t, o)
                        }
                        return t.__e
                    }
                    function C(e, t) {
                        n.__c && n.__c(t, e),
                        e.some((function(t) {
                            try {
                                e = t.__h,
                                t.__h = [],
                                e.some((function(e) {
                                    e.call(t)
                                }
                                ))
                            } catch (e) {
                                n.__e(e, t.__v)
                            }
                        }
                        ))
                    }
                    function O(e, t, n, o, i, r, l, a) {
                        var s, h, d, _, p, m = n.props, f = t.props;
                        if (i = "svg" === t.type || i,
                        null != r)
                            for (s = 0; s < r.length; s++)
                                if (null != (h = r[s]) && ((null === t.type ? 3 === h.nodeType : h.localName === t.type) || e == h)) {
                                    e = h,
                                    r[s] = null;
                                    break
                                }
                        if (null == e) {
                            if (null === t.type)
                                return document.createTextNode(f);
                            e = i ? document.createElementNS("http://www.w3.org/2000/svg", t.type) : document.createElement(t.type, f.is && {
                                is: f.is
                            }),
                            r = null,
                            a = !1
                        }
                        if (null === t.type)
                            m === f || a && e.data === f || (e.data = f);
                        else {
                            if (null != r && (r = u.slice.call(e.childNodes)),
                            d = (m = n.props || c).dangerouslySetInnerHTML,
                            _ = f.dangerouslySetInnerHTML,
                            !a) {
                                if (null != r)
                                    for (m = {},
                                    p = 0; p < e.attributes.length; p++)
                                        m[e.attributes[p].name] = e.attributes[p].value;
                                (_ || d) && (_ && (d && _.__html == d.__html || _.__html === e.innerHTML) || (e.innerHTML = _ && _.__html || ""))
                            }
                            (function(e, t, n, o, i) {
                                var r;
                                for (r in n)
                                    "children" === r || "key" === r || r in t || T(e, r, null, n[r], o);
                                for (r in t)
                                    i && "function" != typeof t[r] || "children" === r || "key" === r || "value" === r || "checked" === r || n[r] === t[r] || T(e, r, t[r], n[r], o)
                            }
                            )(e, f, m, i, a),
                            _ ? t.__k = [] : (s = t.props.children,
                            E(e, Array.isArray(s) ? s : [s], t, n, o, "foreignObject" !== t.type && i, r, l, c, a)),
                            a || ("value"in f && void 0 !== (s = f.value) && (s !== e.value || "progress" === t.type && !s) && T(e, "value", s, m.value, !1),
                            "checked"in f && void 0 !== (s = f.checked) && s !== e.checked && T(e, "checked", s, m.checked, !1))
                        }
                        return e
                    }
                    function N(e, t, o) {
                        try {
                            "function" == typeof e ? e(t) : e.current = t
                        } catch (e) {
                            n.__e(e, o)
                        }
                    }
                    function L(e, t, o) {
                        var i, r, l;
                        if (n.unmount && n.unmount(e),
                        (i = e.ref) && (i.current && i.current !== e.__e || N(i, null, t)),
                        o || "function" == typeof e.type || (o = null != (r = e.__e)),
                        e.__e = e.__d = void 0,
                        null != (i = e.__c)) {
                            if (i.componentWillUnmount)
                                try {
                                    i.componentWillUnmount()
                                } catch (e) {
                                    n.__e(e, t)
                                }
                            i.base = i.__P = null
                        }
                        if (i = e.__k)
                            for (l = 0; l < i.length; l++)
                                i[l] && L(i[l], t, o);
                        null != r && _(r)
                    }
                    function P(e, t, n) {
                        return this.constructor(e, n)
                    }
                    function x(e, t, o) {
                        var i, r, l;
                        n.__ && n.__(e, t),
                        r = (i = o === a) ? null : o && o.__k || t.__k,
                        e = p(f, null, [e]),
                        l = [],
                        M(t, (i ? t : o || t).__k = e, r || c, c, void 0 !== t.ownerSVGElement, o && !i ? [o] : r ? null : t.childNodes.length ? u.slice.call(t.childNodes) : null, l, o || c, i),
                        C(l, e)
                    }
                    n = {
                        __e: function(e, t) {
                            for (var n, o, i, r = t.__h; t = t.__; )
                                if ((n = t.__c) && !n.__)
                                    try {
                                        if ((o = n.constructor) && null != o.getDerivedStateFromError && (n.setState(o.getDerivedStateFromError(e)),
                                        i = n.__d),
                                        null != n.componentDidCatch && (n.componentDidCatch(e),
                                        i = n.__d),
                                        i)
                                            return t.__h = r,
                                            n.__E = n
                                    } catch (t) {
                                        e = t
                                    }
                            throw e
                        }
                    },
                    o = function(e) {
                        return null != e && void 0 === e.constructor
                    }
                    ,
                    g.prototype.setState = function(e, t) {
                        var n;
                        n = null != this.__s && this.__s !== this.state ? this.__s : this.__s = d({}, this.state),
                        "function" == typeof e && (e = e(d({}, n), this.props)),
                        e && d(n, e),
                        null != e && this.__v && (t && this.__h.push(t),
                        S(this))
                    }
                    ,
                    g.prototype.forceUpdate = function(e) {
                        this.__v && (this.__e = !0,
                        e && this.__h.push(e),
                        S(this))
                    }
                    ,
                    g.prototype.render = f,
                    i = [],
                    r = "function" == typeof Promise ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout,
                    b.__r = 0,
                    a = c,
                    s = 0,
                    t.render = x,
                    t.hydrate = function(e, t) {
                        x(e, t, a)
                    }
                    ,
                    t.createElement = p,
                    t.h = p,
                    t.Fragment = f,
                    t.createRef = function() {
                        return {
                            current: null
                        }
                    }
                    ,
                    t.isValidElement = o,
                    t.Component = g,
                    t.cloneElement = function(e, t, n) {
                        var o, i, r, l = arguments, a = d({}, e.props);
                        for (r in t)
                            "key" == r ? o = t[r] : "ref" == r ? i = t[r] : a[r] = t[r];
                        if (arguments.length > 3)
                            for (n = [n],
                            r = 3; r < arguments.length; r++)
                                n.push(l[r]);
                        return null != n && (a.children = n),
                        m(e.type, a, o || e.key, i || e.ref, null)
                    }
                    ,
                    t.createContext = function(e, t) {
                        var n = {
                            __c: t = "__cC" + s++,
                            __: e,
                            Consumer: function(e, t) {
                                return e.children(t)
                            },
                            Provider: function(e, n, o) {
                                return this.getChildContext || (n = [],
                                (o = {})[t] = this,
                                this.getChildContext = function() {
                                    return o
                                }
                                ,
                                this.shouldComponentUpdate = function(e) {
                                    this.props.value !== e.value && n.some(S)
                                }
                                ,
                                this.sub = function(e) {
                                    n.push(e);
                                    var t = e.componentWillUnmount;
                                    e.componentWillUnmount = function() {
                                        n.splice(n.indexOf(e), 1),
                                        t && t.call(e)
                                    }
                                }
                                ),
                                e.children
                            }
                        };
                        return n.Provider.__ = n.Consumer.contextType = n
                    }
                    ,
                    t.toChildArray = function e(t, n) {
                        return n = n || [],
                        null == t || "boolean" == typeof t || (Array.isArray(t) ? t.some((function(t) {
                            e(t, n)
                        }
                        )) : n.push(t)),
                        n
                    }
                    ,
                    t.__u = L,
                    t.options = n
                }
                ))
                  , p = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.openDisconnectDialog = void 0,
                    t.openDisconnectDialog = function(e, t) {
                        let n = document.getElementById("disconnect-popup");
                        var o;
                        n.style.display = "";
                        var i = !1;
                        switch (e) {
                        case d.DropReason.ProtocolError:
                            o = "Protocol error. This is either a bug, or you did something you shouldn't have.",
                            i = !0;
                            break;
                        case d.DropReason.BadVersion:
                            o = "The client's version does not match the server's. Please refresh.",
                            i = !0;
                            break;
                        case d.DropReason.ConnectLimit:
                            o = "Too many clients are connected from this address. Close existing connections or try a different server.";
                            break;
                        case d.DropReason.ConnectRate:
                            o = "This address has been rate limited. Please try again in a few seconds.";
                            break;
                        case d.DropReason.TeamLimit:
                            o = "This address has created or loaded too many ships. Please wait 10 minutes, unload a ship, or try joining an existing ship.";
                            break;
                        case d.DropReason.FullPlayers:
                            o = "This server is full. You can wait for space to open, or try joining a different server.";
                            break;
                        case d.DropReason.FullTeams:
                            o = "This server has reached its ship limit. You can try joining an existing ship, wait for space to open, or try joining a different server.";
                            break;
                        case d.DropReason.TeamNotAvailable:
                            o = "This ship is no longer available to join. It has probably been saved.";
                            break;
                        case d.DropReason.Kicked:
                            o = "You were kicked from this ship. You might still be able to rejoin the ship.";
                            break;
                        case d.DropReason.Banned:
                            o = "You were banned from this ship. You can still join another ship or create your own.";
                            break;
                        case d.DropReason.Idle:
                            o = "You were kicked for being idle.";
                            break;
                        case d.DropReason.HardBanned:
                            o = "Your account or address is banned from the game.";
                            break;
                        case d.DropReason.TeamDeleted:
                            o = "This ship has been deleted. (This should never happen!)";
                            break;
                        case d.DropReason.JoinBlocked:
                            o = "You were not allowed to join the ship. You (or your IP) may be banned, or the ship is private, or your invite was invalid.";
                            break;
                        case d.DropReason.NoLoad:
                            o = "You may not load this ship right now. It may already be loaded, or you do not have permission to load it.";
                            break;
                        case d.DropReason.Saved:
                            o = "A Captain saved the ship. If you are a Captain, you can re-load it from the starting menu. Note that it may take several seconds to appear in the list.";
                            break;
                        case d.DropReason.Shutdown:
                            o = "The server has shut down. It will probably be back online in a few seconds.",
                            i = !0;
                            break;
                        case d.DropReason.ServerError:
                            o = "The server encountered an error.",
                            i = !0;
                            break;
                        case d.DropReason.GTFO:
                            o = "The anti-cheat doesn't like you.";
                            break;
                        default:
                            o = _.h("div", null, _.h("p", null, "You were unexpectedly disconnected. There are a few possible reasons for this:"), _.h("ul", null, _.h("li", null, "The game server may be updating, restarting, or has crashed."), _.h("li", null, "There may be issues with our network."), _.h("li", null, "There may be issues with your network."))),
                            i = !0
                        }
                        let r = _.h("div", null, _.h("h2", null, "DISCONNECTED"), o, _.h("p", null, _.h("button", {
                            class: "btn-green",
                            onClick: function() {
                                i ? document.location.reload() : (n.style.display = "none",
                                t())
                            }
                        }, "Return to Menu")));
                        _.render(r, n)
                    }
                }
                ))
                  , m = r((function(e, t) {
                    var n;
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.getDefaultAppearance = t.AppearanceStyleHair = void 0,
                    (n = t.AppearanceStyleHair || (t.AppearanceStyleHair = {}))[n.Bald = 0] = "Bald",
                    n[n.NotBald = 1] = "NotBald",
                    t.getDefaultAppearance = function() {
                        return {
                            color_body: "#47a53b",
                            color_legs: "#154479",
                            color_hair: "#111111",
                            color_skin: "#c99b86",
                            style_hair: 0
                        }
                    }
                }
                ))
                  , f = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.getHostName = void 0,
                    t.getHostName = function() {
                        return "undefined" == typeof window ? "" : (location.hostname,
                        d.LOCAL_DOMAIN,
                        location.hostname)
                    }
                }
                ))
                  , g = r((function(e, t) {
                    function n() {
                        return f.getHostName() == d.TEST_DOMAIN ? "test_" : f.getHostName() == d.LOCAL_DOMAIN ? "local_" : ""
                    }
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.deleteCookie = t.setCookie = t.getCookie = t.getCookiePrefix = void 0,
                    t.getCookiePrefix = n,
                    t.getCookie = function(e) {
                        e = n() + e;
                        let t = ("; " + document.cookie).split("; " + e + "=");
                        return t.length >= 2 ? decodeURIComponent(t.pop().split(";").shift() || "") : ""
                    }
                    ,
                    t.setCookie = function(e, t) {
                        let o = (e = n() + e) + "=" + encodeURIComponent("" + t) + ";max-age=9999999999;path=/;domain=." + d.BASE_DOMAIN;
                        o += ";Secure;SameSite=None",
                        document.cookie = o
                    }
                    ,
                    t.deleteCookie = function(e) {
                        e = n() + e,
                        document.cookie = e + "=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=." + d.BASE_DOMAIN,
                        document.cookie = e + "=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=." + d.TEST_DOMAIN,
                        document.cookie = e + "=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/"
                    }
                }
                ))
                  , y = r((function(e, t) {
                    var n;
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.cloneUserSettings = t.USER_SETTINGS = t.ProfanityMode = void 0,
                    function(e) {
                        e[e.Off = 0] = "Off",
                        e[e.Moderate = 1] = "Moderate",
                        e[e.Strict = 2] = "Strict"
                    }(n = t.ProfanityMode || (t.ProfanityMode = {}));
                    let o = {
                        volume: .3,
                        profanity_mode: n.Strict,
                        chat_hide_bubbles: !1,
                        chat_hide_messages: !1,
                        menu_zoom: 200,
                        always_show_ammo: !1,
                        hide_game_rank: !1,
                        preferred_server: -1,
                        player_appearance: m.getDefaultAppearance(),
                        menu_ship_filter: null
                    };
                    function i() {
                        localStorage.setItem("dredark_user_settings", JSON.stringify(o))
                    }
                    if (t.USER_SETTINGS = new Proxy({},{
                        get: (e,t)=>o[t],
                        set: (e,t,n)=>(o[t] = n,
                        i(),
                        !0)
                    }),
                    t.cloneUserSettings = function() {
                        return JSON.parse(JSON.stringify(o))
                    }
                    ,
                    "undefined" != typeof window) {
                        let e = localStorage.getItem("dredark_user_settings");
                        if (null != e) {
                            let t = JSON.parse(e);
                            Object.assign(o, t)
                        } else
                            try {
                                let e = JSON.parse(atob(g.getCookie("user_settings")));
                                Object.assign(o, e),
                                i(),
                                g.deleteCookie("user_settings")
                            } catch (e) {}
                    }
                }
                ))
                  , v = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.checkWords = t.filterWords = t.getProfanityMode = void 0;
                    const n = s([221, 199, 197, 217, 214, 219, 193, 218, 213, 219, 194, 208, 193, 200, 220, 194, 203, 209, 200, 193, 202, 206, 203, 202, 207, 203, 214, 218, 220, 214, 194, 205, 237, 224, 239, 230, 249, 254, 235, 226, 227, 245, 248, 225, 235, 224, 235, 233, 251, 254, 248, 225, 251, 232, 235, 241, 249, 251, 241, 233, 243, 224, 227, 249, 143, 155, 144, 137, 159, 134, 138, 136, 149, 148, 152, 135, 139, 151, 131, 137, 130, 157, 157, 142, 142, 154, 138, 157, 138, 132, 152, 128, 134, 143, 135, 153, 161, 189, 169, 177, 55543, 56670])
                      , o = s([134, 241, 208, 246, 244, 202, 133, 211, 231, 138, 254, 248, 139, 139, 193, 210, 205, 195, 209, 212, 212, 220, 221, 197, 208, 194, 223, 201, 194, 218, 195, 194, 242, 255, 229, 254, 249, 238, 236, 245, 246, 238, 247, 246, 235, 237, 231, 253, 238, 246, 239, 238, 255, 233, 228, 234, 243, 239, 232, 241, 251, 240, 251, 237, 138, 134, 143, 134, 153, 151, 140, 128, 133, 140, 129, 129, 158, 128, 143, 130, 149, 131, 159, 146, 153, 144, 139, 133, 130, 158, 128, 137, 134, 154, 132, 130, 231, 231, 243, 236, 145, 170, 229, 179, 135, 234, 158, 152, 235])
                      , i = s([204, 192, 195, 207, 214, 219, 205, 199, 207, 212, 216, 211, 195, 196, 201, 207, 223, 195, 219, 216, 212, 210, 204, 216, 218, 203, 215, 218, 220, 215, 223, 220, 242, 235, 229, 225, 238, 228, 244, 235, 231, 235, 232, 246, 227, 224, 235, 253, 252, 254, 240, 241, 186, 232, 249, 250, 253, 235, 188, 203, 238, 200, 206, 240, 195, 149, 173, 192, 176, 182, 193, 193, 148, 134, 148, 128, 158, 145, 129, 145, 155, 140, 128, 143, 155, 139, 157, 157, 138, 133, 149, 133, 155, 157, 151, 141, 188, 174, 188, 164, 185, 191, 225, 225, 249, 230, 159, 164, 239, 185, 129, 236, 132, 130, 245])
                      , r = s([222, 192, 222, 195, 197, 215, 216, 198, 212, 201, 204, 208, 192, 223, 209, 212, 219, 218, 218, 193, 215, 218, 203, 205, 195, 197, 214, 212, 206, 222, 209, 194, 250, 234, 254, 239, 235, 247, 231, 251, 225, 230, 247, 232, 254, 230, 227, 226, 246, 246, 224, 245, 255, 245, 236, 248, 255, 235, 246, 230, 246, 254, 236, 243, 130, 128, 155, 135, 133, 137, 148, 129, 135, 137, 128, 143, 141, 129, 156, 147, 151, 146, 150, 146, 152, 135, 154, 156, 151, 132, 128, 156, 158, 154, 132, 136, 178, 166, 162, 174, 175, 184, 188, 181, 161, 166, 170, 162, 160, 162, 174, 166, 162, 247, 130, 161, 129, 133, 185, 244, 172, 150, 249, 143, 143, 250, 248, 161, 65, 93, 66, 81, 75, 69, 73, 69, 15, 15, 27, 4, 121, 66, 13, 91, 127, 18, 102, 96, 19])
                      , l = s([192, 198, 203, 202, 207, 217, 212, 199, 207, 192, 195, 196, 222, 205, 201, 198, 217, 195, 218, 220, 221, 220, 215, 205, 202, 209, 213, 210, 213, 218, 196, 205, 232, 238, 235, 234, 243, 247, 238, 232, 225, 224, 248, 227, 227, 228, 239, 245, 226, 249, 253, 250, 243, 239, 228, 235, 243, 227, 245, 231, 246, 239, 248, 248, 154, 131, 137, 159, 150, 133, 137, 147, 143, 155, 21417, 153, 21426, 159, 140, 142, 146, 150, 159, 146, 148, 135, 148, 150, 154, 158, 128, 148, 142, 128, 152, 158, 186, 174, 176, 167, 171, 162, 164, 171, 167, 174, 176, 185, 234, 157, 188, 154, 128, 190, 241, 167, 155, 246, 130, 132, 255, 255, 178, 180, 181, 175, 182, 176, 73, 92, 80, 75, 75, 76, 82, 0, 14, 24, 5, 126, 67, 14, 90, 96, 19, 101, 97, 20])
                      , a = /https?:\/\/(?!(\w+\.)?(drednot\.io|dredark\.net|reddit\.com|discord\.gg|discordapp\.com|fandom\.com|gamepedia\.com|drednews\.com|twitter\.com|patreon\.com))\S+/gi;
                    function s(e) {
                        let t = "";
                        return e.forEach(((e,n)=>{
                            t += String.fromCharCode(e ^ n ^ 174)
                        }
                        )),
                        new RegExp(t,"gi")
                    }
                    let c, u = e=>e.replace(/\S/g, "█"), h = {};
                    t.getProfanityMode = function() {
                        return y.USER_SETTINGS.profanity_mode
                    }
                    ,
                    t.filterWords = function(e, t=!1) {
                        if ("undefined" == typeof window)
                            return e = (e = (e = (e = (e = (e = e.replace(n, u)).replace(o, u)).replace(a, u)).replace(i, u)).replace(r, u)).replace(l, u);
                        if (c != y.USER_SETTINGS.profanity_mode && (c = y.USER_SETTINGS.profanity_mode,
                        h = {}),
                        null != h[e])
                            return h[e];
                        let s = e;
                        return y.USER_SETTINGS.profanity_mode == y.ProfanityMode.Strict && (e = (e = (e = e.replace(n, u)).replace(o, u)).replace(a, u)),
                        y.USER_SETTINGS.profanity_mode != y.ProfanityMode.Off && (e = (e = (e = e.replace(i, u)).replace(r, u)).replace(l, u)),
                        t && (h[s] = e),
                        e
                    }
                    ,
                    t.checkWords = function(e, t=!0) {
                        let s = e;
                        return t && (e = (e = (e = e.replace(n, u)).replace(o, u)).replace(a, u)),
                        s != (e = (e = (e = e.replace(i, u)).replace(r, u)).replace(l, u))
                    }
                }
                ))
                  , S = o(v)
                  , b = Object.freeze(Object.assign(Object.create(null), v, {
                    default: S
                }))
                  , E = r((function(e, t) {
                    var o = n && n.__awaiter || function(e, t, n, o) {
                        return new (n || (n = Promise))((function(i, r) {
                            function l(e) {
                                try {
                                    s(o.next(e))
                                } catch (e) {
                                    r(e)
                                }
                            }
                            function a(e) {
                                try {
                                    s(o.throw(e))
                                } catch (e) {
                                    r(e)
                                }
                            }
                            function s(e) {
                                var t;
                                e.done ? i(e.value) : (t = e.value,
                                t instanceof n ? t : new n((function(e) {
                                    e(t)
                                }
                                ))).then(l, a)
                            }
                            s((o = o.apply(e, t || [])).next())
                        }
                        ))
                    }
                    ;
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.Searcher = t.array_pick = t.shuffle = t.wait = t.checkKey = t.getAngle = t.getWorldText = t.formatTime = t.validateUsername = t.censorKey = t.settle = t.timeout = void 0,
                    t.timeout = function(e, t) {
                        return new Promise((function(n, o) {
                            setTimeout((function() {
                                o(new Error("timeout"))
                            }
                            ), e),
                            t.then(n, o)
                        }
                        ))
                    }
                    ,
                    t.settle = function(e) {
                        return new Promise((function(t, n) {
                            e.then(t, t)
                        }
                        ))
                    }
                    ,
                    t.censorKey = function(e) {
                        return e.substr(0, 4) + "*".repeat(Math.max(0, e.length - 4))
                    }
                    ,
                    t.validateUsername = function(e) {
                        if (e.length > 20)
                            return "Name too long.";
                        if (e.length < 3)
                            return "Name too short.";
                        if (e.startsWith(" "))
                            return "Name can not start with a space.";
                        if (e.endsWith(" "))
                            return "Name can not end with a space.";
                        if (e.includes("  "))
                            return "Name can not contain consecutive spaces.";
                        let t = e.match(/[^a-z0-9 ]/gi);
                        return null != t ? `Name contains a disallowed character: '${t[0]}'` : v.checkWords(e) ? "Name contains a bad word." : null
                    }
                    ,
                    t.formatTime = function(e) {
                        let t = e % 60
                          , n = Math.floor(e / 60) % 60
                          , o = Math.floor(e / 3600)
                          , i = "" + t;
                        return (n > 0 || o > 0) && (i = "0" + i,
                        i = i.substring(i.length - 2),
                        i = n + ":" + i,
                        o > 0 && (i = "0" + i,
                        i = i.substring(i.length - 5),
                        i = o + ":" + i)),
                        i
                    }
                    ,
                    t.getWorldText = function(e) {
                        if ("The Pits" == e)
                            return ["[Mission] Buried treasure. (No Limits)", 11541580];
                        if (e.startsWith("Test Battle Zone"))
                            return ["No Cheating. Ships revert upon leaving.", 11541580];
                        switch (e.split(" ")[0]) {
                        case "Freeport":
                            return ["Safe Zone. Weapons Disabled.", 4521796];
                        case "Finch":
                            return ["Starter/Solo Zone. (Combat Rating < " + d.MAX_LOW_DANGER_COMBAT_RATING + ")", 16772664];
                        case "Sparrow":
                            return ["Bigger ships. More Loot. (No Limits)", 16729156];
                        case "Canary":
                            return ["[Mission] High-Value Mining. (No Limits)", 13197862];
                        case "Vulture":
                            return ["[Mission] Bot Hordes (No Limits)", 0]
                        }
                        return ["???", 16777215]
                    }
                    ,
                    t.getAngle = function(e, t, n, o) {
                        return Math.atan2(o - t, n - e)
                    }
                    ,
                    t.checkKey = function(e) {
                        return /^[0-9a-zA-Z\-_]{24}$/.test(e)
                    }
                    ,
                    t.wait = function(e) {
                        return o(this, void 0, void 0, (function*() {
                            return new Promise(((t,n)=>{
                                setTimeout((()=>{
                                    t(null)
                                }
                                ), e)
                            }
                            ))
                        }
                        ))
                    }
                    ,
                    t.shuffle = function(e) {
                        let t, n, o;
                        for (o = e.length - 1; o > 0; o--)
                            t = Math.floor(Math.random() * (o + 1)),
                            n = e[o],
                            e[o] = e[t],
                            e[t] = n;
                        return e
                    }
                    ,
                    t.array_pick = function(e) {
                        return e[Math.floor(Math.random() * e.length)]
                    }
                    ;
                    t.Searcher = class {
                        constructor(e) {
                            this.norm_word = e.normalize("NFKD").replace(/[\u0300-\u036f]/g, "").toLowerCase()
                        }
                        find_in(e) {
                            return e.normalize("NFKD").replace(/[\u0300-\u036f]/g, "").toLowerCase().includes(this.norm_word)
                        }
                    }
                }
                ))
                  , A = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.GAME_VERSION = void 0,
                    t.GAME_VERSION = "Tue Jun 15 16:15:17 MDT 2021 558b248c-d701-491b-aa0c-450d08f66885"
                }
                ))
                  , w = r((function(e, t) {
                    let n;
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.time = t.BetterTickQueue = t.parseTime = void 0,
                    n = "undefined" != typeof window ? window.performance : c.performance,
                    t.parseTime = function(e) {
                        let t = e.toLowerCase().match(/^(\d+)([hms])$/);
                        if (null != t) {
                            if ("h" == t[2])
                                return 60 * parseInt(t[1]) * 60;
                            if ("m" == t[2])
                                return 60 * parseInt(t[1]);
                            if ("s" == t[2])
                                return parseInt(t[1])
                        }
                        return null
                    }
                    ;
                    class o {
                        constructor() {
                            this.events = new Array,
                            this.time_span = 3e3
                        }
                        push_event(e, n) {
                            let o = t.time.perf_now;
                            if ("empty" == e) {
                                let e = this.events[this.events.length - 1];
                                if (null != e && "empty" == e.type)
                                    return
                            }
                            for (this.events.push({
                                type: e,
                                count: n,
                                time: o
                            }); this.events[0].time < o - this.time_span; )
                                this.events.shift()
                        }
                        draw(e) {
                            let n = t.time.perf_now;
                            for (let t = this.events.length - 1; t >= 0; t--) {
                                let o = this.events[t]
                                  , i = n - o.time
                                  , r = 10
                                  , l = this.events[t - 1];
                                null != l && (r = o.time - l.time),
                                "push" == o.type ? e.fillStyle = "lime" : "pop" == o.type ? e.fillStyle = "yellow" : e.fillStyle = "red";
                                let a = "empty" == o.type ? 1 : o.count;
                                e.fillRect(10 + .2 * i, 0, .2 * r, 5 * -a)
                            }
                        }
                    }
                    t.BetterTickQueue = class {
                        constructor() {
                            this.LAG_TIME_MS = 75,
                            this.internal_queue = new Array,
                            this.deadline_queue = new Array,
                            this.next_deadline = Number.POSITIVE_INFINITY,
                            this.debug = new o
                        }
                        get length() {
                            return this.internal_queue.length
                        }
                        push(e, n="") {
                            let o = t.time.perf_now
                              , i = Math.min(o + this.LAG_TIME_MS, this.next_deadline);
                            this.internal_queue.push(e),
                            this.deadline_queue.push(i),
                            this.next_deadline = i + t.time.tick_delta_ms,
                            this.debug.push_event("push", this.length)
                        }
                        tryPop() {
                            let e = this.deadline_queue[0];
                            if (null != e && t.time.perf_now >= e) {
                                this.deadline_queue.shift();
                                let e = this.internal_queue.shift();
                                return this.debug.push_event("pop", this.length),
                                e
                            }
                            t.time.perf_now >= this.next_deadline && this.debug.push_event("empty", this.length)
                        }
                    }
                    ,
                    t.time = new class {
                        constructor() {
                            this.tick_rate = 20,
                            this.tick_delta = 1 / this.tick_rate,
                            this.tick_delta_ms = 1e3 / this.tick_rate,
                            this._tick_now = 0,
                            this.average_dt_ms = 0,
                            this.game_loop_quota = null
                        }
                        get tick_now() {
                            return this._tick_now
                        }
                        startGameLoop(e) {
                            let o = !1
                              , i = n.now()
                              , r = ()=>{
                                if (o)
                                    return;
                                let l = n.now();
                                e(i - l);
                                let a = n.now()
                                  , s = a - l;
                                if (this.average_dt_ms = .99 * this.average_dt_ms + .01 * s,
                                null != this.game_loop_quota) {
                                    let e = Math.max(t.time.tick_delta_ms, this.average_dt_ms / this.game_loop_quota);
                                    i += e
                                } else
                                    i += t.time.tick_delta_ms;
                                i = Math.max(i, a),
                                setTimeout(r, i - a),
                                this._tick_now += t.time.tick_delta
                            }
                            ;
                            return r(),
                            function() {
                                o = !0
                            }
                        }
                        get perf_now() {
                            return n.now()
                        }
                    }
                }
                ))
                  , T = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.graphics = t.BASE_SCALE = void 0,
                    t.BASE_SCALE = 40;
                    let n = {};
                    class o {
                        constructor() {
                            this.ctx = {
                                fillStyle: "",
                                drawImage: (...e)=>{}
                                ,
                                fillRect: (...e)=>{}
                                ,
                                getTransform: (...e)=>{}
                                ,
                                setTransform: (...e)=>{}
                                ,
                                translate: (...e)=>{}
                            },
                            this.cam_x = 0,
                            this.cam_y = 0,
                            this.cam_scale = 1,
                            this.BASE_SCALE = t.BASE_SCALE,
                            this.hide_text = !1,
                            this.font = "",
                            this.game_canvas = document.querySelector("#canvas-game")
                        }
                        setHideText(e, t) {
                            this.hide_text = e,
                            this.gfx.set_hide_text(t)
                        }
                        get zoomed_in() {
                            return this.cam_scale > 10
                        }
                        setup_metal() {
                            null == this.gfx && (this.gfx = u.cl_module.Gfx.init(),
                            this.starField = u.cl_module.GfxStarField.new(this.gfx),
                            this.game_canvas.addEventListener("webglcontextlost", (e=>{
                                console.log("webgl context lost"),
                                e.preventDefault()
                            }
                            ), !1),
                            this.game_canvas.addEventListener("webglcontextrestored", (()=>{
                                this.gfx.restore_context()
                            }
                            ), !1))
                        }
                        setCamera(e, n, o) {
                            this.cam_scale = o * t.BASE_SCALE,
                            this.cam_x = e - this.game_canvas.width / this.cam_scale / 2,
                            this.cam_y = n + this.game_canvas.height / this.cam_scale / 2,
                            this.gfx.set_cam(e, n, o * t.BASE_SCALE)
                        }
                        translatePixel(e, t) {
                            return {
                                x: e / this.cam_scale + this.cam_x,
                                y: -t / this.cam_scale + this.cam_y
                            }
                        }
                        translatePos(e, t) {
                            return {
                                x: (e - this.cam_x) * this.cam_scale,
                                y: (-t + this.cam_y) * this.cam_scale
                            }
                        }
                        clear(e=!1) {
                            e ? (this.gfx.clear(255),
                            this.starField.draw(this.gfx, this.game_canvas.width, this.game_canvas.height)) : this.gfx.clear(0)
                        }
                        drawImage(e, t, o, i=0, r=1, l=1, a=4294967295) {
                            if (null == e)
                                return;
                            let s = n[e];
                            null == s && (s = this.gfx.get_image_id(e),
                            n[e] = s),
                            this.gfx.draw_image(s, a, t, o, i, r, l)
                        }
                        clearImageURL(e) {
                            null != this.gfx && (this.gfx.clear_image_url(e),
                            delete n[e])
                        }
                        clearAllImageURLS() {
                            null != this.gfx && (this.gfx.clear_all_images(),
                            n = {})
                        }
                        translate(e, t, n) {
                            this.gfx.matrix_push_translate(e, t),
                            n(),
                            this.gfx.matrix_pop()
                        }
                        translate_rotate(e, t, n, o) {
                            this.gfx.matrix_push_translate_rotate(e, t, n),
                            o(),
                            this.gfx.matrix_pop()
                        }
                        scale(e, t, n) {
                            this.gfx.matrix_push_scale(e, t),
                            n(),
                            this.gfx.matrix_pop()
                        }
                        screen_render(e) {
                            let t = this.gfx.matrix_push_screen();
                            e(),
                            this.gfx.matrix_pop_screen(t)
                        }
                        fillRect(e, t, n, o, i) {
                            this.gfx.matrix_push_translate(t, n),
                            this.gfx.draw_rect(e, o, i),
                            this.gfx.matrix_pop()
                        }
                        strokeLine(e, t, n, o, i, r=.1) {
                            this.gfx.draw_line(e, r, t, n, o, i)
                        }
                        drawText(e, t, n, o, i, r) {
                            let l = (t - this.cam_x) * this.cam_scale
                              , a = (this.cam_y - n) * this.cam_scale;
                            this.drawTextSS(e, l, a, o, i, r)
                        }
                        drawTextSS(e, t, n, o=16777215, i=10, r) {
                            this.gfx.draw_text_js(e, t, n, o, i, r, w.time.perf_now / 1e3)
                        }
                    }
                    t.graphics = h.RUN_ON_CLIENT((()=>new o))
                }
                ))
                  , R = r((function(e, t) {
                    function n(e, t, n) {
                        let o = e=>{
                            let t = e / 255;
                            return t <= .03928 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4)
                        }
                        ;
                        return .2126 * o(e) + .7152 * o(t) + .0722 * o(n) > .2140411404
                    }
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.calcLuma = t.calcLumaX = t.randomColor = t.colorNumToCSS = t.parseColor = t.numberToHexColor = void 0,
                    t.numberToHexColor = function(e) {
                        let t = e.toString(16);
                        for (; t.length < 6; )
                            t = "0" + t;
                        return t = "#" + t,
                        t
                    }
                    ,
                    t.parseColor = function(e) {
                        if (7 != e.length || "#" != e[0])
                            return null;
                        let t = parseInt(e.substr(1), 16);
                        return t != t ? null : t
                    }
                    ,
                    t.colorNumToCSS = function(e) {
                        return `rgb(${e >> 16 & 255},${e >> 8 & 255},${255 & e})`
                    }
                    ,
                    t.randomColor = function() {
                        let e = Math.floor(16777216 * Math.random()).toString(16);
                        for (; e.length < 6; )
                            e = "0" + e;
                        return e = "#" + e,
                        e
                    }
                    ,
                    t.calcLumaX = function(e) {
                        return n(e >> 16, e >> 8 & 255, 255 & e)
                    }
                    ,
                    t.calcLuma = n
                }
                ))
                  , I = r((function(e, t) {
                    function n(e, t) {
                        return "flux" == e || "flux" == t ? "flux" : "plat" == e || "plat" == t ? "plat" : "gold" == e || "gold" == t ? "gold" : "silver" == e || "silver" == t ? "silver" : "bronze" == e || "bronze" == t ? "bronze" : null
                    }
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.getPledgeTierInfo = t.getTierIsGreaterEqual = t.getMaxTier = void 0,
                    t.getMaxTier = n,
                    t.getTierIsGreaterEqual = function(e, t) {
                        return n(e, t) == e
                    }
                    ,
                    t.getPledgeTierInfo = function(e) {
                        return "flux" == e ? {
                            name: "Flux Wrench",
                            color: "#3A3",
                            image: "item/wrench_flux",
                            game_rank: d.GameRank.PatronFlux
                        } : "plat" == e ? {
                            name: "Platinum Wrench",
                            color: "#1AD",
                            image: "item/wrench_platinum",
                            game_rank: d.GameRank.PatronPlat
                        } : "gold" == e ? {
                            name: "Gold Wrench",
                            color: "#FC0",
                            image: "item/wrench_gold",
                            game_rank: d.GameRank.PatronGold
                        } : "silver" == e ? {
                            name: "Silver Wrench",
                            color: "#AAA",
                            image: "item/wrench_silver",
                            game_rank: d.GameRank.PatronSilver
                        } : "bronze" == e ? {
                            name: "Bronze Wrench",
                            color: "#C71",
                            image: "item/wrench_bronze",
                            game_rank: d.GameRank.PatronBronze
                        } : null
                    }
                }
                ))
                  , k = "/x/asset.kOmOuxCmJjLUI6BMYJ4W.png"
                  , M = Object.freeze({
                    __proto__: null,
                    default: k
                })
                  , C = "/x/asset.2jrQzPpjHFBAjBV0wwRh.png"
                  , O = Object.freeze({
                    __proto__: null,
                    default: C
                })
                  , N = "/x/asset.7KzsQYfgLFmKH0dNXIvT.png"
                  , L = Object.freeze({
                    __proto__: null,
                    default: N
                })
                  , P = "/x/asset.U1jdsQlWlcI73yMWEil.png"
                  , x = Object.freeze({
                    __proto__: null,
                    default: P
                })
                  , D = "/x/asset.eaBRcVzOaANdfJ7a5cKF.png"
                  , U = Object.freeze({
                    __proto__: null,
                    default: D
                })
                  , F = "/x/asset.AL8OaW4RNXOdGJSPm86k.png"
                  , B = Object.freeze({
                    __proto__: null,
                    default: F
                })
                  , H = "/x/asset.ktOhxoXMjTTR6LEDTLAL.png"
                  , G = Object.freeze({
                    __proto__: null,
                    default: H
                })
                  , j = "/x/asset.Gj0ufGvJ74WH0KO9VjE.png"
                  , W = Object.freeze({
                    __proto__: null,
                    default: j
                })
                  , V = "/x/asset.79SRQIM24DeGzpdZn9f.png"
                  , z = Object.freeze({
                    __proto__: null,
                    default: V
                })
                  , K = "/x/asset.UxsX0X5oQgGPWd6SsEV.png"
                  , Y = Object.freeze({
                    __proto__: null,
                    default: K
                })
                  , X = "/x/asset.Ywr2R1DVEVr3uavNac0.png"
                  , q = Object.freeze({
                    __proto__: null,
                    default: X
                })
                  , J = "/x/asset.tghS6KRmlSFXN5qcBJU.png"
                  , Z = Object.freeze({
                    __proto__: null,
                    default: J
                })
                  , $ = "/x/asset.C6sElJv0sBKWhkBpMP.png"
                  , Q = Object.freeze({
                    __proto__: null,
                    default: $
                })
                  , ee = "/x/asset.YlOutlnJD4VfEdpmITN.png"
                  , te = Object.freeze({
                    __proto__: null,
                    default: ee
                })
                  , ne = "/x/asset.dNA4kCjrw1Jv96Tl73Oy.png"
                  , oe = Object.freeze({
                    __proto__: null,
                    default: ne
                })
                  , ie = i(M)
                  , re = i(O)
                  , le = i(L)
                  , ae = i(x)
                  , se = i(U)
                  , ce = i(B)
                  , ue = i(G)
                  , he = i(W)
                  , de = i(z)
                  , _e = i(Y)
                  , pe = i(q)
                  , me = i(Z)
                  , fe = i(Q)
                  , ge = i(te)
                  , ye = i(oe)
                  , ve = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.getEarlyImageURL = void 0,
                    t.getEarlyImageURL = function(e) {
                        let t = e.includes(".") ? e : e + ".png"
                          , n = Te.modFileDB.getFileURL("/img/" + t);
                        if (null != n)
                            return n;
                        switch (e) {
                        case "save":
                            return ie.default;
                        case "no_ship_icon":
                            return re.default;
                        case "player":
                            return le.default;
                        case "player_head":
                            return ae.default;
                        case "player_hair":
                            return se.default;
                        case "player_face":
                            return ce.default;
                        case "player_leg":
                            return ue.default;
                        case "player_foot":
                            return he.default;
                        case "player_arm":
                            return de.default;
                        case "player_hand":
                            return _e.default;
                        case "item/wrench_bronze":
                            return pe.default;
                        case "item/wrench_silver":
                            return me.default;
                        case "item/wrench_gold":
                            return fe.default;
                        case "item/wrench_platinum":
                            return ge.default;
                        case "item/wrench_flux":
                            return ye.default
                        }
                    }
                }
                ))
                  , Se = r((function(e, t) {
                    function n(e, t) {
                        return t(e.target.value)
                    }
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.ColorPicker = t.getStyleForBackgroundColor = t.renderAccountType = t.getAccount = t.onRefreshAccount = t.refreshAccount = t.handleInput = void 0,
                    t.handleInput = n;
                    let o, i = [];
                    t.refreshAccount = function(e, t=!0) {
                        "anon" == (null == e ? void 0 : e.type) && (null != e.key ? alert("!!!") : e.key = g.getCookie("anon_key")),
                        "in_use_reset" == (null == e ? void 0 : e.type) && (Ee.openPrompt("Key Locked", "\n            Your anonymous account key was cleared because it was previously converted into a linked account.\n            If you wish to use that account, you should login using the third party service that the account was linked to.\n        "),
                        e = void 0),
                        JSON.stringify(o) != JSON.stringify(e) && (o = e,
                        i.forEach((e=>e(o, t))))
                    }
                    ,
                    t.onRefreshAccount = function(e) {
                        e(o, !1),
                        i.push(e)
                    }
                    ,
                    t.getAccount = function() {
                        return o
                    }
                    ,
                    t.renderAccountType = function(e) {
                        var t;
                        switch (null == e ? void 0 : e.type) {
                        case "registered":
                            let n = I.getPledgeTierInfo(null === (t = e.patreon_info) || void 0 === t ? void 0 : t.tier);
                            return null != n ? _.h("span", {
                                style: "color:" + n.color
                            }, _.h("img", {
                                src: ve.getEarlyImageURL(n.image),
                                height: "16"
                            }), " ", n.name, " (Patron)") : _.h("span", {
                                style: "color:lime;"
                            }, "Linked (Third Party)");
                        case "anon":
                            return _.h("span", {
                                style: "color:orange;"
                            }, "Anonymous Key");
                        default:
                            return _.h("span", {
                                style: "color:yellow;"
                            }, "No Account")
                        }
                    }
                    ,
                    t.getStyleForBackgroundColor = function(e) {
                        let t = {
                            background: R.numberToHexColor(e)
                        };
                        return R.calcLumaX(e) && (t.color = "#000"),
                        t
                    }
                    ;
                    class r extends _.Component {
                        setRGB(e, t, n) {
                            let o = (e << 16) + (t << 8) + (0 | n)
                              , i = R.numberToHexColor(o);
                            this.props.onColorUpdate(i)
                        }
                        setHSL(e, t, n) {
                            function o(o) {
                                let i = (o + e / 30) % 12
                                  , r = t * Math.min(n, 1 - n);
                                return n - r * Math.max(-1, Math.min(Math.min(i - 3, 9 - i), 1))
                            }
                            t /= 100,
                            n /= 100;
                            let i = 255 * o(0)
                              , r = 255 * o(8)
                              , l = 255 * o(4);
                            this.setRGB(i, r, l)
                        }
                        render() {
                            var e;
                            let t, o = this.state.picking;
                            if (null != o) {
                                let i = this.props.color
                                  , r = null !== (e = R.parseColor(this.props.color)) && void 0 !== e ? e : 0
                                  , l = (r >> 16 & 255) / 255
                                  , a = (r >> 8 & 255) / 255
                                  , s = (255 & r) / 255
                                  , c = 0
                                  , u = 0
                                  , h = 0;
                                {
                                    let e = Math.max(Math.max(l, a), s)
                                      , t = e - Math.min(Math.min(l, a), s);
                                    0 == t ? c = 0 : e == l ? c = 60 * (a - s) / t : e == a ? c = 60 * (2 + (s - l) / t) : e == s && (c = 60 * (4 + (l - a) / t)),
                                    c < 0 && (c += 360),
                                    h = e - t / 2,
                                    u = 0 == h || 1 == h ? 0 : (e - h) / Math.min(h, 1 - h) * 100,
                                    h *= 100
                                }
                                let d = e=>{
                                    if (1 == (1 & e.buttons)) {
                                        let t = e.offsetX / 1.5
                                          , n = e.offsetY / 1.5;
                                        t = Math.max(0, Math.min(100, t)),
                                        n = Math.max(0, Math.min(100, n)),
                                        this.setHSL(c, t, 100 - n)
                                    }
                                }
                                  , p = 1.5 * u - 3
                                  , m = 150 - (1.5 * h + 3);
                                t = _.h(_.Fragment, null, _.h("div", {
                                    style: "position:fixed;top:0;bottom:0;left:0;right:0;z-index:9999;",
                                    onMouseDown: ()=>{
                                        this.setState({
                                            picking: void 0
                                        })
                                    }
                                }), _.h("div", {
                                    class: "dark window",
                                    style: `display:inline-block;position:fixed;z-index:10000;top:${o.y}px;left:${o.x}px;transform:translate(0,-100%);`
                                }, _.h("div", {
                                    style: ""
                                }, _.h("input", {
                                    type: "range",
                                    class: "color-slider",
                                    min: 0,
                                    max: 360,
                                    value: c,
                                    onInput: e=>n(e, (e=>this.setHSL(+e, u, h))),
                                    style: "background:linear-gradient(to right,#F00,#FF0,#0F0,#0FF,#00F,#F0F,#F00);"
                                }), _.h("div", {
                                    style: "width:150px;height:150px;margin-top:5px;background:linear-gradient(to right,hsl(" + c + ",0%,50%),hsl(" + c + ",100%,50%));",
                                    onMouseMove: d,
                                    onMouseDown: d
                                }, _.h("div", {
                                    style: "width:100%;height:100%;background:linear-gradient(#FFF,rgba(0,0,0,0),#000);"
                                }, _.h("div", {
                                    class: "color-picker-point",
                                    style: {
                                        top: m + "px",
                                        left: p + "px"
                                    }
                                }))), "Hex: ", _.h("input", {
                                    style: "font-size:12pt;width:100px;box-sizing:border-box;margin-top:5px;vertical-align:bottom;",
                                    maxLength: 7,
                                    value: i,
                                    onInput: e=>n(e, (e=>{
                                        null != R.parseColor(e) && this.props.onColorUpdate(e)
                                    }
                                    ))
                                }), _.h("label", {
                                    class: "btn btn-small",
                                    style: "vertical-align:bottom;"
                                }, "...", _.h("input", {
                                    type: "color",
                                    style: "display:none;",
                                    value: i,
                                    onInput: e=>n(e, (e=>{
                                        null != R.parseColor(e) && this.props.onColorUpdate(e)
                                    }
                                    ))
                                })))))
                            }
                            return _.h("span", null, _.h("button", {
                                class: this.props.small ? "btn-small" : void 0,
                                style: {
                                    color: this.props.color,
                                    margin: this.props.small ? "0" : ""
                                },
                                onClick: e=>{
                                    let t = e.target.getBoundingClientRect()
                                      , n = {
                                        x: t.left,
                                        y: t.top
                                    };
                                    this.setState({
                                        picking: n
                                    })
                                }
                            }, "" != this.props.color ? "███" : "XXX"), t)
                        }
                    }
                    t.ColorPicker = r
                }
                ))
                  , be = r((function(e, t) {
                    function n(e) {
                        return new Promise(((n,o)=>{
                            let i, r = t.SERVERS[e].domain, l = t.CONNECT_PROTO + "//" + r + ":4000/", a = new WebSocket(l);
                            a.onopen = ()=>{
                                i = performance.now(),
                                a.send("yo")
                            }
                            ,
                            a.onmessage = r=>{
                                let l = r.data;
                                if (a.close(),
                                "" != l && null != i) {
                                    let o = performance.now() - i
                                      , r = JSON.parse(l);
                                    r.time = o,
                                    t.SERVERS[e].player_count = r.player_count,
                                    t.SERVERS[e].max_player_count = r.player_max,
                                    t.SERVERS[e].ping = r.time;
                                    let a = t.SERVERS[e].update_callback;
                                    null != a && a(),
                                    n(r)
                                } else
                                    o(Error("bad ping"))
                            }
                        }
                        ))
                    }
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.updateServerPlayers = t.pingServers = t.QUERY_DOMAIN_SIMPLE = t.QUERY_DOMAIN = t.SERVERS = t.CONNECT_PROTO = void 0,
                    t.CONNECT_PROTO = "wss:",
                    f.getHostName() == d.LOCAL_DOMAIN ? (t.SERVERS = [{
                        index: 0,
                        domain: d.LOCAL_DOMAIN,
                        description: "Local Test 1",
                        player_count: 0,
                        max_player_count: 0
                    }, {
                        index: 1,
                        domain: d.LOCAL_DOMAIN,
                        description: "Local Test 2",
                        player_count: 0,
                        max_player_count: 0
                    }, {
                        index: 2,
                        domain: d.LOCAL_DOMAIN,
                        description: "Local Test 3",
                        player_count: 0,
                        max_player_count: 0
                    }],
                    t.QUERY_DOMAIN = d.LOCAL_DOMAIN,
                    t.QUERY_DOMAIN_SIMPLE = d.LOCAL_DOMAIN) : f.getHostName() == d.TEST_DOMAIN ? (t.SERVERS = [{
                        index: 0,
                        domain: d.TEST_GAME_DOMAIN,
                        description: "Public Test",
                        player_count: 0,
                        max_player_count: 0
                    }],
                    t.QUERY_DOMAIN = d.TEST_MASTER_DOMAIN,
                    t.QUERY_DOMAIN_SIMPLE = d.TEST_DOMAIN) : (t.SERVERS = [{
                        index: 0,
                        domain: d.GAME_DOMAINS[0],
                        description: d.GAME_SERVER_NAMES[0],
                        player_count: 0,
                        max_player_count: 0
                    }, {
                        index: 1,
                        domain: d.GAME_DOMAINS[1],
                        description: d.GAME_SERVER_NAMES[1],
                        player_count: 0,
                        max_player_count: 0
                    }, {
                        index: 2,
                        domain: d.GAME_DOMAINS[2],
                        description: d.GAME_SERVER_NAMES[2],
                        player_count: 0,
                        max_player_count: 0
                    }],
                    t.QUERY_DOMAIN = d.MASTER_DOMAIN,
                    t.QUERY_DOMAIN_SIMPLE = d.BASE_DOMAIN),
                    t.pingServers = function() {
                        let e = [];
                        for (let o = 0; o < t.SERVERS.length; o++)
                            e.push(E.settle(E.timeout(5e3, n(o))));
                        return Promise.all(e)
                    }
                    ,
                    t.updateServerPlayers = function(e, n, o) {
                        t.SERVERS[e].player_count = n,
                        t.SERVERS[e].max_player_count = o;
                        let i = t.SERVERS[e].update_callback;
                        null != i && i()
                    }
                }
                ))
                  , Ee = r((function(e, t) {
                    var o = n && n.__awaiter || function(e, t, n, o) {
                        return new (n || (n = Promise))((function(i, r) {
                            function l(e) {
                                try {
                                    s(o.next(e))
                                } catch (e) {
                                    r(e)
                                }
                            }
                            function a(e) {
                                try {
                                    s(o.throw(e))
                                } catch (e) {
                                    r(e)
                                }
                            }
                            function s(e) {
                                var t;
                                e.done ? i(e.value) : (t = e.value,
                                t instanceof n ? t : new n((function(e) {
                                    e(t)
                                }
                                ))).then(l, a)
                            }
                            s((o = o.apply(e, t || [])).next())
                        }
                        ))
                    }
                    ;
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.openPromptRename = t.openPromptEx = t.PromptType = t.openPrompt = t.openLogin = t.openRestoreKey = void 0;
                    let i = !1;
                    function r() {
                        i = !1,
                        _.render(_.h("div", {
                            style: "display:none;"
                        }), document.body)
                    }
                    function l(e, t=!1, n=!1) {
                        if (i)
                            return;
                        i = !0;
                        let o = document.activeElement;
                        o instanceof HTMLElement && o.blur();
                        let l = _.h("div", {
                            class: "modal-container"
                        }, _.h("div", {
                            class: "modal-window window darker",
                            style: t ? "background: #4f1c1c !important;" : void 0
                        }, n ? null : _.h("div", {
                            class: "close"
                        }, _.h("button", {
                            class: "btn-red",
                            onClick: ()=>r()
                        }, "Close")), e));
                        _.render(l, document.body)
                    }
                    class a extends _.Component {
                        constructor() {
                            super(),
                            this.state = {
                                key: ""
                            }
                        }
                        render() {
                            let e = E.checkKey(this.state.key);
                            return _.h("div", null, _.h("h2", null, "Restore Key"), _.h("div", {
                                class: "warning-text-2"
                            }, "Warning: This will overwrite your current key. Please go back and save your current key if you plan to keep using it."), _.h("p", null, _.h("b", null, "Key: ", _.h("input", {
                                value: this.state.key,
                                onInput: e=>Se.handleInput(e, (e=>this.setState({
                                    key: e
                                }))),
                                maxLength: 24
                            }))), _.h("p", null, e ? _.h("b", null, "Key looks okay.") : _.h("b", {
                                class: "warning-text"
                            }, "Key not valid.")), _.h("button", {
                                class: "btn-green",
                                disabled: !e,
                                onClick: ()=>{
                                    g.setCookie("anon_key", this.state.key),
                                    location.reload()
                                }
                            }, "Submit & Reload Page"))
                        }
                    }
                    const s = "Linking to an account using a school email, throwaway email, or any other email address that you might lose access to could result in the loss of your account.";
                    class c extends _.Component {
                        componentWillUnmount() {
                            this.closeLoginWindow()
                        }
                        closeLoginWindow() {
                            null != this.state.login_window && this.state.login_window.close(),
                            null != this.state.window_watcher && clearInterval(this.state.window_watcher),
                            this.setState({
                                login_window: void 0,
                                window_watcher: void 0
                            })
                        }
                        loginWith(e) {
                            let t = window.open(function(e) {
                                return "//" + be.QUERY_DOMAIN + ":4100/login/with/" + e
                            }(e), "_blank", "height=800,width=400");
                            if (null == t)
                                return void this.setState({
                                    error: "Failed to open login window. Maybe your popup blocker blocked it?"
                                });
                            let n = setInterval((()=>o(this, void 0, void 0, (function*() {
                                if (null == t ? void 0 : t.closed) {
                                    clearInterval(n);
                                    try {
                                        let e = yield fetch("//" + be.QUERY_DOMAIN + ":4100/login/status", {
                                            method: "POST",
                                            credentials: "include"
                                        })
                                          , t = yield e.json();
                                        t.key_cleared && Se.refreshAccount(void 0),
                                        this.closeLoginWindow(),
                                        this.setState(t)
                                    } catch (e) {
                                        this.setState({
                                            error: "Failed to fetch login info from server."
                                        })
                                    }
                                }
                            }
                            ))), 100);
                            this.setState({
                                login_window: t,
                                window_watcher: n,
                                login_service: e
                            })
                        }
                        reset() {
                            this.closeLoginWindow(),
                            this.setState({
                                error: void 0,
                                login_status: void 0,
                                username: void 0,
                                submit_wait: void 0,
                                prompt_email_confirm: void 0,
                                email_confirmed: void 0
                            })
                        }
                        submit(e) {
                            return o(this, void 0, void 0, (function*() {
                                this.setState({
                                    submit_wait: !0
                                });
                                let t = this.state.username
                                  , n = {
                                    state: e,
                                    username: t
                                }
                                  , o = yield fetch("//" + be.QUERY_DOMAIN + ":4100/login/complete", {
                                    method: "POST",
                                    credentials: "include",
                                    body: JSON.stringify(n)
                                })
                                  , i = yield o.json();
                                i.okay && (null != this.state.login_service && g.setCookie("last_login_service", this.state.login_service),
                                Se.refreshAccount(i.account),
                                r()),
                                this.setState({
                                    submit_wait: void 0
                                }),
                                this.setState(i)
                            }
                            ))
                        }
                        renderButton(e, t) {
                            let n = e == t;
                            const o = {
                                discord: _.h("button", {
                                    onClick: ()=>this.loginWith("discord")
                                }, _.h("i", {
                                    class: "fab big-icon fa-discord"
                                }), " Sign in with Discord"),
                                google: _.h("button", {
                                    onClick: ()=>this.loginWith("google"),
                                    class: "btn-google"
                                })
                            };
                            return _.h("div", {
                                style: n ? "border:1px solid #0F0;color:#0F0;border-radius:4px;" : void 0
                            }, o[e], n && "← Last Used")
                        }
                        renderStage() {
                            var e;
                            if (null != this.state.error)
                                return _.h("div", {
                                    class: "warning-text"
                                }, _.h("p", null, this.state.error), _.h("button", {
                                    onClick: ()=>{
                                        this.reset()
                                    }
                                }, "Back"));
                            if (null != this.state.login_status) {
                                let t, n = e=>{
                                    let t = e.target.value;
                                    this.setState({
                                        username: t,
                                        validate_error: void 0
                                    })
                                }
                                , o = E.validateUsername(null !== (e = this.state.username) && void 0 !== e ? e : "aaaa");
                                t = this.state.submit_wait ? _.h("p", null, _.h("b", null, "Submitting...")) : null != this.state.validate_error ? _.h("p", {
                                    class: "warning-text"
                                }, this.state.validate_error) : null != o ? _.h("p", {
                                    class: "warning-text"
                                }, o) : _.h("p", null, _.h("b", null, "Name looks okay."));
                                let i, r = !1;
                                return this.state.prompt_email_confirm && (this.state.email_confirmed || (r = !0),
                                i = _.h("div", {
                                    class: "warning-text"
                                }, _.h("p", null, "The email address connected to this account has an uncommon domain. ", s), _.h("label", null, _.h("input", {
                                    type: "checkbox",
                                    checked: this.state.email_confirmed,
                                    onClick: ()=>this.setState({
                                        email_confirmed: !this.state.email_confirmed
                                    })
                                }), "Are you sure you want to use this account?"))),
                                _.h("div", null, _.h("div", {
                                    dangerouslySetInnerHTML: {
                                        __html: this.state.login_status.html
                                    }
                                }), this.state.login_status.name_prompt && _.h("div", null, _.h("p", null, "Please choose a unique name for this account. This will be shown to other players and currently can not be changed. It may contain latin letters (a-z), numerals (0-9), and spaces ( )."), _.h("p", null, _.h("b", null, "Username:"), " ", _.h("input", {
                                    value: this.state.username,
                                    onInput: n,
                                    maxLength: 20
                                })), i, t), _.h("button", {
                                    onClick: ()=>{
                                        this.reset()
                                    }
                                }, "Back"), _.h("button", {
                                    onClick: ()=>{
                                        var e;
                                        this.submit(null === (e = this.state.login_status) || void 0 === e ? void 0 : e.state)
                                    }
                                    ,
                                    class: "btn-green",
                                    disabled: this.state.submit_wait || null != o || r
                                }, "Complete"))
                            }
                            if (null != this.state.login_window)
                                return _.h("div", null, _.h("p", null, _.h("i", null, "Please login using the prompt.")), _.h("button", {
                                    onClick: ()=>{
                                        this.reset()
                                    }
                                }, "Back"));
                            let t = g.getCookie("last_login_service");
                            return _.h("div", null, _.h("p", null, "Link your account to a third party account for additional security. Your saved ships and ranks will be safely transferred. Once complete, your anonymous account key will no longer be usable and you must login via the linked third party account."), _.h("p", {
                                class: "warning-text"
                            }, "Warning: ", s), _.h("p", null, _.h("i", null, "Note: Dredark is not affiliated with any of these services.")), this.renderButton("discord", t), this.renderButton("google", t))
                        }
                        render() {
                            return _.h("div", null, _.h("h2", null, "Login / Convert Account"), this.renderStage())
                        }
                    }
                    class u extends _.Component {
                        render() {
                            let e = this.props.callback
                              , t = this.props.fail_callback
                              , n = null != t ? ()=>{
                                t(),
                                r()
                            }
                            : r;
                            return _.h("div", null, _.h("h2", null, this.props.title), this.props.type & p.Formatted ? _.h("pre", null, this.props.msg) : _.h("p", null, this.props.msg), null != e ? this.props.type & p.AcceptOnly ? _.h("div", {
                                class: "center-container-h"
                            }, _.h("button", {
                                class: "btn-green btn-large",
                                onClick: ()=>{
                                    e(),
                                    r()
                                }
                            }, "Accept")) : _.h("div", null, _.h("button", {
                                class: "btn-green",
                                onClick: ()=>{
                                    e(),
                                    r()
                                }
                            }, "Okay"), _.h("button", {
                                class: "btn-red",
                                onClick: n
                            }, "Cancel")) : this.props.type & p.NoClose ? null : _.h("div", null, _.h("button", {
                                onClick: n
                            }, "Okay")))
                        }
                    }
                    class h extends _.Component {
                        constructor(e) {
                            super(e),
                            this.state = {
                                name: e.name,
                                color: e.color
                            }
                        }
                        render() {
                            return _.h("div", null, this.props.is_create ? _.h("div", {
                                style: "height: 150px;"
                            }, _.h("h2", null, "New Ship"), _.h("p", null, "Select a name and color for your new ship.")) : _.h("div", {
                                style: "height: 150px;"
                            }, _.h("h2", null, "Rename Ship")), _.h("input", {
                                style: "margin-bottom: 5px",
                                maxLength: d.MAX_TEAM_LENGTH,
                                value: this.state.name,
                                onInput: e=>Se.handleInput(e, (e=>this.setState({
                                    name: e
                                })))
                            }), _.h(Se.ColorPicker, {
                                color: this.state.color,
                                onColorUpdate: e=>this.setState({
                                    color: e
                                })
                            }), _.h("br", null), _.h("button", {
                                class: "btn-green",
                                onClick: ()=>{
                                    this.props.callback(this.state.name, this.state.color),
                                    r()
                                }
                            }, this.props.is_create ? "Launch" : "Rename"), _.h("button", {
                                class: "btn-red",
                                onClick: r
                            }, "Cancel"))
                        }
                    }
                    var p;
                    t.openRestoreKey = function() {
                        l(_.h(a, null))
                    }
                    ,
                    t.openLogin = function() {
                        l(_.h(c, null))
                    }
                    ,
                    t.openPrompt = function(e, t, n, o=!1, i=!1, r) {
                        let a = 0;
                        o && (a |= p.Danger),
                        i && (a |= p.NoClose | p.Formatted),
                        l(_.h(u, {
                            title: e,
                            msg: t,
                            type: a,
                            callback: n,
                            fail_callback: r
                        }), o, i)
                    }
                    ,
                    function(e) {
                        e[e.AcceptOnly = 4] = "AcceptOnly",
                        e[e.Danger = 8] = "Danger",
                        e[e.NoClose = 16] = "NoClose",
                        e[e.Formatted = 32] = "Formatted"
                    }(p = t.PromptType || (t.PromptType = {})),
                    t.openPromptEx = function(e, t, n, o, i) {
                        l(_.h(u, {
                            title: e,
                            msg: t,
                            type: n,
                            callback: o,
                            fail_callback: i
                        }), !!(n & p.Danger), !!(n & p.NoClose))
                    }
                    ,
                    t.openPromptRename = function(e, t, n, o=!1) {
                        l(_.h(h, {
                            callback: n,
                            name: e,
                            color: t,
                            is_create: o
                        }))
                    }
                }
                ))
                  , Ae = r((function(e, t) {
                    var o = n && n.__awaiter || function(e, t, n, o) {
                        return new (n || (n = Promise))((function(i, r) {
                            function l(e) {
                                try {
                                    s(o.next(e))
                                } catch (e) {
                                    r(e)
                                }
                            }
                            function a(e) {
                                try {
                                    s(o.throw(e))
                                } catch (e) {
                                    r(e)
                                }
                            }
                            function s(e) {
                                var t;
                                e.done ? i(e.value) : (t = e.value,
                                t instanceof n ? t : new n((function(e) {
                                    e(t)
                                }
                                ))).then(l, a)
                            }
                            s((o = o.apply(e, t || [])).next())
                        }
                        ))
                    }
                    ;
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.toggleUI = t.setModDBBroken = t.setFilePanelFiles = void 0;
                    const i = y;
                    let r = h.RUN_ON_CLIENT((()=>document.getElementById("new-ui-left")));
                    class l extends _.Component {
                        render() {
                            return _.h("div", {
                                class: "window",
                                style: {
                                    display: this.props.active ? "" : "none"
                                }
                            }, _.h("iframe", {
                                src: this.props.page
                            }), _.h("div", {
                                class: "close"
                            }, _.h("button", {
                                class: "btn-grey",
                                onClick: ()=>{
                                    window.open(this.props.page, "_blank", "height=600,width=400"),
                                    b()
                                }
                            }, "Pop Out"), _.h("button", {
                                class: "btn-red",
                                onClick: ()=>b()
                            }, "Close")))
                        }
                    }
                    class a extends _.Component {
                        render() {
                            return _.h("p", null, _.h("b", null, this.props.label, ":"), " ", _.h("input", {
                                type: "range",
                                step: "0.01",
                                min: "0",
                                max: "1",
                                style: "vertical-align:middle;",
                                value: this.props.value,
                                onInput: e=>Se.handleInput(e, (e=>this.props.onUpdate(+e)))
                            }), " ", Math.round(100 * this.props.value), "%")
                        }
                    }
                    class s extends _.Component {
                        render() {
                            let e = this.props.options.map((([e,t])=>_.h("option", {
                                value: t
                            }, e)));
                            return _.h("p", null, _.h("b", null, this.props.label, ":"), " ", _.h("select", {
                                value: this.props.value,
                                onInput: e=>Se.handleInput(e, (e=>this.props.onUpdate(+e)))
                            }, e))
                        }
                    }
                    class c extends _.Component {
                        renderAnon() {
                            var e, t, n, o;
                            if ("registered" == (null === (e = this.props.account) || void 0 === e ? void 0 : e.type))
                                return null;
                            let i = null
                              , r = null;
                            return "anon" == (null === (t = this.props.account) || void 0 === t ? void 0 : t.type) && (i = this.state.show_key ? _.h("code", {
                                class: "copy-box"
                            }, this.props.account.key) : _.h("code", {
                                class: "copy-box disable"
                            }, E.censorKey(this.props.account.key)),
                            r = _.h("code", {
                                class: "copy-box",
                                style: Se.getStyleForBackgroundColor(this.props.account.discrim_color)
                            }, this.props.account.discrim)),
                            _.h("div", null, _.h("p", null, _.h("button", {
                                class: "btn-green",
                                onClick: Ee.openLogin
                            }, "Login / Convert Account...")), _.h("p", {
                                class: "warning-text-2"
                            }, "Continued use of anonymous accounts is not recommended. There is no recovery process for lost or stolen keys. Please consider logging in via a third-party service using the button above. The options below are provided for convenience but continued use of them is not advised."), _.h("p", null, _.h("b", null, "Key:"), " ", i), _.h("p", null, _.h("b", null, "Discriminator:"), " ", _.h("code", null, r)), _.h("p", {
                                class: "warning-text"
                            }, "Do not share your key with anyone. Stealing or sharing keys of other players is grounds for a permanent ban."), _.h("p", null, "anon" == (null === (n = this.props.account) || void 0 === n ? void 0 : n.type) && _.h("button", {
                                class: "btn-small",
                                onClick: ()=>navigator.clipboard.writeText(this.props.account.key)
                            }, "Copy Key to Clipboard"), "anon" == (null === (o = this.props.account) || void 0 === o ? void 0 : o.type) && _.h("button", {
                                class: "btn-small btn-orange",
                                onClick: ()=>this.setState({
                                    show_key: !this.state.show_key
                                })
                            }, "Show / Hide Key"), _.h("button", {
                                class: "btn-small btn-red",
                                onClick: Ee.openRestoreKey
                            }, "Restore Old Anonymous Key")))
                        }
                        renderRegistered() {
                            var e, t;
                            if ("registered" != (null === (e = this.props.account) || void 0 === e ? void 0 : e.type))
                                return null;
                            let n = null
                              , i = null
                              , r = null;
                            if (this.state.show_info ? (n = _.h("code", {
                                class: "copy-box"
                            }, this.props.account.identity),
                            i = _.h("code", {
                                class: "copy-box"
                            }, this.props.account.email),
                            null != this.props.account.patreon_info && (r = _.h("a", {
                                target: "_blank",
                                href: "https://www.patreon.com/user?u=" + this.props.account.patreon_info.account_id
                            }, _.h("code", {
                                class: "copy-box"
                            }, this.props.account.patreon_info.account_name)))) : (n = _.h("code", {
                                class: "copy-box disable"
                            }, "********************"),
                            i = _.h("code", {
                                class: "copy-box disable"
                            }, "********************"),
                            null != this.props.account.patreon_info && (r = _.h("code", {
                                class: "copy-box disable"
                            }, "********************"))),
                            null == r) {
                                r = _.h("span", null, _.h("b", null, "None."), " ", _.h("button", {
                                    class: "btn-small btn-green",
                                    onClick: function() {
                                        window.open("/connect/with/patreon/info", "_blank", "height=600,width=400")
                                    }
                                }, "Connect"))
                            }
                            return _.h("div", null, _.h("p", null, _.h("b", null, "Username:"), " ", _.h("code", {
                                class: "copy-box",
                                style: Se.getStyleForBackgroundColor(null !== (t = this.props.account.username_color) && void 0 !== t ? t : 0)
                            }, this.props.account.username)), _.h("p", null, _.h("b", null, "Linked Account:"), " ", n), _.h("p", null, _.h("b", null, "Linked Email:"), " ", i), _.h("p", null, _.h("b", null, "Patreon Account:"), " ", r), _.h("p", null, _.h("button", {
                                class: "btn-small btn-orange",
                                onClick: ()=>this.setState({
                                    show_info: !this.state.show_info
                                })
                            }, "Show / Hide Linked Account Info"), _.h("button", {
                                class: "btn-small btn-orange",
                                onClick: ()=>o(this, void 0, void 0, (function*() {
                                    yield fetch("//" + be.QUERY_DOMAIN + ":4100/login/logout", {
                                        method: "POST",
                                        credentials: "include"
                                    }),
                                    location.reload()
                                }
                                ))
                            }, "Logout"), _.h("button", {
                                class: "btn-small btn-red",
                                onClick: ()=>{
                                    Ee.openPrompt("Logout", "Do you want to log out from this account on all devices?", (()=>o(this, void 0, void 0, (function*() {
                                        yield fetch("//" + be.QUERY_DOMAIN + ":4100/login/logout_all", {
                                            method: "POST",
                                            credentials: "include"
                                        }),
                                        location.reload()
                                    }
                                    ))))
                                }
                            }, "Logout All Devices")), _.h("p", null, _.h("label", null, _.h("b", null, "Hide My Special Tags:"), _.h("input", {
                                type: "checkbox",
                                checked: this.props.hide_tags,
                                onInput: e=>{
                                    if (null != e && e.target instanceof HTMLInputElement) {
                                        let t = e.target.checked;
                                        this.props.set_hide_tags(t)
                                    }
                                }
                            }))))
                        }
                        render() {
                            return _.h("div", null, _.h("p", null, _.h("b", null, "Type: ", Se.renderAccountType(this.props.account))), this.renderAnon(), this.renderRegistered())
                        }
                    }
                    class u extends _.Component {
                        constructor(e) {
                            super(e),
                            this.state = y.cloneUserSettings()
                        }
                        componentDidMount() {
                            Se.onRefreshAccount((e=>{
                                this.setState({
                                    account: e
                                })
                            }
                            ))
                        }
                        render() {
                            return _.h("div", {
                                class: "window darker"
                            }, _.h("div", {
                                class: "close"
                            }, _.h("button", {
                                class: "btn-red",
                                onClick: ()=>b()
                            }, "Close")), _.h("h2", null, "Settings"), _.h("section", null, _.h("h3", null, "Account"), _.h(c, {
                                account: this.state.account,
                                hide_tags: this.state.hide_game_rank,
                                set_hide_tags: e=>{
                                    this.setState({
                                        hide_game_rank: e
                                    }),
                                    i.USER_SETTINGS.hide_game_rank = e
                                }
                            })), _.h("section", null, _.h("h3", null, "Audio"), _.h(a, {
                                label: "Volume",
                                value: this.state.volume,
                                onUpdate: e=>{
                                    this.setState({
                                        volume: e
                                    }),
                                    i.USER_SETTINGS.volume = e
                                }
                            })), _.h("section", null, _.h("h3", null, "Display / Interface"), _.h(s, {
                                label: "Profanity Filter",
                                options: [["Strict", y.ProfanityMode.Strict], ["Moderate", y.ProfanityMode.Moderate]],
                                value: this.state.profanity_mode,
                                onUpdate: e=>{
                                    this.setState({
                                        profanity_mode: e
                                    }),
                                    i.USER_SETTINGS.profanity_mode = e
                                }
                            }), _.h("p", null, "Strict mode attempts to block all profanity, while moderate mode only attempts to block extremely offensive and obscene language. If you don't want to deal with the filter, use external communications."), _.h("p", null, _.h("label", null, _.h("b", null, "Always show turret ammo count:"), _.h("input", {
                                type: "checkbox",
                                checked: this.state.always_show_ammo,
                                onInput: e=>{
                                    if (null != e && e.target instanceof HTMLInputElement) {
                                        let t = e.target.checked;
                                        this.setState({
                                            always_show_ammo: t
                                        }),
                                        i.USER_SETTINGS.always_show_ammo = t
                                    }
                                }
                            }))), _.h("button", {
                                onClick: ()=>b("mod_assets")
                            }, "Modify Assets")))
                        }
                    }
                    let d = []
                      , p = [];
                    t.setFilePanelFiles = function(e) {
                        d = e,
                        p.forEach((e=>{
                            e.refreshFiles()
                        }
                        ))
                    }
                    ;
                    let m, f = !1;
                    t.setModDBBroken = function() {
                        f = !0
                    }
                    ;
                    class g extends _.Component {
                        constructor(e) {
                            super(e),
                            this.state = {
                                files: this.filterFiles(d),
                                hilight: !1
                            }
                        }
                        componentDidMount() {
                            p.push(this)
                        }
                        getDirPath() {
                            var e;
                            let t = this.props.desc;
                            return (null !== (e = this.props.base) && void 0 !== e ? e : "/") + t.name + "/"
                        }
                        filterFiles(e) {
                            let t = this.getDirPath()
                              , n = e.filter((e=>e.directory == t));
                            return n.sort(((e,t)=>e.name.localeCompare(t.name))),
                            n
                        }
                        refreshFiles() {
                            this.setState({
                                files: this.filterFiles(d)
                            })
                        }
                        render() {
                            var e;
                            let t = this.getDirPath()
                              , n = this.state.files.map((e=>_.h("tr", {
                                class: "file-pane-file",
                                draggable: !0,
                                onDragStart: t=>{
                                    null != t.dataTransfer && (t.dataTransfer.setData("DownloadURL", e.dl_url),
                                    t.dataTransfer.setData("mod_file", e.path))
                                }
                            }, _.h("td", {
                                class: "file-pane-img",
                                style: `background-image:url('${e.url}')`
                            }), _.h("td", {
                                class: "file-pane-name"
                            }, e.name), _.h("td", null, _.h("button", {
                                class: "btn-red btn-small",
                                onClick: ()=>{
                                    let n = t + e.name;
                                    Te.modFileDB.deleteFile(n)
                                }
                            }, "X")))))
                              , o = null === (e = this.props.desc.subdirs) || void 0 === e ? void 0 : e.map((e=>_.h(g, {
                                desc: e,
                                base: t
                            })));
                            return _.h("div", {
                                class: "file-pane",
                                style: this.state.hilight ? "background:#116" : "background:#111",
                                onDragOver: e=>{
                                    this.setState({
                                        hilight: !0
                                    }),
                                    e.preventDefault(),
                                    e.stopPropagation()
                                }
                                ,
                                onDrop: e=>{
                                    if (this.setState({
                                        hilight: !1
                                    }),
                                    null != e.dataTransfer) {
                                        let n = e.dataTransfer.getData("mod_file");
                                        if ("" != n) {
                                            let e = n.split("/").pop()
                                              , o = t + e;
                                            Te.modFileDB.moveFile(n, o)
                                        } else
                                            for (let n = 0; n < e.dataTransfer.items.length; n++) {
                                                let o = e.dataTransfer.items[n];
                                                if ("file" == o.kind) {
                                                    let e = o.getAsFile();
                                                    if (null != e) {
                                                        let n = t + e.name;
                                                        Te.modFileDB.saveFile(e, n)
                                                    }
                                                }
                                                if (Te.modFileDB.tryImport(o))
                                                    break
                                            }
                                    }
                                    e.preventDefault(),
                                    e.stopPropagation()
                                }
                                ,
                                onDragLeave: ()=>{
                                    this.setState({
                                        hilight: !1
                                    })
                                }
                            }, _.h("h3", null, t), 0 == n.length && _.h("p", null, "Drag Files Here"), _.h("table", {
                                style: "border-collapse: collapse;"
                            }, n), o)
                        }
                    }
                    class v extends _.Component {
                        constructor(e) {
                            super(e),
                            this.state = {
                                can_export: !1
                            },
                            this.prepareZipLib()
                        }
                        prepareZipLib() {
                            return o(this, void 0, void 0, (function*() {
                                yield Te.modFileDB.prepareZipLib(),
                                this.setState({
                                    can_export: !0
                                })
                            }
                            ))
                        }
                        render() {
                            return f ? _.h("div", {
                                class: "window darker"
                            }, _.h("div", {
                                class: "close"
                            }, _.h("button", {
                                class: "btn-red",
                                onClick: ()=>b()
                            }, "Close")), _.h("h2", null, "Asset Modification"), _.h("p", {
                                class: "warning-text"
                            }, "Failed to load mod file DB. Running the game in private mode can cause this in Firefox.")) : _.h("div", {
                                class: "window darker"
                            }, _.h("div", {
                                class: "close"
                            }, _.h("button", {
                                class: "btn-red",
                                onClick: ()=>b()
                            }, "Close")), _.h("h2", null, "Asset Modification"), _.h("p", null, "Original files and names can be found ", _.h("a", {
                                href: "/img/"
                            }, "here"), ". Only images can currently be modified. Most sprites are scaled to 40 pixels/tile - changing the scale may be supported in the future. Drag files into the panes below. File names must match base asset names. Extensions do not need to match, but are limited to PNG and SVG. The game graphics should update in real-time to reflect changes."), _.h("p", null, "Mods are stored locally on your machine, but can be exported as zip archives. Drag an exported zip or folder anywhere in the game window to import an entire mod. Mods might be broken by updates."), _.h("button", {
                                onClick: ()=>{
                                    Te.modFileDB.reloadFiles()
                                }
                            }, "Refresh ↻"), _.h("button", {
                                onClick: ()=>{
                                    Te.modFileDB.exportZip()
                                }
                                ,
                                disabled: !this.state.can_export
                            }, "Export Mod ↗"), _.h("button", {
                                onClick: ()=>{
                                    Ee.openPrompt("Clear Mod Assets?", "Are you sure you want to clear all your saved mod assets?", (()=>{
                                        Te.modFileDB.deleteAllFiles()
                                    }
                                    ))
                                }
                                ,
                                class: "btn-red"
                            }, "Clear X"), _.h(g, {
                                desc: {
                                    name: "img",
                                    subdirs: [{
                                        name: "item"
                                    }]
                                }
                            }))
                        }
                    }
                    class S extends _.Component {
                        constructor() {
                            super(...arguments),
                            this.cached_uis = []
                        }
                        render() {
                            let e = this.props.ui;
                            null == e || this.cached_uis.includes(e) || this.cached_uis.push(e);
                            let t = this.cached_uis.map((t=>{
                                switch (t) {
                                case "help":
                                    return _.h(l, {
                                        page: "help.html",
                                        active: t == e
                                    });
                                case "quickstart":
                                    return _.h(l, {
                                        page: "quickstart.html",
                                        active: t == e
                                    });
                                case "changelog":
                                    return _.h(l, {
                                        page: "changelog.html",
                                        active: t == e
                                    });
                                case "map":
                                    return _.h(l, {
                                        page: "map.svg",
                                        active: t == e
                                    });
                                case "settings":
                                    return t == e ? _.h(u, null) : null;
                                case "mod_assets":
                                    return t == e ? _.h(v, null) : null;
                                default:
                                    return null
                                }
                            }
                            ));
                            return _.h(_.Fragment, null, t)
                        }
                    }
                    function b(e) {
                        m = m == e ? void 0 : e,
                        _.render(_.h(S, {
                            ui: m
                        }), r)
                    }
                    t.toggleUI = b,
                    h.RUN_ON_CLIENT((()=>{
                        window.toggleUI = b
                    }
                    ))
                }
                ));
                var we = i(Object.freeze({
                    __proto__: null,
                    default: async function() {
                        return await new Promise((function(t, n) {
                            e(["./jszip.min.jtTqS33A2NRINMaxpdTG"], t, n)
                        }
                        )).then((function(e) {
                            return e.jszip_min
                        }
                        ))
                    }
                }))
                  , Te = r((function(e, t) {
                    var o = n && n.__awaiter || function(e, t, n, o) {
                        return new (n || (n = Promise))((function(i, r) {
                            function l(e) {
                                try {
                                    s(o.next(e))
                                } catch (e) {
                                    r(e)
                                }
                            }
                            function a(e) {
                                try {
                                    s(o.throw(e))
                                } catch (e) {
                                    r(e)
                                }
                            }
                            function s(e) {
                                var t;
                                e.done ? i(e.value) : (t = e.value,
                                t instanceof n ? t : new n((function(e) {
                                    e(t)
                                }
                                ))).then(l, a)
                            }
                            s((o = o.apply(e, t || [])).next())
                        }
                        ))
                    }
                    ;
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.modFileDB = void 0;
                    let i = h.RUN_ON_CLIENT((()=>we.default));
                    class r {
                        constructor() {
                            this.files = {};
                            let e = indexedDB.open("dredark", 1);
                            e.onsuccess = e=>{
                                this.database = e.target.result,
                                this.reloadFiles()
                            }
                            ,
                            e.onupgradeneeded = e=>{
                                e.target.result.createObjectStore("mod_files", {
                                    keyPath: "path"
                                })
                            }
                            ,
                            e.onerror = e=>{
                                Ae.setModDBBroken()
                            }
                        }
                        prepareZipLib() {
                            return o(this, void 0, void 0, (function*() {
                                null == this.zipCtor && (this.zipCtor = (yield i()).default)
                            }
                            ))
                        }
                        splitPath(e) {
                            let t = e.split("/")
                              , n = t[t.length - 1];
                            return {
                                name: n,
                                directory: e.substring(0, e.length - n.length)
                            }
                        }
                        updateFile(e) {
                            let t = e.file
                              , n = e.path
                              , o = URL.createObjectURL(t)
                              , {name: i, directory: r} = this.splitPath(n)
                              , a = {
                                file: t,
                                path: n,
                                name: i,
                                directory: r,
                                url: o,
                                dl_url: t.type + ":" + i + ":" + o
                            }
                              , s = this.files[a.path];
                            null != s && URL.revokeObjectURL(s.url),
                            this.files[a.path] = a;
                            let c = l(a.path);
                            null != c && T.graphics.clearImageURL(c)
                        }
                        saveFile(e, t, n=!0) {
                            if (null == this.database || !this.isFileTypeWhitelisted(t))
                                return;
                            let o = {
                                file: e,
                                path: t
                            };
                            this.database.transaction("mod_files", "readwrite").objectStore("mod_files").put(o),
                            this.updateFile(o),
                            n && this.syncFilesWithUI()
                        }
                        moveFile(e, t) {
                            if (e == t)
                                return;
                            let n = this.files[e];
                            null != n && (this.saveFile(n.file, t, !1),
                            this.deleteFile(e),
                            this.syncFilesWithUI())
                        }
                        deleteFile(e) {
                            if (null == this.database)
                                return;
                            this.database.transaction("mod_files", "readwrite").objectStore("mod_files").delete(e);
                            let t = this.files[e];
                            null != t && (URL.revokeObjectURL(t.url),
                            delete this.files[e]);
                            let n = l(e);
                            null != n && T.graphics.clearImageURL(n),
                            this.syncFilesWithUI()
                        }
                        deleteAllFiles() {
                            if (null == this.database)
                                return;
                            this.database.transaction("mod_files", "readwrite").objectStore("mod_files").clear(),
                            T.graphics.clearAllImageURLS(),
                            this.files = {},
                            this.syncFilesWithUI()
                        }
                        reloadFiles() {
                            if (null == this.database)
                                return;
                            let e = this.database.transaction("mod_files", "readonly").objectStore("mod_files").getAll();
                            e.onsuccess = t=>{
                                T.graphics.clearAllImageURLS(),
                                e.result.forEach((e=>this.updateFile(e))),
                                this.syncFilesWithUI()
                            }
                        }
                        syncFilesWithUI() {
                            let e = Object.values(this.files);
                            Ae.setFilePanelFiles(e)
                        }
                        getFileURL(e) {
                            let t = this.files[e];
                            return null != t ? t.url : null
                        }
                        isDirWhitelisted(e) {
                            return "/img/" == e || "/img/item/" == e
                        }
                        isFileTypeWhitelisted(e) {
                            return e.endsWith(".png") || e.endsWith(".svg")
                        }
                        importDir(e, t) {
                            if (!this.isDirWhitelisted(e) && "/" != e)
                                return;
                            t.createReader().readEntries((t=>{
                                t.forEach((t=>{
                                    if (t.isDirectory)
                                        this.importDir(e + t.name + "/", t);
                                    else {
                                        let n = e + t.name;
                                        t.file((e=>{
                                            this.saveFile(e, n)
                                        }
                                        ))
                                    }
                                }
                                )),
                                this.syncFilesWithUI()
                            }
                            ))
                        }
                        importZip(e) {
                            return o(this, void 0, void 0, (function*() {
                                try {
                                    let t = yield this.zipCtor.loadAsync(e);
                                    Object.values(t.files).forEach((e=>o(this, void 0, void 0, (function*() {
                                        if (!e.dir) {
                                            let t = "/" + e.name
                                              , n = yield e.async("blob")
                                              , {directory: o} = this.splitPath(t);
                                            this.isDirWhitelisted(o) && this.saveFile(n, t)
                                        }
                                    }
                                    )))),
                                    this.syncFilesWithUI()
                                } catch (e) {
                                    console.log(e),
                                    Ee.openPrompt("Error", "Failed to read archive.", (()=>{}
                                    ))
                                }
                            }
                            ))
                        }
                        tryImport(e) {
                            return o(this, void 0, void 0, (function*() {
                                try {
                                    let t = e.webkitGetAsEntry();
                                    if (null != t && t.isDirectory)
                                        return Ee.openPrompt("Import Pack?", `Do you want to import the directroy '${t.name}' as a mod pack? This may overwrite existing files.`, (()=>{
                                            this.importDir("/", t)
                                        }
                                        )),
                                        !0
                                } catch (e) {}
                                let t = e.getAsFile();
                                return null != t && "application/x-zip-compressed" == t.type && (yield this.prepareZipLib(),
                                Ee.openPrompt("Import Pack?", `Do you want to import the archive '${t.name}' as a mod pack? This may overwrite existing files.`, (()=>{
                                    this.importZip(t)
                                }
                                )),
                                !0)
                            }
                            ))
                        }
                        exportZip() {
                            return o(this, void 0, void 0, (function*() {
                                try {
                                    let e = new this.zipCtor;
                                    Object.values(this.files).forEach((t=>{
                                        let n = t.path.substr(1);
                                        e.file(n, t.file)
                                    }
                                    ));
                                    let t = yield e.generateAsync({
                                        type: "blob"
                                    });
                                    {
                                        let e = document.createElement("a");
                                        e.setAttribute("href", URL.createObjectURL(t)),
                                        e.setAttribute("download", `dredark_mod_${1e4 * Math.random() | 0}.zip`),
                                        e.style.display = "none",
                                        document.body.appendChild(e),
                                        e.click(),
                                        document.body.removeChild(e)
                                    }
                                } catch (e) {
                                    console.log(e),
                                    Ee.openPrompt("Error", "Failed to read archive.", (()=>{}
                                    ))
                                }
                            }
                            ))
                        }
                    }
                    function l(e) {
                        return e.startsWith("/img/") ? (e = e.substring(5)).split(".")[0] : null
                    }
                    t.modFileDB = h.RUN_ON_CLIENT((()=>new r))
                }
                ))
                  , Re = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.parseInviteAndClearURL = t.miscWebSetup = void 0,
                    t.miscWebSetup = function() {
                        console.log("game version:", A.GAME_VERSION);
                        let e = navigator.userAgent.toLowerCase()
                          , t = document.getElementById("bad-browser")
                          , n = document.getElementById("bad-browser-text");
                        e.includes("edge") ? (t.style.display = "",
                        n.innerText = "Warning: Dredark does not support Edge. If you experience issues, try using Chrome or Firefox.") : e.includes("safari") && !e.includes("chrome") && (t.style.display = "",
                        n.innerText = "Warning: Dredark does not support Safari. If you experience issues, try using Chrome or Firefox."),
                        window.closeBrowserWarning = function() {
                            t.style.display = "none"
                        }
                        ;
                        {
                            let e = document.createElement("link");
                            e.rel = "stylesheet",
                            e.href = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css",
                            e.integrity = "sha256-zmfNZmXoNWBMemUOo1XUGFfc0ihGGLYdgtJS3KCr/l0=",
                            e.crossOrigin = "anonymous",
                            document.head.append(e)
                        }
                        setTimeout((()=>{
                            console.log("%cSTOP!", "color:red;font-size:60pt;background:black;"),
                            console.log("%cIf somebody told you to type or copy-paste code on this screen, ignore them. They may be trying to steal your account, your ship, or take some other malicious action. If they claim to be a developer or admin, ignore them. If they claim you can get hacks or free items by doing this, ignore them. THEY ARE LYING!", "font-size:20pt"),
                            console.log("%cDO NOT PASTE ANYTHING IN THIS WINDOW!", "color:red;font-size:20pt;background:black;")
                        }
                        ), 1e3),
                        window.addEventListener("dragover", (e=>{
                            e.preventDefault()
                        }
                        )),
                        window.addEventListener("drop", (e=>{
                            if (e.preventDefault(),
                            null != e.dataTransfer)
                                for (let t = 0; t < e.dataTransfer.items.length; t++) {
                                    let n = e.dataTransfer.items[t];
                                    if (Te.modFileDB.tryImport(n))
                                        break
                                }
                        }
                        ))
                    }
                    ,
                    t.parseInviteAndClearURL = function() {
                        let e = location.search.match(/\?invite=(.*)/i);
                        if (null != e && E.checkKey(e[1])) {
                            let t = e[1]
                              , n = location.protocol + "//" + location.host + location.pathname;
                            return history.replaceState("", "", n),
                            t
                        }
                        return null
                    }
                }
                ))
                  , Ie = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.checkNotice = void 0;
                    const n = _.h("div", null, _.h("ul", null, _.h("li", null, "You must be at least 13 years of age to play this game."), _.h("li", null, "Chrome or Firefox are recommended. Other browsers might not work."), _.h("li", null, "This games's ", _.h("a", {
                        target: "_blank",
                        href: "terms.html"
                    }, "Terms"), " were revised on ", _.h("b", null, "June 7, 2021"), "."), _.h("li", null, "This games's ", _.h("a", {
                        target: "_blank",
                        href: "privacy.html"
                    }, "Privacy Policy"), " was revised on ", _.h("b", null, "June 18, 2020"), "."), _.h("li", null, "This game uses cookies. For more information, check the Privacy Policy."), _.h("li", null, "This game is not designed or optimized for mobile devices.")), _.h("p", null, "By clicking below and continuing to use this Service, you agree to our Terms and Privacy Policy."));
                    t.checkNotice = function(e) {
                        let t = parseInt(g.getCookie("notice_version"));
                        Number.isFinite(t) || (t = 0),
                        t < 13 ? Ee.openPromptEx("NOTICE (UPDATED)", n, Ee.PromptType.NoClose | Ee.PromptType.AcceptOnly, (()=>{
                            g.setCookie("notice_version", 13),
                            e()
                        }
                        )) : e()
                    }
                }
                ))
                  , ke = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.ScoreBoard = void 0;
                    t.ScoreBoard = class {
                        constructor(e, t) {
                            this.max_players = e,
                            this.max_teams = t,
                            this.teams = {}
                        }
                        applyUpdate(e) {
                            let t = this;
                            for (let n = 0; n < e.path.length - 1; n++)
                                if (t = t[e.path[n]],
                                null == t)
                                    return;
                            null != e.value ? t[e.path[e.path.length - 1]] = e.value : delete t[e.path[e.path.length - 1]]
                        }
                        getPlayerCount() {
                            let e = Object.keys(this.teams)
                              , t = 0;
                            return e.forEach((e=>{
                                let n = this.teams[e]
                                  , o = Object.keys(n.players);
                                t += o.length
                            }
                            )),
                            t
                        }
                        getTeamCount() {
                            return Object.keys(this.teams).length
                        }
                    }
                }
                ))
                  , Me = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.initAds = t.loadScript = void 0;
                    let n = new Set;
                    function o(e) {
                        if (n.has(e))
                            return;
                        n.add(e);
                        let t = document.createElement("script");
                        t.src = e,
                        t.async = !0,
                        document.head.append(t)
                    }
                    t.loadScript = o;
                    let i = !1
                      , r = !1;
                    t.initAds = function(e) {
                        if (r)
                            return i;
                        if (r = !0,
                        console.log("ads requested?", e),
                        function(e) {
                            if (location.search.includes("test_ads=1"))
                                return !0;
                            let t = window.navigator.userAgent.toLowerCase();
                            return !t.includes("valve steam") && !t.includes("mobile") && window.location.hostname != d.LOCAL_DOMAIN && e
                        }(e)) {
                            {
                                let e = 0
                                  , t = setInterval((()=>{
                                    window.__cmp ? (document.getElementById("nitro-consent").style.display = "",
                                    clearInterval(t)) : e > 10 ? clearInterval(t) : e++
                                }
                                ), 1e3)
                            }
                            window.nitroAds = window.nitroAds || {
                                createAd: function() {
                                    window.nitroAds.queue.push(["createAd", arguments])
                                },
                                queue: []
                            };
                            const e = ["728", "90"]
                              , n = ["300", "250"];
                            function t(e, t) {
                                window.nitroAds.createAd(e, {
                                    refreshLimit: 10,
                                    refreshTime: 90,
                                    renderVisibleOnly: !0,
                                    refreshVisibleOnly: !0,
                                    sizes: t,
                                    report: {
                                        enabled: !0,
                                        wording: "Report Ad",
                                        position: "top-right"
                                    }
                                })
                            }
                            t("new-ad-slot-1", [e]),
                            t("new-ad-slot-2", [e, n]),
                            t("new-ad-slot-3", [e, n]),
                            o("https://s.nitropay.com/ads-436.js"),
                            i = !0
                        }
                        return i
                    }
                }
                ))
                  , Ce = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.CharacterPicker = void 0;
                    const n = {};
                    class o extends _.Component {
                        constructor(e) {
                            super(e),
                            this.state = y.USER_SETTINGS.player_appearance
                        }
                        setCanvas(e) {
                            null != e && (this.preview_context = e.getContext("2d"))
                        }
                        componentDidUpdate() {
                            y.USER_SETTINGS.player_appearance = this.state
                        }
                        getImageData(e) {
                            let t = n[e];
                            if (null == t) {
                                let o = ve.getEarlyImageURL(e);
                                t = new Image,
                                t.src = o,
                                n[e] = t
                            }
                            return null == this.preview_context || null == t || 0 == t.width || 0 == t.height ? null : (this.preview_context.clearRect(0, 0, 100, 100),
                            this.preview_context.drawImage(t, 0, 0),
                            this.preview_context.getImageData(0, 0, t.width, t.height))
                        }
                        writeImageData(e, t, n, o, i=16777215) {
                            let r = (i >> 16) / 255
                              , l = (i >> 8 & 255) / 255
                              , a = (255 & i) / 255;
                            n -= Math.floor(t.width / 2),
                            o -= Math.floor(t.height / 2);
                            for (let i = 0; i < t.height; i++) {
                                let s = i + o;
                                if (s >= e.height)
                                    break;
                                for (let o = 0; o < t.width; o++) {
                                    let c = o + n;
                                    if (c >= e.width)
                                        break;
                                    let u = 4 * (i * t.width + o)
                                      , h = 4 * (s * e.width + c)
                                      , d = t.data[u + 3] / 255;
                                    if (0 != d) {
                                        let n = 1 - d;
                                        e.data[h] = e.data[h] * n + t.data[u] * r * d,
                                        e.data[h + 1] = e.data[h + 1] * n + t.data[u + 1] * l * d,
                                        e.data[h + 2] = e.data[h + 2] * n + t.data[u + 2] * a * d,
                                        e.data[h + 3] = Math.min(e.data[h + 3] + t.data[u + 3], 255)
                                    }
                                }
                            }
                        }
                        renderPreview() {
                            if (null != this.preview_context) {
                                let e = this.getImageData("player")
                                  , t = this.getImageData("player_head")
                                  , n = this.getImageData("player_hair")
                                  , o = this.getImageData("player_face")
                                  , i = this.getImageData("player_leg")
                                  , r = this.getImageData("player_foot")
                                  , l = this.getImageData("player_arm")
                                  , a = this.getImageData("player_hand");
                                if (null == e || null == t || null == n || null == o || null == i || null == r || null == l || null == a)
                                    return void setTimeout((()=>this.renderPreview()), 100);
                                this.preview_context.clearRect(0, 0, 100, 100);
                                let s = new ImageData(100,100);
                                this.writeImageData(s, t, 20, 40, R.parseColor(this.state.color_skin)),
                                this.writeImageData(s, e, 20, 40, R.parseColor(this.state.color_body)),
                                this.writeImageData(s, o, 20, 40),
                                0 != this.state.style_hair && this.writeImageData(s, n, 20, 40, R.parseColor(this.state.color_hair)),
                                this.writeImageData(s, i, 19, 40, R.parseColor(this.state.color_legs)),
                                this.writeImageData(s, r, 19, 40),
                                this.writeImageData(s, i, 23, 40, R.parseColor(this.state.color_legs)),
                                this.writeImageData(s, r, 23, 40),
                                this.writeImageData(s, l, 24, 26, R.parseColor(this.state.color_body)),
                                this.writeImageData(s, a, 24, 26, R.parseColor(this.state.color_skin)),
                                this.preview_context.putImageData(s, 0, 0)
                            } else
                                setTimeout((()=>this.renderPreview()), 100)
                        }
                        render() {
                            return "registered" != this.props.account_type ? _.h("p", {
                                class: "center-note"
                            }, "Log in to customize your character's appearance!") : (this.renderPreview(),
                            _.h("div", null, _.h("p", {
                                class: "center-note"
                            }, "Customize your character's appearance."), _.h("canvas", {
                                width: "40",
                                height: "80",
                                style: "vertical-align: top;margin:5px;",
                                ref: e=>this.setCanvas(e)
                            }), _.h("table", {
                                style: "display: inline-block;font-size:10pt;"
                            }, _.h("tr", null, _.h("td", null, "Hair"), _.h("td", null, _.h(Se.ColorPicker, {
                                small: !0,
                                color: this.state.color_hair,
                                onColorUpdate: e=>this.setState({
                                    color_hair: e
                                })
                            })), _.h("td", null, _.h("select", {
                                value: this.state.style_hair,
                                onChange: e=>Se.handleInput(e, (e=>this.setState({
                                    style_hair: +e
                                })))
                            }, _.h("option", {
                                value: 0
                            }, "Bald"), _.h("option", {
                                value: 1
                            }, "Not Bald")))), _.h("tr", null, _.h("td", null, "Skin"), _.h("td", null, _.h(Se.ColorPicker, {
                                small: !0,
                                color: this.state.color_skin,
                                onColorUpdate: e=>this.setState({
                                    color_skin: e
                                })
                            }))), _.h("tr", null, _.h("td", null, "Body"), _.h("td", null, _.h(Se.ColorPicker, {
                                small: !0,
                                color: this.state.color_body,
                                onColorUpdate: e=>this.setState({
                                    color_body: e
                                })
                            }))), _.h("tr", null, _.h("td", null, "Legs"), _.h("td", null, _.h(Se.ColorPicker, {
                                small: !0,
                                color: this.state.color_legs,
                                onColorUpdate: e=>this.setState({
                                    color_legs: e
                                })
                            }))))))
                        }
                    }
                    t.CharacterPicker = o
                }
                ))
                  , Oe = r((function(e, t) {
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.ServerOption = void 0;
                    class n extends _.Component {
                        getServerText(e) {
                            return null != be.SERVERS[e].ping ? `${e + 1} - ${be.SERVERS[e].description} - ${be.SERVERS[e].player_count} / ${be.SERVERS[e].max_player_count} - ${Math.round(be.SERVERS[e].ping)}ms` : `${e + 1} - ${be.SERVERS[e].description} - No Response`
                        }
                        componentDidMount() {
                            be.SERVERS[this.props.server_id].update_callback = ()=>{
                                this.forceUpdate()
                            }
                        }
                        render() {
                            return _.h("option", {
                                selected: this.props.selected,
                                value: this.props.server_id
                            }, this.getServerText(this.props.server_id))
                        }
                    }
                    t.ServerOption = n
                }
                ))
                  , Ne = r((function(e, t) {
                    var o = n && n.__awaiter || function(e, t, n, o) {
                        return new (n || (n = Promise))((function(i, r) {
                            function l(e) {
                                try {
                                    s(o.next(e))
                                } catch (e) {
                                    r(e)
                                }
                            }
                            function a(e) {
                                try {
                                    s(o.throw(e))
                                } catch (e) {
                                    r(e)
                                }
                            }
                            function s(e) {
                                var t;
                                e.done ? i(e.value) : (t = e.value,
                                t instanceof n ? t : new n((function(e) {
                                    e(t)
                                }
                                ))).then(l, a)
                            }
                            s((o = o.apply(e, t || [])).next())
                        }
                        ))
                    }
                    ;
                    Object.defineProperty(t, "__esModule", {
                        value: !0
                    }),
                    t.StartUIShipyard = void 0;
                    class i extends _.Component {
                        constructor() {
                            super(...arguments),
                            this.shouldComponentUpdate = ()=>!1
                        }
                        render() {
                            return _.h("div", {
                                id: this.props.id
                            }, _.h("p", null, "Don't want to see ads? That's fine!"), _.h("p", null, "Please consider ", _.h("a", {
                                target: "_blank",
                                rel: "noopener noreferrer",
                                href: "https://www.patreon.com/dredark"
                            }, "supporting continued development"), "."))
                        }
                    }
                    class r extends _.Component {
                        constructor(e, t) {
                            super(e, t),
                            this.state = {
                                tip_class: ""
                            }
                        }
                        render() {
                            let e = this.props.icon_path && "./ship-icon/" + this.props.icon_path + ".webp"
                              , t = ve.getEarlyImageURL("no_ship_icon")
                              , n = e ? "url(" + e + "), url(" + t + ")" : "url(" + t + ")"
                              , o = this.props.scale + "px"
                              , i = {
                                "background-color": this.props.color,
                                "background-image": n,
                                width: o,
                                height: o
                            }
                              , r = _.h("div", {
                                class: "tip dark " + this.state.tip_class,
                                style: "width: 200px;"
                            }, _.h("h3", null, v.filterWords(this.props.name)), _.h("ul", null, this.props.crew.map((e=>_.h("li", null, v.filterWords(e))))))
                              , l = e=>{
                                var t;
                                let n = e.target
                                  , o = null === (t = n.parentElement) || void 0 === t ? void 0 : t.clientWidth;
                                if (null != o) {
                                    n.offsetLeft + n.clientWidth / 2 > o / 2 ? this.setState({
                                        tip_class: "right"
                                    }) : this.setState({
                                        tip_class: "left"
                                    })
                                }
                            }
                            ;
                            return this.props.scale > 150 ? _.h("div", {
                                class: "shipyard-item",
                                style: i,
                                onClick: this.props.onSelect,
                                onMouseEnter: l
                            }, _.h("div", {
                                class: "sy-title"
                            }, _.h("h3", null, v.filterWords(this.props.name)), this.props.info_fragment), _.h("span", {
                                class: "sy-id"
                            }, "{" + this.props.hex_code + "}"), _.h("span", {
                                class: "sy-crew"
                            }, this.props.crew.length, " ", _.h("i", {
                                class: "fas fa-user"
                            })), r) : _.h("div", {
                                class: "shipyard-item",
                                style: i,
                                onClick: this.props.onSelect,
                                onMouseEnter: l
                            }, r)
                        }
                    }
                    class l extends _.Component {
                        constructor(e) {
                            super(e),
                            this.mounted = !1,
                            this.state = {
                                override_text: "Loading...",
                                connect_server: -1,
                                search: "",
                                scale: y.USER_SETTINGS.menu_zoom,
                                filter: y.USER_SETTINGS.menu_ship_filter,
                                show_ads: !1
                            },
                            this.invite_code = e.invite_code
                        }
                        componentDidMount() {
                            this.mounted = !0,
                            Se.onRefreshAccount(((e,t)=>{
                                this.mounted && (this.setState({
                                    account: e
                                }),
                                t && this.refreshShipList())
                            }
                            ))
                        }
                        componentWillUnmount() {
                            this.mounted = !1
                        }
                        setup() {
                            return o(this, void 0, void 0, (function*() {
                                be.pingServers(),
                                null != this.invite_code ? this.setServer(0) : this.setServer(y.USER_SETTINGS.preferred_server)
                            }
                            ))
                        }
                        setServer(e, t=!0) {
                            this.setState({
                                connect_server: e
                            }),
                            y.USER_SETTINGS.preferred_server = e,
                            t && this.refreshShipList(e)
                        }
                        refreshShipList(e=this.state.connect_server) {
                            return o(this, void 0, void 0, (function*() {
                                let t = this.invite_code;
                                if (null != e)
                                    try {
                                        let n = JSON.stringify({
                                            invite_code: t,
                                            server_id: e
                                        })
                                          , o = yield fetch("//" + be.QUERY_DOMAIN_SIMPLE + "/shiplist", {
                                            method: "POST",
                                            credentials: "include",
                                            body: n
                                        })
                                          , i = yield o.json();
                                        if (null != i.error)
                                            throw new Error(i.error);
                                        if (null != i.ban) {
                                            let e = i.ban.expire_time ? new Date(i.ban.expire_time).toLocaleString() : "NOPE!";
                                            return void Ee.openPrompt("HARD BANNED", "This account or address is banned from the game.\n\nReason/Note: " + i.ban.ban_info + "\n\nExpires: " + e, void 0, !0, !0)
                                        }
                                        if ("boolean" == typeof i.show_ads) {
                                            let e = Me.initAds(i.show_ads);
                                            this.setState({
                                                show_ads: e
                                            })
                                        }
                                        Se.refreshAccount(i.account, !1),
                                        this.setServer(i.server_id, !1);
                                        let r = new ke.ScoreBoard(i.max_player_count,i.max_team_count);
                                        r.teams = i.teams,
                                        be.updateServerPlayers(i.server_id, i.player_count, i.max_player_count);
                                        let l = {
                                            scoreboard: r,
                                            invited: i.invited,
                                            player_count: i.player_count,
                                            team_count: i.team_count
                                        };
                                        this.setState(l)
                                    } catch (e) {
                                        this.setState({
                                            override_text: "Failed to load ship list.",
                                            scoreboard: void 0
                                        }),
                                        console.log("failed to load ship list", e)
                                    }
                            }
                            ))
                        }
                        joinShip(e) {
                            this.invite_code = null,
                            this.props.join_callback(this.state.connect_server, {
                                type: "join_or_load",
                                id: e
                            })
                        }
                        render() {
                            var e, t, n, o, l;
                            let a = be.SERVERS.map(((e,t)=>_.h(Oe.ServerOption, {
                                server_id: t,
                                selected: t == this.state.connect_server
                            })))
                              , s = "registered" == (null === (e = this.state.account) || void 0 === e ? void 0 : e.type) ? _.h("button", {
                                class: "btn-small",
                                onClick: ()=>Ae.toggleUI("settings")
                            }, "Manage") : _.h("button", {
                                class: "btn-small btn-green",
                                onClick: Ee.openLogin
                            }, "Login...")
                              , c = []
                              , u = null != this.state.scoreboard;
                            if (u) {
                                let e = [];
                                for (let o in null === (t = this.state.scoreboard) || void 0 === t ? void 0 : t.teams)
                                    e.push({
                                        id: +o,
                                        ship: null === (n = this.state.scoreboard) || void 0 === n ? void 0 : n.teams[o]
                                    });
                                e.sort(((e,t)=>null != e.ship.time && null != t.ship.time ? t.ship.time - e.ship.time : e.id < 0 != t.id < 0 ? e.id < 0 ? -1 : 1 : null == e.ship.my_rank != (null == t.ship.my_rank) ? null == e.ship.my_rank ? 1 : -1 : null != e.ship.my_rank ? t.ship.my_rank - e.ship.my_rank : Object.keys(t.ship.players).length - Object.keys(e.ship.players).length));
                                let o = new E.Searcher(this.state.search);
                                e.forEach((e=>{
                                    let t = e.id
                                      , n = e.ship
                                      , i = [];
                                    for (let e in n.players) {
                                        let t = n.players[e];
                                        i.push(t)
                                    }
                                    if ("" != this.state.search && !o.find_in(n.team_name) && !o.find_in("{" + n.hex_code + "}")) {
                                        let e = !1;
                                        for (let t = 0; t < i.length; t++)
                                            if (o.find_in(i[t])) {
                                                e = !0;
                                                break
                                            }
                                        if (!e)
                                            return
                                    }
                                    let l = null;
                                    if (t < 0) {
                                        if ("online" == this.state.filter && !this.state.invited)
                                            return;
                                        l = _.h("span", {
                                            style: "color:#0F0;"
                                        }, _.h("i", {
                                            class: "far fa-save"
                                        }), " Saved")
                                    } else {
                                        if ("saved" == this.state.filter && !this.state.invited)
                                            return;
                                        switch (n.my_rank) {
                                        case d.TeamRank.Captain:
                                            l = _.h("span", {
                                                style: "color:#0FF;"
                                            }, "History (Captain)");
                                            break;
                                        case d.TeamRank.Crew:
                                            l = _.h("span", {
                                                style: "color:#FF0;"
                                            }, "History (Crew)");
                                            break;
                                        case d.TeamRank.Guest:
                                            l = _.h("span", {
                                                style: "color:#AAA;"
                                            }, "History (Guest)");
                                            break;
                                        case d.TeamRank.CrewInvitePending:
                                            l = _.h("span", {
                                                style: "color:#AA0;"
                                            }, "Invite Pending (Crew)")
                                        }
                                    }
                                    c.push(_.h(r, {
                                        color: n.color,
                                        hex_code: n.hex_code,
                                        name: n.team_name,
                                        crew: i,
                                        info_fragment: l,
                                        onSelect: ()=>{
                                            this.joinShip(t)
                                        }
                                        ,
                                        scale: this.state.invited ? 300 : this.state.scale,
                                        icon_path: n.icon_path
                                    }))
                                }
                                ))
                            }
                            let h = []
                              , p = []
                              , m = [];
                            let f = this.state.scale + 10
                              , g = Math.floor((window.innerWidth - 400 - 20) / f)
                              , v = Math.ceil(400 / f) * g;
                            c.forEach(((e,t)=>{
                                t < v ? h.push(e) : t < 2 * v ? p.push(e) : m.push(e)
                            }
                            ));
                            let S, b = e=>{
                                this.setState({
                                    filter: e
                                }),
                                y.USER_SETTINGS.menu_ship_filter = e
                            }
                            ;
                            S = location.hostname == d.TEST_DOMAIN ? _.h("div", {
                                class: "test-notify"
                            }, _.h("h3", null, "Test Server"), _.h("p", null, "This is the test server."), _.h("ul", null, _.h("li", null, "The server may update, crash, or restart at any time, without warning."), _.h("li", null, "New features may be broken, buggy, or incomplete."), _.h("li", null, "Ship Captains can access a cheat menu.")), _.h("p", null, "To switch to the main servers, click ", _.h("a", {
                                href: "https://drednot.io"
                            }, "here"), ".")) : _.h("section", null, _.h("h3", null, "More Games"), _.h("ul", {
                                class: "shipyard-partners",
                                dangerouslySetInnerHTML: {
                                    __html: null !== (o = this.props.more_games_html) && void 0 !== o ? o : ""
                                }
                            }));
                            let A = this.state.show_ads;
                            return _.h("div", {
                                id: "shipyard"
                            }, _.h("div", {
                                id: "shipyard-left",
                                class: "window dark"
                            }, _.h("section", null, _.h("h3", null, "Server"), _.h("select", {
                                onChange: e=>{
                                    this.invite_code = null,
                                    this.setServer(parseInt(e.target.value))
                                }
                            }, a)), _.h("section", null, _.h("h3", null, "Account"), _.h("p", null, _.h("b", null, "Type: ", Se.renderAccountType(this.state.account)), " ", s), _.h("p", null, _.h("b", null, "Appearance:")), _.h(Ce.CharacterPicker, {
                                account_type: null === (l = this.state.account) || void 0 === l ? void 0 : l.type
                            })), _.h("section", null, _.h("h3", {
                                style: "display:inline-block;"
                            }, "Ship List"), _.h("button", {
                                class: "btn-small",
                                style: "float:right;",
                                onClick: ()=>{
                                    this.invite_code = null,
                                    this.refreshShipList()
                                }
                            }, "Refresh ↻"), _.h("p", null, _.h("b", null, "Search:"), " ", _.h("input", {
                                value: this.state.search,
                                onInput: e=>this.setState({
                                    search: e.target.value
                                })
                            })), _.h("p", null, _.h("b", null, "Scale: "), " ", _.h("input", {
                                type: "range",
                                min: "50",
                                max: "300",
                                value: this.state.scale,
                                class: "slider",
                                onInput: e=>this.setState({
                                    scale: +e.target.value
                                }),
                                onChange: e=>{
                                    y.USER_SETTINGS.menu_zoom = +e.target.value
                                }
                            })), _.h("p", null, _.h("b", null, "Filter Ships: "), _.h("button", {
                                class: null == this.state.filter ? "btn-green" : "",
                                onClick: ()=>b(null)
                            }, "All"), _.h("button", {
                                class: "saved" == this.state.filter ? "btn-green" : "",
                                onClick: ()=>b("saved")
                            }, "Saved"), _.h("button", {
                                class: "online" == this.state.filter ? "btn-green" : "",
                                onClick: ()=>b("online")
                            }, "Online")), _.h("p", null, _.h("button", {
                                class: "btn-large btn-green",
                                style: "margin:0;",
                                onClick: ()=>{
                                    Ee.openPromptRename("", "", ((e,t)=>{
                                        this.props.join_callback(this.state.connect_server, {
                                            type: "new",
                                            name: e,
                                            color: t
                                        })
                                    }
                                    ), !0)
                                }
                            }, "New Ship"))), S), _.h("div", {
                                id: "shipyard-right"
                            }, _.h("h1", null, "Dredark"), _.h("div", {
                                style: {
                                    display: u ? "none" : ""
                                }
                            }, _.h("h2", null, this.state.override_text)), _.h("div", {
                                style: {
                                    display: u ? "" : "none"
                                }
                            }, _.h("div", {
                                class: "shipyard-ad",
                                style: {
                                    display: A ? "" : "none"
                                }
                            }, _.h("div", {
                                class: "dark"
                            }, _.h("h4", null, "Advertisement"), " ", _.h(i, {
                                id: "new-ad-slot-1"
                            }))), this.state.invited ? _.h("h2", null, "You were invited to this ship. Click it to join, or refresh the list to join another ship.") : _.h("h2", null, "Click a ship to join!"), _.h("div", {
                                class: "shipyard-bin"
                            }, h), _.h("div", {
                                class: "shipyard-ad",
                                style: {
                                    display: A && 0 != h.length ? "" : "none"
                                }
                            }, _.h("div", {
                                class: "dark"
                            }, _.h("h4", null, "Advertisement"), " ", _.h(i, {
                                id: "new-ad-slot-2"
                            }))), _.h("div", {
                                class: "shipyard-bin"
                            }, p), _.h("div", {
                                class: "shipyard-ad",
                                style: {
                                    display: A && 0 != p.length ? "" : "none"
                                }
                            }, _.h("div", {
                                class: "dark"
                            }, _.h("h4", null, "Advertisement"), " ", _.h(i, {
                                id: "new-ad-slot-3"
                            }))), _.h("div", {
                                class: "shipyard-bin"
                            }, m))))
                        }
                    }
                    let a = null;
                    function s(e) {
                        a = e
                    }
                    t.StartUIShipyard = class {
                        constructor() {
                            var e, t;
                            let n = document.getElementById("partner-info");
                            this.partner_html = null !== (t = null === (e = n.querySelector("ul")) || void 0 === e ? void 0 : e.innerHTML) && void 0 !== t ? t : "",
                            n.remove()
                        }
                        setOpen(e) {
                            document.getElementById("big-ui-container").style.display = e ? "" : "none"
                        }
                        render(e, t) {
                            let n = document.getElementById("big-ui-container");
                            _.render(_.h(l, {
                                invite_code: e,
                                more_games_html: this.partner_html,
                                join_callback: t,
                                ref: s
                            }), n),
                            null != a && a.setup()
                        }
                    }
                }
                ))
                  , Le = n && n.__awaiter || function(e, t, n, o) {
                    return new (n || (n = Promise))((function(i, r) {
                        function l(e) {
                            try {
                                s(o.next(e))
                            } catch (e) {
                                r(e)
                            }
                        }
                        function a(e) {
                            try {
                                s(o.throw(e))
                            } catch (e) {
                                r(e)
                            }
                        }
                        function s(e) {
                            var t;
                            e.done ? i(e.value) : (t = e.value,
                            t instanceof n ? t : new n((function(e) {
                                e(t)
                            }
                            ))).then(l, a)
                        }
                        s((o = o.apply(e, t || [])).next())
                    }
                    ))
                }
                ;
                l.setupErrorLogging(),
                Re.miscWebSetup();
                let Pe = !1;
                window.addEventListener("message", (e=>{
                    e.origin == location.origin && null != e.data.join_ship && (e.data.never_load && (Pe = !0),
                    Be(0, {
                        type: "join_or_load",
                        id: e.data.join_ship
                    }))
                }
                ));
                let xe = new Ne.StartUIShipyard;
                function De() {
                    return Le(this, void 0, void 0, (function*() {
                        let e = Re.parseInviteAndClearURL();
                        xe.render(e, Be)
                    }
                    ))
                }
                function Ue() {
                    xe.setOpen(!0),
                    De()
                }
                Ie.checkNotice(De);
                let Fe = function() {
                    return Le(this, void 0, void 0, (function*() {
                        try {
                            return yield u.setup_cl()
                        } catch (e) {
                            throw Ee.openPromptEx("Loading Failed", "Check the console for more information. This is probably caused by an outdated or incompatible browser.", Ee.PromptType.Danger | Ee.PromptType.NoClose),
                            console.log(e),
                            console.log(e.stack),
                            new Error("Fatal")
                        }
                    }
                    ))
                }();
                function Be(e, t) {
                    return Le(this, void 0, void 0, (function*() {
                        xe.setOpen(!1);
                        let n = yield Fe;
                        try {
                            let o = {
                                game_version: A.GAME_VERSION,
                                hide_game_rank: y.USER_SETTINGS.hide_game_rank,
                                never_load: Pe,
                                server_id: e,
                                appearance: y.USER_SETTINGS.player_appearance,
                                ship: t
                            }
                              , i = JSON.stringify({
                                join_info: o
                            })
                              , r = yield fetch("//" + be.QUERY_DOMAIN + ":4100/join", {
                                method: "POST",
                                credentials: "include",
                                body: i
                            })
                              , l = yield r.json();
                            if (Se.refreshAccount(l.account),
                            null != l.error)
                                throw l.error;
                            if (null != l.reject)
                                return console.log("connect rejected!", d.DropReason[l.reject]),
                                console.log("[[dredark dead]]"),
                                void p.openDisconnectDialog(l.reject, (()=>{
                                    Ue()
                                }
                                ));
                            let a = l;
                            if (!0 !== a.okay)
                                throw "bad join result";
                            e = a.server_id;
                            let s = be.SERVERS[e].domain
                              , c = a.net_port;
                            console.log("using port", c),
                            n.startGame(be.CONNECT_PROTO + "//" + s + ":" + c, Ue, be.SERVERS[e].description)
                        } catch (e) {
                            return console.log("CONNECT ERROR", e.toString()),
                            console.log("[[dredark dead]]"),
                            void p.openDisconnectDialog(-1, (()=>{
                                Ue()
                            }
                            ))
                        }
                    }
                    ))
                }
                var He = Object.defineProperty({}, "__esModule", {
                    value: !0
                });
                t.__wbg_star0 = b,
                t.cl_main = He,
                t.colors = R,
                t.commonjsGlobal = n,
                t.commonjsRequire = function(e) {
                    throw new Error('Could not dynamically require "' + e + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')
                }
                ,
                t.constants = d,
                t.createCommonjsModule = r,
                t.disconnect_dialog = p,
                t.early_assets = ve,
                t.getAugmentedNamespace = i,
                t.getDefaultExportFromCjs = o,
                t.graphics = T,
                t.i181 = X,
                t.i183 = ne,
                t.i185 = $,
                t.i187 = ee,
                t.i189 = J,
                t.i204 = C,
                t.i208 = N,
                t.i209 = V,
                t.i210 = F,
                t.i211 = j,
                t.i212 = D,
                t.i213 = K,
                t.i214 = P,
                t.i215 = H,
                t.i221 = k,
                t.mod_assets = Te,
                t.patreon_tiers = I,
                t.preact = _,
                t.pui_early_util = Se,
                t.pui_modals = Ee,
                t.require$$0 = c,
                t.scoreboard = ke,
                t.shared_safety = h,
                t.time = w,
                t.user_settings = y,
                t.util = E,
                t.wasm = u,
                t.word_filter = v
            }
            ));

            require(["x/cl_main.jtTqS33A2NRINMaxpdTG"], (_)=>{}
            )
        </script>
        <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"rayId":"666fe05e59db2b14","token":"bd7f410135a94e1a81ab224b8c95a441","version":"2021.6.0","si":10}'></script>
    </body>
</html>
